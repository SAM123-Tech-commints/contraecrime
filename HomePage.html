<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contra E-Crime</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/Dccn8pc.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
* {
    box-sizing: border-box;
}

body, html {
    height: 100%;
    margin: 0;
    padding: 0;
    font-family: 'Montserrat', sans-serif;
    background-color: #f7f7f7;
    transition: background-color 0.3s ease;
}

.loader-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

.loader-overlay.active {
    opacity: 1;
    pointer-events: all;
}

.loader {
    width: 48px;
    height: 48px;
    border: 5px solid #FFF;
    border-bottom-color: transparent;
    border-radius: 50%;
    display: inline-block;
    box-sizing: border-box;
    animation: rotation 1s linear infinite;
}

@keyframes rotation {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

.dark-theme .loader {
    border-color: #d7b15c;
    border-bottom-color: transparent;
}

.avatar-loading {
    position: absolute;
    top: 0;
    left: 0;
    width: 50px;
    height: 50px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 50%;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 101;
}

.avatar-loading.active {
    display: flex;
}

.avatar-loading .loader {
    width: 24px;
    height: 24px;
    border-width: 3px;
}

.container {
    display: flex;
    min-height: 100vh;
    flex-direction: column;
}

.sidebar {
    width: 290px;
    background-image: url('https://i.imgur.com/bNRxAhZ.png');
    background-size: cover;
    background-position: center;
    color: white;
    padding: 20px;
    height: 100vh;
    position: fixed;
    transition: transform 0.3s ease;
}

.sidebar h1 {
    text-align: center;
    margin-bottom: 30px;
    font-size: 24px;
}

.sidebar ul {
    list-style-type: none;
    padding: 0;
}

.sidebar ul li {
    margin: 50px 0;
}

.sidebar ul li a {
    color: white;
    text-decoration: none;
    font-size: 18px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.sidebar ul li a:not(.dark-theme-label a) {
    transition: all 0.3s ease;
    position: relative;
}

.sidebar ul li a:not(.dark-theme-label a):hover {
    color: #d7b15c;
    transform: translateX(5px);
}

.sidebar ul li a:not(.dark-theme-label a)::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -10px;
    left: 0;
    background-color: #d7b15c;
    transition: width 0.3s ease;
}

.sidebar ul li a:not(.dark-theme-label a):hover::after {
    width: 95%;
}

.dark-theme .sidebar ul li a:not(.dark-theme-label a):hover {
    color: #d7b15c;
}

.sidebar ul li a img {
    width: 30px;
    height: 30px;
}

.dark-theme-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
}

.dark-theme-label {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 18px;
}

.dark-theme-label img {
    width: 30px;
    height: 30px;
    border-radius: 50%;
}

.toggle-switch {
    position: relative;
    width: 60px;
    height: 30px;
}

.switch-label {
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: #28292c;
    border-radius: 25px;
    cursor: pointer;
    border: 3px solid #28292c;
}

.checkbox {
    position: absolute;
    display: none;
}

.slider {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 25px;
    transition: 0.3s;
}

.checkbox:checked ~ .slider {
    background-color: #d8dbe0;
}

.slider::before {
    content: "";
    position: absolute;
    top: 3px;
    left: 3px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    box-shadow: inset 8px -3px 0px 0px #d8dbe0;
    background-color: #28292c;
    transition: 0.3s;
}

.checkbox:checked ~ .slider::before {
    transform: translateX(30px);
    background-color: #28292c;
    box-shadow: none;
}

.content {
    flex: 1;
    padding: 20px;
    margin-left: 290px;
    overflow-y: auto;
    transition: background-color 0.3s ease, margin-left 0.3s ease;
}

.header {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 30px;
    position: relative;
}

.account-customization {
    position: fixed;
    top: 10px;
    right: 20px;
    z-index: 1000;
}

.user-details {
    display: none;
}

.avatar-container {
    position: relative;
    display: inline-block;
}

.avatar-container .profile-pic {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: #ccc;
    display: flex;
    justify-content: center;
    align-items: center;
    object-fit: cover;
    border: 2px solid #000;
    cursor: pointer;
    color: transparent;
    font-size: 0;
}

.customization-options {
    position: absolute;
    top: 50px;
    right: 0;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    display: none;
    flex-direction: column;
    padding: 8px;
    z-index: 100;
    align-items: flex-start;
    width: 300px;
}

.customization-options.active {
    display: flex;
}

.customization-options .user-info {
    margin-bottom: 10px;
    width: 100%;
    padding: 10px;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #d32f2f 100%);
    border-radius: 5px;
    position: relative;
    overflow: hidden;
}

.customization-options .user-info::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('https://www.transparenttextures.com/patterns/circuit.png');
    opacity: 0.1;
    z-index: 0;
}

.customization-options .user-info p {
    margin: 5px 0;
    font-size: 12px;
    color: #ffffff;
    position: relative;
    z-index: 1;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    font-weight: 500;
    overflow-wrap: break-word;
}

.customization-options .user-info p::before {
    content: attr(data-label);
    font-weight: 700;
    color: #ff3333;
    margin-right: 5px;
}

.customization-options label {
    font-size: 12px;
    color: #333;
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px 8px;
    transition: background-color 0.3s ease;
    width: 100%;
    text-align: left;
}

.customization-options label:hover {
    background-color: #f0f0f0;
    border-radius: 5px;
}

.customization-options input[type="color"] {
    width: 100%;
    height: 25px;
    padding: 0;
    border: none;
    cursor: pointer;
    background: none;
}

.customization-options select {
    font-size: 12px;
    padding: 4px;
    border-radius: 5px;
    border: 1px solid #ccc;
    cursor: pointer;
    width: 100%;
}

.customization-options input[type="file"] {
    display: none;
}

.customization-options .file-input-label {
    font-size: 12px;
    color: #333;
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px 8px;
    transition: background-color 0.3s ease;
    width: 100%;
    text-align: left;
}

.customization-options .file-input-label:hover {
    background-color: #f0f0f0;
    border-radius: 5px;
}

.dark-theme .customization-options {
    background-color: #3a3b3c;
    border-color: #555;
}

.dark-theme .customization-options .user-info {
    background: linear-gradient(135deg, #5a6268 0%, #454b50 50%, #2f3539 100%);
    color: #e0e0e0;
}

.dark-theme .customization-options .user-info p {
    color: #e0e0e0;
}

.dark-theme .customization-options .user-info p::before {
    color: #ffeb3b;
}

.dark-theme .customization-options label,
.dark-theme .customization-options .file-input-label {
    color: #e0e0e0;
}

.dark-theme .customization-options label:hover,
.dark-theme .customization-options .file-input-label:hover {
    background-color: #4a4b4c;
}

.dark-theme .customization-options select {
    background-color: #3a3b3c;
    color: #e0e0e0;
    border-color: #555;
}

.fingerprint-container {
    position: relative;
    width: 150px;
    height: 150px;
    margin-bottom: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    perspective: 1000px;
}

.fingerprint-icon {
    width: 100%;
    height: 100%;
    background: url('https://static.thenounproject.com/png/1238269-200.png') no-repeat center center;
    background-size: contain;
    position: relative;
    transition: transform 0.5s ease;
}

.fingerprint-icon::before {
    content: "";
    position: absolute;
    margin-right: 4px;
    margin-top: 4px;
    width: 138px;
    height: 140px;
    border: 3px solid;
    border-radius: 50%;
    z-index: 0;
    color: #000000;
    transition: border-color 0.3s ease;
}

.dark-theme .fingerprint-icon {
    filter: brightness(0) invert(1);
}

.dark-theme .fingerprint-icon::before {
    border-color: #ffffff;
}

.fingerprint-icon.scanning {
    animation: glow 2s infinite ease-in-out, rotate3D 5s infinite linear;
}

.fingerprint-icon.scanning::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, rgba(255, 0, 0, 0.3) 0%, transparent 70%);
    opacity: 0;
    animation: ripple 2s infinite ease-in-out;
    z-index: -1;
}

.fingerprint-icon .scan-line {
    position: absolute;
    width: 100%;
    height: 2px;
    background: linear-gradient(to right, transparent, #ff0000, transparent);
    top: 50%;
    left: 0;
    opacity: 0;
    z-index: 1;
}

.fingerprint-icon.scanning .scan-line {
    animation: scanVertical 1.5s infinite linear;
}

.fingerprint-icon .scan-line:nth-child(2) {
    width: 2px;
    height: 100%;
    background: linear-gradient(to bottom, transparent, #ff0000, transparent);
    top: 0;
    left: 50%;
}

.fingerprint-icon.scanning .scan-line:nth-child(2) {
    animation: scanHorizontal 1.5s infinite linear;
}

.fingerprint-icon .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #ff0000;
    border-radius: 50%;
    opacity: 0;
    z-index: 2;
}

.fingerprint-icon.scanning .particle {
    animation: particleMove 3s infinite ease-in-out;
}

.fingerprint-icon .particle:nth-child(3) { top: 10%; left: 20%; animation-delay: 0s; }
.fingerprint-icon .particle:nth-child(4) { top: 80%; left: 30%; animation-delay: 0.5s; }
.fingerprint-icon .particle:nth-child(5) { top: 40%; left: 70%; animation-delay: 1s; }
.fingerprint-icon .particle:nth-child(6) { top: 60%; left: 10%; animation-delay: 1.5s; }

@keyframes glow {
    0%, 100% { filter: brightness(1) drop-shadow(0 0 5px rgba(255, 0, 0, 0.5)); }
    50% { filter: brightness(1.2) drop-shadow(0 0 15px rgba(255, 0, 0, 0.8)); }
}

@keyframes rotate3D {
    0% { transform: rotateY(0deg) rotateX(0deg); }
    50% { transform: rotateY(10deg) rotateX(5deg); }
    100% { transform: rotateY(0deg) rotateX(0deg); }
}

@keyframes ripple {
    0% { opacity: 0; transform: scale(0.5); }
    50% { opacity: 0.5; }
    100% { opacity: 0; transform: scale(1.5); }
}

@keyframes scanVertical {
    0% { transform: translateY(-60px); opacity: 0; }
    50% { opacity: 1; }
    100% { transform: translateY(60px); opacity: 0; }
}

@keyframes scanHorizontal {
    0% { transform: translateX(-60px); opacity: 0; }
    50% { opacity: 1; }
    100% { transform: translateX(60px); opacity: 0; }
}

@keyframes particleMove {
    0% { opacity: 0; transform: translate(0, 0); }
    50% { opacity: 1; transform: translate(10px, -10px); }
    100% { opacity: 0; transform: translate(-10px, 10px); }
}

.dark-theme .fingerprint-icon.scanning::after {
    background: radial-gradient(circle, rgba(215, 177, 92, 0.3) 0%, transparent 70%);
}

.dark-theme .fingerprint-icon .scan-line {
    background: linear-gradient(to right, transparent, #d7b15c, transparent);
}

.dark-theme .fingerprint-icon .scan-line:nth-child(2) {
    background: linear-gradient(to bottom, transparent, #d7b15c, transparent);
}

.dark-theme .fingerprint-icon .particle {
    background: #d7b15c;
}

.dark-theme .fingerprint-icon.scanning {
    animation: glowDark 2s infinite ease-in-out, rotate3D 5s infinite linear;
}

@keyframes glowDark {
    0%, 100% { filter: brightness(0) invert(1) drop-shadow(0 0 5px rgba(215, 177, 92, 0.5)); }
    50% { filter: brightness(0) invert(1) drop-shadow(0 0 15px rgba(215, 177, 92, 0.8)); }
}

.search-container {
    width: 40%;
    position: relative;
    margin-bottom: 20px;
    background: linear-gradient(145deg, #ffffff, #e6e6e6);
    border-radius: 10px;
    box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1), -5px -5px 15px rgba(255, 255, 255, 0.7);
    padding: 5px;
    transition: all 0.3s ease;
}

.search-container:hover {
    box-shadow: 5px 5px 20px rgba(0, 0, 0, 0.15), -5px -5px 20px rgba(255, 255, 255, 0.9);
}

.search-icon {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    transition: transform 0.3s ease;
    cursor: pointer; 
}

.search-input {
    width: 100%;
    height: 50px;
    padding: 10px 40px 10px 15px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    letter-spacing: 1px;
    background: transparent;
    color: #333;
    box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.1), inset -2px -2px 5px rgba(255, 255, 255, 0.5);
    transition: all 0.3s ease;
}

.search-input:focus {
    outline: none;
    box-shadow: inset 3px 3px 8px rgba(0, 0, 0, 0.15), inset -3px -3px 8px rgba(255, 255, 255, 0.7);
}

.search-input::placeholder {
    color: #999;
    font-style: italic;
}

.search-container:hover > .search-icon {
    animation: anim 1s linear infinite;
}

@keyframes anim {
    0%, 100% {
        transform: translateY(-50%) scale(1);
    }
    50% {
        transform: translateY(-50%) scale(1.2);
    }
}

.dark-theme .search-container {
    background: linear-gradient(145deg, #3a3b3c, #2c2d2e);
    box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3), -5px -5px 15px rgba(255, 255, 255, 0.1);
}

.dark-theme .search-container:hover {
    box-shadow: 5px 5px 20px rgba(0, 0, 0, 0.4), -5px -5px 20px rgba(255, 255, 255, 0.15);
}

.dark-theme .search-input {
    color: #ffffff;
    box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(255, 255, 255, 0.1);
}

.dark-theme .search-input:focus {
    box-shadow: inset 3px 3px 8px rgba(0, 0, 0, 0.4), inset -3px -3px 8px rgba(255, 255, 255, 0.15);
}

.dark-theme .search-input::placeholder {
    color: #bbbbbb;
}

.dark-theme .search-icon svg path {
    stroke: #ffffff;
}

.header p {
    font-size: 18px;
    font-weight: 500;
    color: #333;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
    margin: 10px 0;
}

.dark-theme .header p {
    color: #e0e0e0;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}

.articles {
    margin-top: 20px;
    color: #000000;
    text-align: center;
}

.articles h2 {
    margin-bottom: 30px;
    font-size: 24px;
}

.cards-container {
    display: flex;
    gap: 35px;
    flex-wrap: wrap;
    justify-content: center;
}

.card {
    --bg-card: #27272a;
    --primary: #d9cd28;
    --primary-800: #d7b15c;
    --primary-shadow: #b7b90d;
    --light: #d9d9d9;
    --zinc-800: #18181b;
    --bg-linear: linear-gradient(0deg, var(--primary) 50%, var(--light) 125%);

    position: relative;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: 1rem;
    width: 350px;
    border-radius: 1rem;
    justify-content: space-between;
    transition: background-color 0.3s ease;
}

.card.main-law {
    width: 100%;
    max-width: 800px;
}

.card.hidden {
    display: none;
}

.card.highlight {
    box-shadow: 0 0 10px 5px rgba(230, 207, 5, 0.5);
}

body:not(.dark-theme) .card {
    background-color: #b8973e;
}

.dark-theme .card {
    background-color: #3a3b3c;
    color: #ffffff;
}

.image_container {
    overflow: hidden;
    cursor: pointer;
    position: relative;
    z-index: 5;
    width: 100%;
    height: 200px;
    background-color: var(--primary-800);
    border-radius: 0.5rem;
}

.image_container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.cybercrime-title {
    width: 100%;
    font-size: 1.2rem;
    font-weight: 600;
    color: #ffffff;
    text-transform: capitalize;
    text-wrap: wrap;
    min-height: 3rem; 
    line-height: 1.3; 
}

.cybercrime-description {
    font-size: 0.9rem;
    color: #ffffff;
    line-height: 1.4;
    text-align: justify;
}

.border-button {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 6px 5px;
    border-radius: 10px;
    border: 1px solid rgb(255, 255, 255);
    overflow: hidden;
    background: transparent;
    color: rgb(255, 255, 255);
    cursor: pointer;
    align-self: flex-end;
    margin-top: 1rem;
    transition: all 0.3s ease;
    text-decoration: none;
}

.border-button .button-text {
    transform: translateX(17px);
    font-size: 0.9em;
    font-weight: 500;
    transition-duration: 0.3s;
    margin: 0;
}

.border-button .iconer {
    transform: translateY(35px);
    transition-duration: 0.3s;
    margin: 0;
    display: flex;
    align-items: center;
}

.border-button:hover .button-text {
    transform: translateX(5px);
}

.border-button:hover .iconer {
    transform: translateY(0px);
}

.save-button {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 6px 5px;
    border-radius: 10px;
    border: 1px solid rgb(255, 255, 255);
    overflow: hidden;
    background: transparent;
    color: rgb(255, 255, 255);
    cursor: pointer;
    align-self: flex-end;
    margin-top: 1rem;
    transition: all 0.3s ease;
    text-decoration: none;
}

.save-button .button-text {
    transform: translateX(17px);
    font-size: 0.9em;
    font-weight: 500;
    transition-duration: 0.3s;
    margin: 0;
}

.save-button .iconer {
    transform: translateY(35px);
    transition-duration: 0.3s;
    margin: 0;
    display: flex;
    align-items: center;
}

.save-button:hover .button-text {
    transform: translateX(5px);
}

.save-button:hover .iconer {
    transform: translateY(0px);
}

.success-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 4000;
}

.success-modal.active {
    display: flex;
}

.modal-content {
    background-color: white;
    padding: 20px 30px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    max-width: 400px;
    width: 90%;
}

.dark-theme .modal-content {
    background-color: #2d3748;
    color: #e2e8f0;
}

.modal-content h3 {
    margin: 0 0 15px;
    font-size: 20px;
    font-weight: 600;
    color: #2d3748;
}

.dark-theme .modal-content h3 {
    color: #e2e8f0;
}

.modal-content p {
    margin: 0 0 20px;
    font-size: 14px;
    color: #718096;
}

.dark-theme .modal-content p {
    color: #a0aec0;
}

.modal-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
}

.modal-btn {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.1s ease;
}

.modal-btn.ok {
    background-color: #4a90e2;
    color: white;
}

.modal-btn.ok:hover {
    background-color: #357abd;
    transform: translateY(-2px);
}

.dark-theme .modal-btn.ok {
    background-color: #5a9bd4;
}

.dark-theme .modal-btn.ok:hover {
    background-color: #4682b4;
}

footer {
    background-color: #333;
    color: white;
    padding: 15px 30px;
    text-align: center;
    margin-left: 290px;
    z-index: 1;
    transition: margin-left 0.3s ease;
}

footer p {
    margin: 0;
    font-size: 14px;
}

.footer-links {
    margin-top: 5px;
}

.footer-links a {
    color: #d7b15c;
    text-decoration: none;
    margin: 0 10px;
    font-size: 14px;
}

.footer-links a:hover {
    text-decoration: underline;
}

.dark-theme footer {
    background-color: #1a1a1a;
}

body.dark-theme {
    background-color: #121212;
    color: #e0e0e0;
}

.dark-theme .content {
    background-color: #28292c;
}

.dark-theme .content::before {
    background-color: rgba(40, 41, 44, 0.9);
}

.dark-theme .articles {
    color: #ffffff;
}

.dark-theme .articles h2 {
    color: #ffffff;
}

.dark-theme .cybercrime-title,
.dark-theme .cybercrime-description {
    color: #ffffff;
}

.mobile-nav {
    display: none;
    background-image: url('https://i.imgur.com/bNRxAhZ.png');
    padding: 15px;
    position: fixed;
    width: 100%;
    z-index: 1000;
}

.mobile-nav .logo {
    color: white;
    font-size: 20px;
    font-weight: bold;
    text-decoration: none;
}

.mobile-nav .menu-icon {
    color: white;
    font-size: 24px;
    cursor: pointer;
    position: absolute;
    right: 15px;
    top: 15px;
}

@media (max-width: 1024px) {
    .sidebar {
        width: 250px;
    }

    .sidebar h1 {
        font-size: 22px;
    }

    .sidebar ul li a {
        font-size: 16px;
    }

    .dark-theme-label {
        font-size: 16px;
    }

    .content {
        margin-left: 250px;
    }

    footer {
        margin-left: 250px;
    }

    .card {
        width: 300px;
    }

    .card.main-law {
        width: 100%;
        max-width: 600px;
    }

    .account-customization {
        right: 10px;
    }

    .avatar-container .profile-pic {
        width: 35px;
        height: 35px;
    }

    .avatar-loading {
        width: 35px;
        height: 35px;
    }

    .customization-options {
        top: 45px;
        width: 220px;
    }

    .search-container {
        width: 50%;
    }

    .fingerprint-container {
        width: 120px;
        height: 120px;
    }

    .fingerprint-icon::before {
        width: 108px;
        height: 110px;
    }
}

@media (max-width: 768px) {
    .sidebar {
        width: 200px;
        padding: 10px;
    }

    .sidebar h1 {
        font-size: 20px;
    }

    .sidebar ul li a {
        font-size: 14px;
    }

    .dark-theme-label {
        font-size: 14px;
    }

    .content {
        margin-left: 200px;
        padding: 10px;
    }

    footer {
        margin-left: 200px;
    }

    .card {
        width: 100%;
        max-width: 350px;
    }

    .card.main-law {
        width: 100%;
        max-width: 500px;
    }

    .avatar-container .profile-pic {
        width: 30px;
        height: 30px;
    }

    .avatar-loading {
        width: 30px;
        height: 30px;
    }

    .customization-options {
        top: 40px;
        width: 200px;
    }

    .fingerprint-container {
        width: 120px;
        height: 120px;
    }

    .search-container {
        width: 70%;
    }
}

@media (max-width: 480px) {
    .container {
        flex-direction: column;
    }

    .mobile-nav {
        display: block;
    }

    .sidebar {
        width: 100%;
        height: auto;
        position: fixed;
        padding: 10px;
        transform: translateX(-100%);
        z-index: 999;
        top: 60px;
        height: calc(100vh - 60px);
        overflow-y: auto;
    }

    .sidebar.active {
        transform: translateX(0);
    }

    .sidebar h1 {
        display: none;
    }

    .sidebar ul li {
        margin: 20px 0;
    }

    .sidebar ul li a {
        font-size: 16px;
    }

    .dark-theme-label {
        font-size: 16px;
    }

    .content {
        margin-left: 0;
        padding: 80px 10px 10px;
    }

    .footer {
        margin-left: 0;
        padding: 10px 20px;
        text-align: center;
    }

    footer p {
        font-size: 12px;
    }

    .footer-links a {
        font-size: 12px;
        margin: 0 8px;
    }

    .account-customization {
        top: 70px;
        right: 10px;
        z-index: 998;
    }

    .avatar-container .profile-pic {
        width: 30px;
        height: 30px;
        border-width: 1px;
    }

    .avatar-loading {
        width: 30px;
        height: 30px;
    }

    .avatar-loading .loader {
        width: 15px;
        height: 15px;
        border-width: 2px;
    }

    .customization-options {
        top: 40px;
        width: 180px;
    }

    .customization-options .user-info p {
        font-size: 10px;
    }

    .customization-options label,
    .customization-options .file-input-label {
        font-size: 10px;
        padding: 3px 6px;
    }

    .customization-options select {
        font-size: 10px;
        padding: 3px;
    }

    .fingerprint-container {
        width: 90px;
        height: 90px;
    }

    .fingerprint-icon::before {
        width: 78px;
        height: 80px;
    }

    .search-container {
        width: 90%;
    }

    .card {
        width: 100%;
        max-width: 100%;
    }

    .card.main-law {
        width: 100%;
        max-width: 100%;
    }

    .modal-content {
        padding: 15px 20px;
        max-width: 300px;
    }

    .modal-content h3 {
        font-size: 18px;
    }

    .modal-content p {
        font-size: 12px;
    }

    .modal-btn {
        padding: 8px 16px;
        font-size: 12px;
    }
}
    </style>
</head>
<body>
    <div class="loader-overlay" id="loaderOverlay">
        <div class="loader"></div>
    </div>
    <div class="mobile-nav">
        <a href="#" class="logo">Contra E-Crime</a>
        <div class="menu-icon" id="mobileMenuIcon">
            <i class="fas fa-bars"></i>
        </div>
    </div>

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <h1>Contra E-Crime</h1>
            <ul>
                <li>
                    <a href="HomePage.html">
                        <img src="https://i.imgur.com/OAHusQp.png" alt="Home">
                        Home
                    </a>
                </li>
                <li>
                    <a href="News.html">
                        <img src="https://i.imgur.com/FNALwXX.png" alt="News & Insights">
                        News & Insights
                    </a>
                </li>
                <li>
                    <a href="SavedLaws.html">
                        <img src="https://i.imgur.com/VChoqhD.png" alt="Saved Laws">
                        Saved Laws
                    </a>
                </li>
                <li>
                    <a href="History.html">
                        <img src="https://i.imgur.com/cnaDfEq.png" alt="Search History">
                        Search History
                    </a>
                </li>
                <li>
                    <a href="ContactUs.html">
                        <img src="https://i.imgur.com/T7bI4RJ.png" alt="Contact Us">
                        Contact Us
                    </a>
                </li>
                <li>
                    <a href="AboutUs.html">
                        <img src="https://i.imgur.com/lktrzpa.png" alt="About Us">
                        About Us
                    </a>
                </li>
                <li>
                    <a href="index.html">
                        <img src="https://i.imgur.com/2jjsgOq.png" alt="Logout">
                        Logout
                    </a>
                </li>
            </ul>
            <div class="dark-theme-container">
                <div class="dark-theme-label">
                    <img src="https://i.imgur.com/vEKpOsq.png" alt="Dark Theme">
                    <span>Dark Theme</span>
                </div>
                <div class="toggle-switch">
                    <label class="switch-label">
                        <input type="checkbox" class="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </nav>
        <main class="content">
            <div class="header">
                <div class="account-customization">
                    <div class="user-details">
                        <!-- Hidden by default -->
                    </div>
                    <div class="avatar-container">
                        <img class="profile-pic" id="profilePic" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/4L1mGQAAAAASUVORK5CYII=" alt="User Avatar">
                        <div class="avatar-loading" id="avatarLoading">
                            <div class="loader"></div>
                        </div>
                        <div class="customization-options" id="customizationMenu">
                            <div class="user-info" id="userInfo">
                                <p id="usernameDisplay" data-label="Username:">Loading...</p>
                                <p id="emailDisplay" data-label="Email:">Loading...</p>
                                <p id="createdAtDisplay" data-label="Account Created:">Loading...</p>
                            </div>
                            <label class="file-input-label" for="avatarInput">Change Avatar</label>
                            <input type="file" id="avatarInput" accept="image/jpeg,image/png,image/jpg">
                            <label for="avatarBgColorPicker">Avatar Background Color</label>
                            <input type="color" id="avatarBgColorPicker" value="#cccccc">
                            <label for="borderColorPicker">Border Color</label>
                            <input type="color" id="borderColorPicker" value="#000000">
                            <label for="borderTypeSelect">Border Type</label>
                            <select id="borderTypeSelect">
                                <option value="solid">Solid</option>
                                <option value="dashed">Dashed</option>
                                <option value="dotted">Dotted</option>
                                <option value="double">Double</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="fingerprint-container">
                    <div class="fingerprint-icon" id="fingerprintIcon">
                        <div class="scan-line"></div>
                        <div class="scan-line"></div>
                        <div class="particle"></div>
                        <div class="particle"></div>
                        <div class="particle"></div>
                        <div class="particle"></div>
                    </div>
                </div>
                <div class="search-container">
                    <input type="text" class="search-input" id="searchInput" placeholder="Ask anything...">
                    <span class="search-icon" role="button" aria-label="Search" tabindex="0">
                        <svg width="19px" height="19px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path opacity="1" d="M14 5H20" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path opacity="1" d="M14 8H17" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M21 11.5C21 16.75 16.75 21 11.5 21C6.25 21 2 16.75 2 11.5C2 6.25 6.25 2 11.5 2" stroke="#000" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path> <path opacity="1" d="M22 22L20 20" stroke="#000" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                    </span>
                </div>
                <p>Find the right law for you!</p>
            </div>
            <section class="articles">
                <h2 id="sectionTitle">TOP ARTICLES</h2>
                <div class="cards-container" id="cardsContainer">
                    <!-- Laws will be dynamically populated here -->
                </div>
            </section>
            <div class="success-modal" id="successModal">
                <div class="modal-content">
                    <h3>Success</h3>
                    <p>Law saved successfully!</p>
                    <div class="modal-buttons">
                        <button class="modal-btn ok" id="okSuccess">OK</button>
                    </div>
                </div>
            </div>
        </main>
        <footer>
            <p>© 2025 Contra E-Crime. All rights reserved.</p>
            <div class="footer-links">
                <a href="PrivacyPolicy.html">Privacy Policy</a>
                <a href="TermsOfUse.html">Terms of Use</a>
                <a href="ContactUs.html">Contact Us</a>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCDNmxNOV7rr_qfM_mTeYTaUIkkLvRaf80",
            authDomain: "contra-e-crime.firebaseapp.com",
            projectId: "contra-e-crime",
            storageBucket: "contra-e-crime.firebasestorage.app",
            messagingSenderId: "198995444405",
            appId: "1:198995444405:web:5f8c6eed561461b36034fc",
            databaseURL: "https://contra-e-crime-default-rtdb.firebaseio.com"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();

        const CLOUDINARY_CLOUD_NAME = 'dkxtbukta';
        const CLOUDINARY_UPLOAD_PRESET = 'contraecrime';

        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const mobileMenuIcon = document.getElementById('mobileMenuIcon');
        const sidebar = document.getElementById('sidebar');
        const loaderOverlay = document.getElementById('loaderOverlay');
        const profilePic = document.getElementById('profilePic');
        const customizationMenu = document.getElementById('customizationMenu');
        const avatarInput = document.getElementById('avatarInput');
        const avatarLoading = document.getElementById('avatarLoading');
        const avatarBgColorPicker = document.getElementById('avatarBgColorPicker');
        const borderColorPicker = document.getElementById('borderColorPicker');
        const borderTypeSelect = document.getElementById('borderTypeSelect');
        const usernameDisplay = document.getElementById('usernameDisplay');
        const emailDisplay = document.getElementById('emailDisplay');
        const createdAtDisplay = document.getElementById('createdAtDisplay');
        const searchInput = document.getElementById('searchInput');
        const fingerprintIcon = document.getElementById('fingerprintIcon');
        const cardsContainer = document.getElementById('cardsContainer');
        const sectionTitle = document.getElementById('sectionTitle');
        const successModal = document.getElementById('successModal');
        const okSuccess = document.getElementById('okSuccess');

        const laws = [
    {
        title: "Electronic Commerce Act of 2000 (Republic Act No. 8792)",
        description: "Addresses offenses related to electronic transactions, including those involving hacking, cracking, and unauthorized access to computer systems.",
        scenario: "Someone’s account on an e-commerce app was hacked, leading to unauthorized orders of expensive products.",
        punishment: "Penalties include fines from PHP 100,000 to PHP 1,000,000 and imprisonment from 6 months to 6 years for online fraud and other violations.",
        image: "https://images.app.goo.gl/MJdJY5nPRFTpomS89",
        pdf: "https://drive.google.com/uc?export=download&id=19eKpQ6LF8gXcNSHUJP5PRbTc3an0-Ttj"
    },
    {
        title: "Anti-Child Pornography Act of 2009 (Republic Act No. 9775)",
        description: "Criminalizes the production, distribution, and possession of child pornography in the Philippines.",
        scenario: "A suspect installs a secret camera in a child’s bedroom to record private activities for illicit purposes.",
        punishment: "Reclusion perpetua and a fine of PHP 2,000,000 to PHP 5,000,000.",
        image: "https://images.app.goo.gl/KbESLjpQK6qEjvYr5",
        pdf: "https://drive.google.com/uc?export=download&id=19fqznBKhcapfQWA6NIzKSwqO9lT6Q9ty"
    },
    {
        title: "Access Devices Regulation Act of 1998 (Republic Act No. 8484)",
        description: "Criminalizes unauthorized possession, use, and trafficking of access devices like credit cards, debit cards, and PINs to deter fraud and identity theft.",
        scenario: "A criminal installs skimming devices on ATMs to steal card information for unauthorized transactions.",
        punishment: "Fines of PHP 10,000 or twice the value obtained; imprisonment from 6 to 20 years, depending on the offense and prior convictions.",
        image: "https://www.divinalaw.com/wp-content/uploads/2021/06/RA-No.-8484-as-amended-by-RA-No.-11449-1024x1024.png",
        pdf: "https://drive.google.com/uc?export=download&id=1YymAGQcFx-bNO0vyAf90bti7q-WEyxs0"
    },
    {
        title: "Anti-Financial Account Scamming Act (AFASA) (Republic Act No. 12010)",
        description: "Combats online fraud by enforcing stricter fraud prevention systems for banks and protecting customers.",
        scenario: "Money mules use fake IDs to open bank accounts for receiving scam proceeds from fake investment schemes.",
        punishment: "Imprisonment from 4 to 14 years or life; fines from PHP 50,000 to PHP 10,000,000, depending on the offense.",
        image: "https://ndvlaw.com/wp-content/uploads/2024/09/Republic-Act-No.-12010-A-Look-at-the-Anti-Financial-Account-Scamming-Act-AFASA.jpg",
        pdf: "https://drive.google.com/uc?export=download&id=1yGJwCAfxi20_C0LMlwFTDtNBttZBLGM7"
    },
    {
        title: "Cybercrime Prevention Act of 2012 (Republic Act No. 10175)",
        description: "Prevents and penalizes cybercrimes involving computer data, systems, and content, including hacking and online defamation.",
        scenario: "A hacker steals sensitive customer data from a company’s network for fraudulent purposes.",
        punishment: "Prisión mayor (6-12 years) or reclusión temporal (12-20 years); fines from PHP 50,000 to PHP 10,000,000, depending on the offense.",
        image: "https://blog.ipleaders.in/wp-content/uploads/2021/05/online-abuse.jpg",
        pdf: "https://drive.google.com/uc?export=download&id=1sVVM6uZ3mD5yH0uLiv1hgdFWhVfmVL2y"
    },
    {
        title: "Data Privacy Act of 2012 (Republic Act No. 10173)",
        description: "Protects personal data by regulating its collection, processing, and storage in government and private sectors.",
        scenario: "A BPO employee illegally accesses clients’ credit card information for fraudulent purposes.",
        punishment: "Imprisonment from 6 months to 7 years; fines from PHP 100,000 to PHP 5,000,000, depending on the violation.",
        image: "https://afpmbai.com.ph/wp-content/uploads/2017/09/data_privacy_photo.jpg",
        pdf: "https://drive.google.com/uc?export=download&id=1fmdjVWeMfagBmWi9UKDRX1Gol3kISPo5"
    },
    {
        title: "Anti-Photo and Video Voyeurism Act of 2009 (Republic Act No. 9995)",
        description: "Criminalizes unauthorized recording, distribution, or publication of private photos or videos, especially without consent.",
        scenario: "Someone secretly records a person showering and distributes the video online.",
        punishment: "Imprisonment of 3 to 7 years; fines from PHP 100,000 to PHP 500,000, or both.",
        image: "https://ralblaw.com/wp-content/uploads/2021/10/voyeurism1.png",
        pdf: "https://drive.google.com/uc?export=download&id=1MAp-mHsMnbNH7FdBZPg9qCi6BJK6ztJW"
    },
    {
        title: "Expanded Anti-Trafficking in Persons Act of 2012 (Republic Act No. 10364)",
        description: "Eliminates human trafficking, particularly of women and children, through protection mechanisms and penalties.",
        scenario: "A woman is lured abroad with a job promise but forced into prostitution.",
        punishment: "Imprisonment of 15 years and fines from PHP 500,000 to PHP 1,000,000; qualified trafficking carries life imprisonment and fines from PHP 2,000,000 to PHP 5,000,000.",
        image: "https://www.regroup.com/wp-content/uploads/2022/01/trafficking-header.jpg",
        pdf: "https://drive.google.com/uc?export=download&id=1veUl839xlZ5Z22bD2B4-RMZzOR1al0yP"
    },
    {
        title: "Subscriber Identity Module (SIM) Registration Act (Republic Act No. 11934)",
        description: "Mandates SIM card registration to enhance telecommunications security and curb crimes like fraud and phishing.",
        scenario: "A scammer uses fake IDs to register SIM cards for smishing and phishing activities.",
        punishment: "Imprisonment from 6 months to 6 years; fines from PHP 50,000 to PHP 4,000,000, or both.",
        image: "https://newsinfo.inquirer.net/files/2022/12/sim-card-registration-122922.png",
        pdf: "https://drive.google.com/uc?export=download&id=1Q9iaqyhrzItF0dPJtX0BOACEsxgG7E2h"
    },
    {
        title: "Anti-Online Sexual Abuse or Exploitation of Children Act (Republic Act No. 11930)",
        description: "Protects children from online sexual abuse and exploitation through stricter enforcement and victim support.",
        scenario: "A minor is coerced into sending explicit content via a messaging app for money.",
        punishment: "Life imprisonment and fines from PHP 100,000 to PHP 20,000,000, depending on the offense.",
        image: "https://pia.gov.ph/wp-content/uploads/2024/02/Strengthen-online-safety-of-children-with-RA-11930-THUMBNAIL.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1eN7KaTxydkquvH5oaOK4SuDtDUPPYUv0"
    },
    {
        title: "Intellectual Property Code of the Philippines (Republic Act No. 8293)",
        description: "Protects and enforces the rights of creators and owners of intellectual property, including copyrights, trademarks, patents, and industrial designs.",
        scenario: "A business uses a copyrighted song in its marketing materials without permission from the copyright holder.",
        punishment: "First offense: 1-3 years imprisonment and PHP 50,000-150,000 fine. Second offense: 3 years 1 day-6 years and PHP 150,000-500,000 fine. Third offense: 6 years 1 day-9 years and PHP 500,000-1,500,000 fine.",
        image: "https://i.imgur.com/uDeCpYy.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=19eKpQ6LF8gXcNSHUJP5PRbTc3an0-Ttj"
    },
    {
        title: "Terrorism Financing Prevention and Suppression Act (Republic Act No. 10168)",
        description: "Criminalizes the financing of terrorism, aiming to prevent and suppress such acts by freezing and forfeiting associated properties or funds.",
        scenario: "A group uses a legitimate business to funnel funds to terrorist organizations.",
        punishment: "Reclusion temporal to reclusion perpetua; fines from PHP 500,000 to PHP 1,000,000. Attempted crimes: two degrees lower penalty. Accomplices: one degree lower. AMLC fines from PHP 100,000 to PHP 500,000.",
        image: "https://imgur.com/U7YW85j",
        pdf: "https://drive.google.com/uc?export=download&id=1GWkIED1oTO-6q0_Oc3WnsLE6JQDNI7la"
    },
    {
        title: "Anti-Money Laundering Act of 2001 (Republic Act No. 9160)",
        description: "Criminalizes money laundering to prevent the use of the financial system for laundering illegal proceeds, with provisions for asset freezing.",
        scenario: "A criminal launders drug trafficking money through a legitimate business to buy real estate.",
        punishment: "7-14 years imprisonment and fines from PHP 3,000,000 or twice the asset value; facilitating transactions: 4-7 years and PHP 1,500,000-3,000,000; other violations: 6 months-8 years and PHP 100,000-1,000,000.",
        image: "https://i.imgur.com/Jd2pX3x.png",
        pdf: "https://drive.google.com/uc?export=download&id=19eu0OUggR8dWZVdTXO7bqWxlLzzyBxrq"
    },
    {
        title: "National Bureau of Investigation Reorganization Act (Republic Act No. 10867)",
        description: "Enhances the NBI’s investigative capabilities by reorganizing and modernizing the agency, setting personnel standards and funding provisions.",
        scenario: "The NBI Cybercrime Division raids a group operating a phishing scam with fake banking websites.",
        punishment: "No specific punishments outlined, as the law focuses on NBI reorganization.",
        image: "https://i.imgur.com/82lztoi.png",
        pdf: "https://drive.google.com/uc?export=download&id=1P8iqEQZR-KyoujasXhyuKwOSDCnEkgVJ"
    },
    {
        title: "Mobile Number Portability Act (Republic Act No. 11202)",
        description: "Allows mobile subscribers to switch providers while retaining their numbers, promoting consumer welfare.",
        scenario: "A scammer ports a number to create a false identity for fraudulent activities.",
        punishment: "Fines from PHP 10,000 to PHP 1,000,000; repeated offenses may lead to revocation of PTE franchise.",
        image: "https://i.imgur.com/YpXa47l.png",
        pdf: "https://drive.google.com/uc?export=download&id=1CaogPHeuVeuYVz2qwwrDzmysU2pAFyMe"
    },
    {
        title: "Safe Spaces Act (Republic Act No. 11313)",
        description: "Protects against gender-based sexual harassment in public spaces, online, workplaces, and educational institutions.",
        scenario: "A person receives inappropriate sexual messages in a group chat without consent.",
        punishment: "Verbal harassment: PHP 1,000-10,000 fines, community service, or 6-30 days imprisonment. Lewd acts: PHP 10,000-20,000 fines or 11 days-6 months imprisonment. Stalking/unwanted contact: PHP 30,000-100,000 fines or 11 days-6 months imprisonment.",
        image: "https://imgur.com/gIGoy0v",
        pdf: "https://drive.google.com/uc?export=download&id=1jGQdiO-amxQ_lgH3WHLUaEZ5uvl4mogR"
    },
    {
        title: "New Central Bank Act (Republic Act No. 7653)",
        description: "Mandates the Bangko Sentral ng Pilipinas (BSP) to maintain price and financial stability, outlining the Monetary Board’s structure and powers.",
        scenario: "A bank director takes an undisclosed loan from their bank, violating conflict-of-interest rules.",
        punishment: "Imprisonment from 6 months to 14 years; fines from PHP 30,000 to PHP 2,000,000 for violations like false statements or unauthorized disclosures.",
        image: "https://imgur.com/fe9JDSI",
        pdf: "https://drive.google.com/uc?export=download&id=1xIzlG57PfQVSTTFae4jTrzIU7EFXtulR"
    },
    {
        title: "Anti-Wire Tapping Act (Republic Act No. 4200)",
        description: "Prohibits unauthorized wiretapping and recording of communications without consent, protecting communication privacy.",
        scenario: "A person secretly records a confidential business meeting without participants’ consent.",
        punishment: "Imprisonment from 6 months to 6 years; public officials face perpetual disqualification, and aliens face deportation.",
        image: "https://i.imgur.com/2H5lVBF.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1huXOn7fZIKwRaaunW16YqVxq7fgqGL9x"
    },
    {
        title: "Human Security Act of 2007 (Republic Act No. 9372)",
        description: "Protects against terrorism by defining the crime and providing prevention and suppression mechanisms.",
        scenario: "A bomb threat at a public event leads to a suspect’s arrest under the law.",
        punishment: "12 years for joining terrorist groups; 10-12 years for assisting terrorists; life imprisonment without parole for foreign terrorists or conspiracy.",
        image: "https://imgur.com/uk6tHLf",
        pdf: "https://drive.google.com/uc?export=download&id=1ou2ATqbJsBXc8v9AD44hsn9oWsHtY7Lo"
    },
    {
        title: "Anti-Terrorism Act of 2020 (Republic Act No. 11449)",
        description: "Prevents and penalizes terrorism, defining offenses and empowering the Anti-Terrorism Council for detention and surveillance.",
        scenario: "A group releases dangerous substances to intimidate the public, classified as terrorism.",
        punishment: "Life imprisonment without parole and fines from PHP 1,000,000 to PHP 5,000,000; other violations: 10-20 years and PHP 500,000-800,000 fines.",
        image: "https://imgur.com/0Fq4SQV",
        pdf: "https://drive.google.com/uc?export=download&id=1GmkMUipXouSzaxc5nhGHRrhsV30Hz_ho"
    },
    {
        title: "Anti-Bullying Act of 2013 (Republic Act No. 10627)",
        description: "Requires schools to implement anti-bullying policies and procedures to address and prevent bullying.",
        scenario: "Classmates tease a student for poor penmanship, disrupting their learning by defacing their notebook.",
        punishment: "School employees: PHP 50,000-100,000 fines or 6 months-1 year imprisonment. Schools: permit suspension/revocation or administrative sanctions.",
        image: "https://i.imgur.com/fcW8tiE.png",
        pdf: "https://drive.google.com/uc?export=download&id=1bcz-gRb0P9I3C6gYukO9yjM5OzHk_WSK"
    },
    {
        title: "Department of Information and Communications Technology Act (Republic Act No. 10844)",
        description: "Establishes the DICT to develop ICT policies, ensuring consumer protection, data privacy, and sector growth.",
        scenario: "A local government unit in Fairview, Quezon City, faces phishing attacks targeting its online services.",
        punishment: "Unauthorized data processing: 3-6 years imprisonment and PHP 500,000-4,000,000 fines. Cybercrime penalties vary by offense.",
        image: "https://i.imgur.com/XPIqiJL.png",
        pdf: "https://drive.google.com/uc?export=download&id=1L5hAjE4FAh-4PSE2GnW_9euEC5UfQhA-"
    },
    {
        title: "Strategic Trade Management Act (Republic Act No. 10697)",
        description: "Prevents proliferation of weapons of mass destruction by regulating trade in strategic goods.",
        scenario: "A company exports a dual-use computer chip without proper authorization, risking military misuse.",
        punishment: "Fines up to PHP 250,000 or twice the goods’ value; imprisonment from 6 months to 12 years; business registration suspension.",
        image: "https://i.imgur.com/ihzaYcz.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1LFHMLdNkLPrH7mNBtrx_Kmdxh1nxkIIk"
    },
    {
        title: "Energy Virtual One-Stop Shop Act (Republic Act No. 11234)",
        description: "Provides a web-based system for filing and monitoring energy-related applications and permits.",
        scenario: "A company uses EVOSS to track its solar power plant application across agencies.",
        punishment: "Fines of PHP 100,000 per day of delay.",
        image: "https://i.imgur.com/I9djXob.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1LF9-k2M5FBKyvasxp7RugEiBu8KfU-Je"
    },
    {
        title: "Consumer Act of the Philippines (Republic Act No. 7394)",
        description: "Protects consumers from hazards, deceptive practices, and unfair sales, ensuring education and redress mechanisms.",
        scenario: "A consumer buys a defective product with a ‘No Return’ policy but is entitled to repair or refund.",
        punishment: "Fines from PHP 500 to PHP 300,000; imprisonment from 2 months to 5 years, depending on the violation.",
        image: "https://i.imgur.com/jTttiZn.png",
        pdf: "https://drive.google.com/uc?export=download&id=1L9XOyWwzbS6AtlsQ5KjO3Hc1veZXKYeC"
    },
    {
        title: "Optical Media Act of 2003 (Republic Act No. 9239)",
        description: "Protects intellectual property by regulating the production and distribution of optical media.",
        scenario: "An unregistered company illegally distributes pirated DVDs without an OMB license.",
        punishment: "Imprisonment from 3 to 6 years; fines from PHP 500,000 to PHP 1,500,000.",
        image: "https://i.imgur.com/USUn9jC.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1L6hFoxjn220QgggEd60esvaD-b4IxoO0"
    },
    {
        title: "National Cybersecurity Plan Framework (Executive Order No. 189, 2015)",
        description: "Addresses cyber threats by enhancing security for government and commercial information systems.",
        scenario: "The NCIAC assesses a cyberattack’s impact on critical systems to coordinate a response.",
        punishment: "Prisión mayor (6-12 years) or fines from PHP 200,000 to PHP 10,000,000, depending on the offense.",
        image: "https://i.imgur.com/ERjJ1d1.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1LXirMjfZaJZN_81wfTBqC1CJpUqO_NDI"
    },
    {
        title: "Strengthening DICT’s Cybersecurity Role (Executive Order No. 82, 2022)",
        description: "Bolsters digital defenses and fosters cybersecurity awareness across the country.",
        scenario: "A government agency fails to implement cybersecurity measures, leading to a data breach.",
        punishment: "No specific punishments outlined, as the order focuses on DICT’s cybersecurity role.",
        image: "https://i.imgur.com/FaxwLks.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1LWQPBiHhXOsquk3X0jvqZHE2UxUmyO0-"
    },
    {
        title: "National Cybersecurity Inter-Agency Committee (Executive Order No. 95, 2019)",
        description: "Coordinates government efforts to safeguard ICT infrastructure against cyber threats.",
        scenario: "The committee responds to phishing attacks targeting government email systems.",
        punishment: "No specific punishments outlined, as the order focuses on coordination.",
        image: "https://i.imgur.com/cqTT0Dd.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1LOidcGKN-xNRqR0SYHo3K6O99ybBu2RO"
    },
    {
        title: "Guidelines on IT Risk Management (BSP Circular No. 808, 2013)",
        description: "Strengthens risk management and consumer protection in BSP-supervised institutions’ IT operations.",
        scenario: "A bank implements multi-factor authentication to protect online banking from cyber threats.",
        punishment: "Monetary fines, operational restrictions, or voided contracts for non-compliance.",
        image: "https://i.imgur.com/7RHpvee.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1cQXxl2plPVQVVmDpSQCopO9dKc5yjxp-"
    },
    {
        title: "Enhanced Information Security Management (BSP Circular No. 982, 2017)",
        description: "Requires BSFIs to establish robust cybersecurity frameworks and risk management processes.",
        scenario: "A bank appoints an Information Security Officer and enforces multi-factor authentication.",
        punishment: "Fines, license suspension/revocation, or actions against responsible officers for non-compliance.",
        image: "https://i.imgur.com/c2ciYqd.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1iwia7iIPzx4_Y-bZhddYMsd-KeRvIRZA"
    },
    {
        title: "Technology and Cyber-Risk Reporting (BSP Circular No. 1019, 2018)",
        description: "Tightens reporting of cyber-risk incidents to enhance BSP’s surveillance and consumer protection.",
        scenario: "A bank reports cyber incidents to senior management for timely corrective actions.",
        punishment: "Fines per MORB/MORNBFI, suspension of product offerings, licenses, or settlement authority.",
        image: "https://imgur.com/btAssap",
        pdf: "https://drive.google.com/uc?export=download&id=17wNElB9nG6CDIWWJMcq80zEPHv2V2RlZ"
    },
    {
        title: "Guidelines on Operational Risk Management (BSP Circular No. 900, 2015)",
        description: "Promotes effective risk management systems to ensure safe BSFI operations, addressing process and system failures.",
        scenario: "A bank employee sends confidential data to the wrong email, highlighting operational risks.",
        punishment: "Suspension of rediscounting, dividends, branching privileges, or other non-monetary sanctions.",
        image: "https://imgur.com/CvFVNnx",
        pdf: "https://drive.google.com/uc?export=download&id=1QLBNTFwO8bKaOrvF9uiLHwhLy0WCu4CV"
    },
    {
        title: "Guidelines on Business Continuity Management (BSP Circular No. 951, 2017)",
        description: "Emphasizes robust business continuity processes to ensure operational resilience in BSFIs.",
        scenario: "A company develops a disaster recovery plan to maintain operations during a natural disaster.",
        punishment: "No specific punishments outlined, as the circular focuses on continuity guidelines.",
        image: "https://imgur.com/VcPDD8t",
        pdf: "https://drive.google.com/uc?export=download&id=1FrfbUXx2SRFBVpTOWejCqJp3bm9pJaW8"
    },
    {
        title: "Guidelines on Outsourcing Risk Management (BSP Circular No. 1039, 2019)",
        description: "Outlines requirements for pawnshops and MSBs, including licensing and electronic reporting to manage outsourcing risks.",
        scenario: "A bank assesses an external provider’s security before outsourcing customer support.",
        punishment: "Monetary fines for reporting infractions; license revocation for severe non-compliance.",
        image: "https://i.imgur.com/wJkVPOc.png",
        pdf: "https://drive.google.com/uc?export=download&id=1aT6zapWtUFlfyoLHT_kIuJotznVhDp91"
    },
    {
        title: "Adoption of PNS ISO/IEC 27002 (DICT Memorandum Circular No. 005, 2017)",
        description: "Mandates international security standards to protect Critical Information Infrastructure under the NCSP.",
        scenario: "A government agency adopts security protocols to protect ICT systems from threats.",
        punishment: "No specific punishments outlined, as the circular focuses on standard adoption.",
        image: "https://imgur.com/InJVdd1",
        pdf: "https://drive.google.com/uc?export=download&id=1bgqM5Qs1ATzz92eUbcOmirrjVHNSPGtX"
    },
    {
        title: "Protection of Individuals under Cybersecurity Plan (DICT Memorandum Circular No. 007, 2022)",
        description: "Promotes cybersecurity awareness and measures to protect individual data within critical infrastructure.",
        scenario: "A government agency runs a campaign to educate citizens on avoiding phishing scams.",
        punishment: "No specific punishments outlined, as the circular focuses on awareness.",
        image: "https://i.imgur.com/d95q33c.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1I4XxnD702TRk2CkTHejTnqdKg3kx4aZE"
    },
    {
        title: "Cloud First Policy (DICT Department Circular No. 2017-002)",
        description: "Mandates government agencies to prioritize cloud computing for IT infrastructure to modernize operations.",
        scenario: "DSWD implements a cloud-based system for managing social welfare programs.",
        punishment: "No specific punishments outlined, as the circular focuses on cloud adoption.",
        image: "https://imgur.com/SQGWOFW",
        pdf: "https://drive.google.com/uc?export=download&id=1iCKbBeueSvtrV0S69ROuiTpen3KdR-Sp"
    },
    {
        title: "Guidelines on Government Email System (DICT Memorandum Circular No. 003, 2020)",
        description: "Sets standards for secure and efficient government email systems to ensure proper communication and data protection.",
        scenario: "A government employee uses an unauthorized email service to send sensitive documents.",
        punishment: "No specific punishments outlined, as the circular focuses on email system guidelines.",
        image: "https://imgur.com/GNSXU8Q",
        pdf: "https://drive.google.com/uc?export=download&id=1Z5Zcfj27F-s3PHpLZB4-DEwE4pkHD6ux"
    },
    {
        title: "Value-Added Services Regulation (NTC Memorandum Circular No. 02-05-2008)",
        description: "Regulates enhanced telecommunications services like VoIP, outlining registration and compliance for VAS providers.",
        scenario: "A VoIP provider offers internet-based voice calls without standard telecom registration.",
        punishment: "Revocation or cancellation of VAS provider registration for violations.",
        image: "https://i.imgur.com/C7yIDNo.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1M7yIG7M9lExsPh3woel1MDGYHMjJuMrK"
    },
    {
        title: "Broadcast Messaging Regulation (NTC Memorandum Circular No. 03-03-2005-A)",
        description: "Sets guidelines for broadcast/push messages, requiring subscriber consent for content delivery.",
        scenario: "A bank sends promotional texts without customer opt-in, violating consent rules.",
        punishment: "Fines for <50 violations; blacklisting and permit revocation for >50 violations per quarter.",
        image: "https://i.imgur.com/awwyzZS.png",
        pdf: "https://drive.google.com/uc?export=download&id=1MXaVmKOZ_im7lxWsEgJVtJti1EB7uZiy"
    },
    {
        title: "Guidelines on Prepaid Load Expiry (NTC Memorandum Circular No. 01-04-2019)",
        description: "Mandates a one-year expiration for all prepaid loads, covering telecom and ICT providers.",
        scenario: "A user’s PHP 100 load purchased on April 1, 2025, expires on April 1, 2026, per NTC rules.",
        punishment: "Penalties per the Public Telecommunications Policy Act, DICT Act, and NTC/DICT regulations.",
        image: "https://i.imgur.com/cO7KMFl.png",
        pdf: "https://drive.google.com/uc?export=download&id=1MVxucPguU1bMzt_QHeifx-XCgNHH2pA7"
    },
    {
        title: "Social Media and AI Election Guidelines (COMELEC Resolution No. 11064, 2024)",
        description: "Mandates registration of digital campaign platforms by December 13, 2024, ensuring transparency in AI usage.",
        scenario: "A candidate uses AI-generated content without disclosing it, violating transparency rules.",
        punishment: "Penalties for inauthentic behavior, deep fakes, and unregistered accounts during elections.",
        image: "https://i.imgur.com/rXaMO8Y.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1MQBdl0_obNcOfBdT6x3Q9TTUrFHwsPZQ"
    },
    {
        title: "Online Pharmaceutical Sales Regulation (FDA Administrative Order No. 2013-0027)",
        description: "Regulates pharmaceutical distribution and storage, including online sales, to ensure quality and compliance.",
        scenario: "An online pharmacy sells substandard drugs without proper storage compliance.",
        punishment: "Fines, license suspension, or other sanctions per RA 9711 and related regulations.",
        image: "https://i.imgur.com/YUr5TZH.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1MNfoEsWEFCr9q3fLA_t9mUI-Q2Oii-uD"
    },
    {
        title: "E-Commerce Protection Guidelines (DTI Administrative Order No. 22-01)",
        description: "Ensures fair practices in e-commerce to boost consumer confidence and address deceptive sales.",
        scenario: "A consumer receives a counterfeit product from an online seller who refuses a refund.",
        punishment: "Fines, permit revocation, or legal action for violations, per the Joint Administrative Order.",
        image: "https://i.imgur.com/mFqmCw7.png",
        pdf: "https://drive.google.com/uc?export=download&id=1MIB1Sp0YuKgYcF30YzcioN29dYSpFTj5"
    },
    {
        title: "Guidelines on Cybercrime Prosecution (DOJ Circular No. 027, 2018)",
        description: "Guides prosecution of cybercrimes like illegal access and data interference, ensuring legal consistency.",
        scenario: "A drug sale charge proceeds despite a plea bargain attempt, per DOJ guidelines.",
        punishment: "Imprisonment from prisión correccional (6 months-6 years) to prisión mayor (6-12 years), depending on severity.",
        image: "https://i.imgur.com/il9jPIa.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1MGc1NVkt6mDIAa1GQ-ORZCVRn38dEHOC"
    },
    {
        title: "PNP Anti-Cybercrime Group Operational Guidelines (PNP Circular No. 2019-001)",
        description: "Outlines operational protocols for the PNP Anti-Cybercrime Group to combat cybercrimes.",
        scenario: "A social media page spreads false information, causing public panic, investigated by the ACG.",
        punishment: "Cybercrime penalties like prisión mayor (6-12 years) and fines, per applicable laws.",
        image: "https://i.imgur.com/jSyA9SQ.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=1MFR9mOwQzvyLPk5MTU7TDDPKhC8bHL2T"
    },
    {
        title: "Rules on Cybercrime Warrants (Supreme Court A.M. No. 17-11-03-SC)",
        description: "Outlines procedures for obtaining and executing cybercrime warrants, including data seizure and disclosure.",
        scenario: "Law enforcement uses a warrant to access a fraud suspect’s online activity data.",
        punishment: "Non-compliance handled under the Cybercrime Prevention Act, with penalties like imprisonment or fines.",
        image: "https://i.imgur.com/mt6ExI1.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=13rS4HcKjdxiG4GcVVTILGJVddExX0HxP"
    },
    {
        title: "Rules on Electronic Evidence (Supreme Court A.M. No. 01-7-01-SC)",
        description: "Establishes admissibility of electronic documents and signatures in legal proceedings if properly authenticated.",
        scenario: "An electronically signed contract is admitted as evidence after authentication.",
        punishment: "Exclusion of unauthenticated evidence; false information may lead to perjury or fraud charges.",
        image: "https://imgur.com/nvEJYT3",
        pdf: "https://drive.google.com/uc?export=download&id=1KOKCL2SDdMWG6r3NBQcr3V4k7VuuO5XA"
    },
    {
        title: "Revised Rules of Civil Procedure (Supreme Court A.M. No. 19-08-06-SC)",
        description: "Outlines PCC procedures for administrative searches to investigate competition law violations.",
        scenario: "A property dispute falls under a first-level court’s jurisdiction, following revised procedures.",
        punishment: "Court-ordered actions, fines, or payment of attorney’s fees for rule violations.",
        image: "https://imgur.com/vgjjl0L",
        pdf: "https://drive.google.com/uc?export=download&id=1J4JII14UiVXViPZpFKlSly3CiY21PBVR"
    },
    {
        title: "Rule on Cybercrime Investigation (Supreme Court A.M. No. 17-11-03-SC)",
        description: "Outlines procedures for obtaining and executing cybercrime warrants, including data seizure and disclosure (same as Rules on Cybercrime Warrants).",
        scenario: "Police obtain a warrant to seize a suspect’s computer data in an online scam investigation.",
        punishment: "Non-compliance handled under the Cybercrime Prevention Act, with penalties like imprisonment or fines.",
        image: "https://i.imgur.com/mt6ExI1.jpeg",
        pdf: "https://drive.google.com/uc?export=download&id=13rS4HcKjdxiG4GcVVTILGJVddExX0HxP"
    },
    {
        title: "Guidelines on Consumer Protection in E-Commerce (DTI Department Order No. 18-05)",
        description: "Ensures consumer protection in e-commerce through rules on transparency, purchase, and post-purchase services.",
        scenario: "A consumer buys a product online that differs from its description, violating transparency rules.",
        punishment: "Fines, permit revocation, or legal action for deceptive practices or non-compliance.",
        image: "https://imgur.com/rwFeH4N",
        pdf: "https://drive.google.com/uc?export=download&id=1_UNToj_yIquJhHB21sgMOGZaF8Xk73po"
    },
    {
        title: "Taxation of Electronic Transactions (BIR Revenue Regulation No. 9-2001)",
        description: "Regulates electronic filing of tax returns and payment of taxes for online transactions.",
        scenario: "An online seller ignores eFPS requirements, filing taxes manually despite notices.",
        punishment: "Compromise penalties for first/second offenses; third offenses: up to PHP 1,000 fine and 6 months imprisonment per NIRC Section 275.",
        image: "https://imgur.com/XpH2tuw",
        pdf: "https://drive.google.com/uc?export=download&id=1uuLbTcnDcQQ6fhLGGrG2sWIUFQe9G3wO"
    }
];

        auth.onAuthStateChanged((user) => {
            if (user) {
                const currentUser = {
                    username: user.displayName || 'User',
                    email: user.email,
                    createdAt: user.metadata.creationTime
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));

                usernameDisplay.textContent = `${currentUser.username}`;
                emailDisplay.textContent = `${currentUser.email}`;
                createdAtDisplay.textContent = `${new Date(currentUser.createdAt).toLocaleString()}`;

                const sanitizedEmail = currentUser.email.replace(/\./g, ',');

                const userRef = database.ref(`users/${sanitizedEmail}`);
                userRef.once('value', (snapshot) => {
                    const userData = snapshot.val();
                    if (userData) {
                        if (userData.avatarUrl) {
                            profilePic.src = userData.avatarUrl;
                        } else {
                            profilePic.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/4L1mGQAAAAASUVORK5CYII=';
                        }
                        if (userData.avatarBgColor) {
                            profilePic.style.backgroundColor = userData.avatarBgColor;
                            avatarBgColorPicker.value = userData.avatarBgColor;
                        }
                        if (userData.borderColor) {
                            profilePic.style.borderColor = userData.borderColor;
                            borderColorPicker.value = userData.borderColor;
                        }
                        if (userData.borderType) {
                            profilePic.style.borderStyle = userData.borderType;
                            borderTypeSelect.value = userData.borderType;
                        }
                    }
                }, (error) => {
                    console.error('Error loading user customization:', error);
                    alert('Failed to load user customization: ' + error.message);
                });
            } else {
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            }
        });

        profilePic.addEventListener('click', () => {
            customizationMenu.classList.toggle('active');
        });

        document.addEventListener('click', (e) => {
            if (!customizationMenu.contains(e.target) && e.target !== profilePic) {
                customizationMenu.classList.remove('active');
            }
        });

        avatarInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (!file) return;

            const validTypes = ['image/jpeg', 'image/png', 'image/jpg'];
            const maxSize = 2 * 1024 * 1024;
            if (!validTypes.includes(file.type)) {
                alert('Please upload a valid image (JPG, JPEG, PNG).');
                return;
            }
            if (file.size > maxSize) {
                alert('Image size must be less than 2MB.');
                return;
            }

            const user = auth.currentUser;
            if (!user) {
                alert('You must be logged in to upload an avatar.');
                avatarLoading.classList.remove('active');
                return;
            }

            avatarLoading.classList.add('active');

            const img = new Image();
            const reader = new FileReader();
            reader.onload = (e) => {
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);

            img.onload = () => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const maxDimension = 300;
                let width = img.width;
                let height = img.height;

                if (width > height) {
                    if (width > maxDimension) {
                        height = Math.round((height * maxDimension) / width);
                        width = maxDimension;
                    }
                } else {
                    if (height > maxDimension) {
                        width = Math.round((width * maxDimension) / height);
                        height = maxDimension;
                    }
                }

                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);

                canvas.toBlob((blob) => {
                    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                    if (!currentUser || !currentUser.email) {
                        alert('User not logged in.');
                        avatarLoading.classList.remove('active');
                        return;
                    }

                    const formData = new FormData();
                    formData.append('file', blob);
                    formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
                    formData.append('folder', `avatars/${currentUser.email}`);

                    fetch(`https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`, {
                        method: 'POST',
                        body: formData
                    })
                    .then(response => {
                        if (!response.ok) {
                            return response.text().then(text => {
                                let errorMessage = `Cloudinary upload failed with status ${response.status}`;
                                try {
                                    const parsed = JSON.parse(text);
                                    errorMessage = parsed.error?.message || text;
                                } catch (e) {
                                    errorMessage = text.includes('Invalid cloud name')
                                        ? 'Invalid Cloudinary cloud name. Please check the CLOUDINARY_CLOUD_NAME.'
                                        : text.includes('Invalid upload preset')
                                        ? 'Invalid upload preset. Please check the preset name in Cloudinary.'
                                        : text.includes('Unsigned uploads are not allowed')
                                        ? 'Unsigned uploads are not allowed. Please set the upload preset to Unsigned in Cloudinary.'
                                        : text || 'Unknown error occurred';
                                }
                                throw new Error(errorMessage);
                            });
                        }
                        return response.json();
                    })
                    .then(data => {
                        if (data.error) {
                            throw new Error(data.error.message || 'Failed to upload image to Cloudinary');
                        }

                        const avatarUrl = data.secure_url;
                        const sanitizedEmail = currentUser.email.replace(/\./g, ',');

                        database.ref(`users/${sanitizedEmail}`).update({
                            avatarUrl: avatarUrl,
                            updatedAt: firebase.database.ServerValue.TIMESTAMP
                        })
                        .then(() => {
                            profilePic.src = avatarUrl;
                            avatarLoading.classList.remove('active');
                        })
                        .catch(error => {
                            console.error('Error saving avatar URL to Firebase:', error);
                            alert('Failed to save avatar URL to Firebase: ' + error.message);
                            avatarLoading.classList.remove('active');
                        });
                    })
                    .catch(error => {
                        console.error('Error uploading avatar to Cloudinary:', error);
                        alert(`Failed to upload avatar to Cloudinary: ${error.message}`);
                        avatarLoading.classList.remove('active');
                    });
                }, file.type, 0.6);
            };
            img.onerror = () => {
                alert('Failed to process the image. Please try a different file.');
                avatarLoading.classList.remove('active');
            };
        });

        avatarBgColorPicker.addEventListener('change', () => {
    const color = avatarBgColorPicker.value;
    profilePic.style.backgroundColor = color;

    const user = auth.currentUser;
    if (user) {
        const sanitizedEmail = user.email.replace(/\./g, ',');
        database.ref(`users/${sanitizedEmail}`).update({
            avatarBgColor: color,
            updatedAt: firebase.database.ServerValue.TIMESTAMP
        })
        .catch(error => {
            console.error('Error saving avatar background color:', error);
            alert('Failed to save avatar background color: ' + error.message);
        });
    } else {
        alert('You must be logged in to change the avatar background color.');
    }
});

borderColorPicker.addEventListener('change', () => {
    const color = borderColorPicker.value;
    profilePic.style.borderColor = color;

    const user = auth.currentUser;
    if (user) {
        const sanitizedEmail = user.email.replace(/\./g, ',');
        database.ref(`users/${sanitizedEmail}`).update({
            borderColor: color,
            updatedAt: firebase.database.ServerValue.TIMESTAMP
        })
        .catch(error => {
            console.error('Error saving border color:', error);
            alert('Failed to save border color: ' + error.message);
        });
    } else {
        alert('You must be logged in to change the border color.');
    }
});

borderTypeSelect.addEventListener('change', () => {
    const borderType = borderTypeSelect.value;
    profilePic.style.borderStyle = borderType;

    const user = auth.currentUser;
    if (user) {
        const sanitizedEmail = user.email.replace(/\./g, ',');
        database.ref(`users/${sanitizedEmail}`).update({
            borderType: borderType,
            updatedAt: firebase.database.ServerValue.TIMESTAMP
        })
        .catch(error => {
            console.error('Error saving border type:', error);
            alert('Failed to save border type: ' + error.message);
        });
    } else {
        alert('You must be logged in to change the border type.');
    }
});

if (localStorage.getItem('darkTheme') === 'enabled') {
    body.classList.add('dark-theme');
    themeToggle.checked = true;
}

themeToggle.addEventListener('change', function() {
    if (this.checked) {
        body.classList.add('dark-theme');
        localStorage.setItem('darkTheme', 'enabled');
    } else {
        body.classList.remove('dark-theme');
        localStorage.setItem('darkTheme', 'disabled');
    }
});

mobileMenuIcon.addEventListener('click', function() {
    sidebar.classList.toggle('active');
    const icon = mobileMenuIcon.querySelector('i');
    if (sidebar.classList.contains('active')) {
        icon.classList.remove('fa-bars');
        icon.classList.add('fa-times');
    } else {
        icon.classList.remove('fa-times');
        icon.classList.add('fa-bars');
    }
});

document.querySelectorAll('a[href]').forEach(link => {
    if (link.href && !link.href.startsWith('javascript:') && !link.href.startsWith('#')) {
        link.addEventListener('click', function(e) {
            if (!this.href.includes(window.location.hostname)) return;

            e.preventDefault();
            loaderOverlay.classList.add('active');

            setTimeout(() => {
                window.location.href = this.href;
            }, 150);
        });
    }
});

function saveLaw(lawTitle) {
    const user = auth.currentUser;
    if (!user) {
        alert('You must be logged in to save a law.');
        return;
    }

    const sanitizedEmail = user.email.replace(/\./g, ',');
    const lawRef = database.ref(`users/${sanitizedEmail}/savedLaws`).push();
    lawRef.set({
        title: lawTitle,
        timestamp: firebase.database.ServerValue.TIMESTAMP
    })
    .then(() => {
        successModal.classList.add('active');
    })
    .catch(error => {
        console.error('Error saving law:', error);
        alert('Failed to save law: ' + error.message);
    });
}

okSuccess.addEventListener('click', () => {
    successModal.classList.remove('active');
});

async function fetchLawsFromAI(query) {
    try {
        const fuse = new Fuse(laws, {
            keys: ['title', 'description', 'scenario'],
            threshold: 0.3,
            distance: 200,
            minMatchCharLength: 2
        });

        const results = fuse.search(query);
        
        if (!results.length) {
            return { mainLaw: null, alternativeLaws: [] };
        }

        const mainLaw = results[0].item.title;
        const alternativeLaws = results.slice(1, 4).map(res => res.item.title);

        return { mainLaw, alternativeLaws };
    } catch (error) {
        console.error('Error in fetchLawsFromAI:', error);
        return { mainLaw: null, alternativeLaws: [] };
    }
}

function renderLawCards(mainLawTitle, alternativeLawTitles) {
    cardsContainer.innerHTML = '';

    const query = searchInput.value.trim();
    
    if (mainLawTitle) {
        const mainLaw = laws.find(law => law.title === mainLawTitle);
        if (mainLaw) {
            const mainCard = document.createElement('div');
            mainCard.className = 'card main-law highlight';
            mainCard.innerHTML = `
                <div class="image_container">
                    <img src="${mainLaw.image}" alt="Law Image" onerror="this.src='https://via.placeholder.com/200?text=Image+Not+Found';">
                </div>
                <div class="cybercrime-title">
                    <span>${mainLaw.title}</span>
                </div>
                <div class="cybercrime-description">
                    <p><strong>Description:</strong> <span class="description-text">${mainLaw.description}</span></p>
                    <p><strong>Scenario:</strong> <span class="scenario-text">${mainLaw.scenario}</span></p>
                    <p><strong>Punishment:</strong> <span class="punishment-text">${mainLaw.punishment}</span></p>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    ${mainLaw.pdf ? `
                    <a href="${mainLaw.pdf}" class="border-button" target="_blank">
                        <span class="button-text">Read PDF</span>
                        <span class="iconer"><svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" fill="currentColor"></path></svg></span>
                    </a>` : ''}
                    <button class="save-button" data-title="${mainLaw.title}">
                        <span class="button-text">Save Law</span>
                        <span class="iconer"><svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 3H7a2 2 0 0 0-2 2v16l7-4 7 4V5a2 2 0 0 0-2-2z" fill="currentColor"></path></svg></span>
                    </button>
                </div>
            `;
            cardsContainer.appendChild(mainCard);

            if (query) {
                ['description-text', 'scenario-text', 'punishment-text'].forEach(className => {
                    const element = mainCard.querySelector(`.${className}`);
                    highlightText(element, query);
                });
            }
        }
    } else {
        cardsContainer.innerHTML = '<p>No relevant laws found for your search.</p>';
        return;
    }

    if (alternativeLawTitles.length > 0) {
        const alternativesSection = document.createElement('div');
        alternativesSection.innerHTML = '<h2>Alternative Laws Suggested</h2>';
        alternativesSection.style.width = '100%';
        alternativesSection.style.textAlign = 'center';
        alternativesSection.style.marginTop = '40px';
        cardsContainer.appendChild(alternativesSection);

        const alternativesContainer = document.createElement('div');
        alternativesContainer.className = 'cards-container';
        alternativeLawTitles.forEach(title => {
            const law = laws.find(l => l.title === title);
            if (law) {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="image_container">
                        <img src="${law.image}" alt="Law Image" onerror="this.src='https://via.placeholder.com/200?text=Image+Not+Found';">
                    </div>
                    <div class="cybercrime-title">
                        <span>${law.title}</span>
                    </div>
                    <div class="cybercrime-description">
                        <p><strong>Description:</strong> <span class="description-text">${law.description}</span></p>
                        <p><strong>Scenario:</strong> <span class="scenario-text">${law.scenario}</span></p>
                        <p><strong>Punishment:</strong> <span class="punishment-text">${law.punishment}</span></p>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        ${law.pdf ? `
                        <a href="${law.pdf}" class="border-button" target="_blank">
                            <span class="button-text">Read PDF</span>
                            <span class="iconer"><svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" fill="currentColor"></path></svg></span>
                        </a>` : ''}
                        <button class="save-button" data-title="${law.title}">
                            <span class="button-text">Save Law</span>
                            <span class="iconer"><svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 3H7a2 2 0 0 0-2 2v16l7-4 7 4V5a2 2 0 0 0-2-2z" fill="currentColor"></path></svg></span>
                        </button>
                    </div>
                `;
                alternativesContainer.appendChild(card);

                if (query) {
                    ['description-text', 'scenario-text', 'punishment-text'].forEach(className => {
                        const element = card.querySelector(`.${className}`);
                        highlightText(element, query);
                    });
                }
            }
        });
        cardsContainer.appendChild(alternativesContainer);
    }

    document.querySelectorAll('.save-button').forEach(button => {
        button.removeEventListener('click', saveLawHandler);
        button.addEventListener('click', saveLawHandler);
    });
}

function saveLawHandler() {
    const lawTitle = this.getAttribute('data-title');
    saveLaw(lawTitle);
}

const defaultCards = [
    {
        title: "UN: Asian Scam Calls Now a Global Export",
        image: "https://regmedia.co.uk/2023/09/20/shutterstock_call_center.jpg",
        description: "A new report from the United Nations Office on Drugs and Crime (UNODC) warns that scam calls originating in Asia have become a global problem, fueled by organized crime networks that have turned fraud into a multi-billion-dollar industry."
    },
    {
        title: "UN: Global Expansion of Southeast Asian Cyber-Fraud Operations Underway",
        image: "https://c-assets.papillon.io/image/fetch/s--YnOMApIW--/f_auto/https://dkf1ato8y5dsg.cloudfront.net/uploads/8/79/1000x1000-global-threat-report.jpg",
        description: "The United Nations Office on Drugs and Crime (UNODC) released a report detailing the alarming global expansion of Southeast Asian cyber-fraud operations, which have evolved into a transnational organized crime threat affecting every continent."
    },
    {
        title: "Southeast Asia Cyber Fraud at ‘Inflection Point’ as Scam Networks Go Global",
        image: "https://cms.therecord.media/uploads/format_webp/large_myanmar_scam_arrest_07972d5702.jpg",
        description: "A new United Nations report warns that cyber fraud originating in Southeast Asia has reached an 'inflection point,' with criminal networks expanding globally and generating billions in illicit profits, often through the exploitation of trafficked workers."
    }
];

defaultCards.forEach(cardData => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
        <div class="image_container">
            <img src="${cardData.image}" alt="Cybercrime Image">
        </div>
        <div class="cybercrime-title">
            <span>${cardData.title}</span>
        </div>
        <div class="cybercrime-description">
            <p>Cybercrime</p>
            <p>${cardData.description}</p>
        </div>
        <a href="News.html" class="border-button">
            <span class="button-text">Read More</span>
            <span class="iconer"><svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" fill="currentColor"></path></svg></span>
        </a>
    `;
    cardsContainer.appendChild(card);
});

async function performSearch(query) {
    try {
        if (query) {
            fingerprintIcon.classList.add('scanning');
            sectionTitle.textContent = 'RELEVANT LAW';
            loaderOverlay.classList.add('active');

            const user = auth.currentUser;
            if (user) {
                const sanitizedEmail = user.email.replace(/\./g, ',');
                database.ref(`users/${sanitizedEmail}/searchHistory`).push({
                    query: query,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
            }

            const { mainLaw, alternativeLaws } = await fetchLawsFromAI(query);
            if (mainLaw && alternativeLaws) {
                renderLawCards(mainLaw, alternativeLaws);
            } else {
                cardsContainer.innerHTML = '<p>No relevant laws found.</p>';
            }
        } else {
            sectionTitle.textContent = 'TOP ARTICLES';
            cardsContainer.innerHTML = '';
            defaultCards.forEach(cardData => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="image_container">
                        <img src="${cardData.image}" alt="Cybercrime Image">
                    </div>
                    <div class="cybercrime-title">
                        <span>${cardData.title}</span>
                    </div>
                    <div class="cybercrime-description">
                        <p>Cybercrime</p>
                        <p>${cardData.description}</p>
                    </div>
                    <a href="News.html" class="border-button">
                        <span class="button-text">Read More</span>
                        <span class="iconer">
                            <svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" fill="currentColor"></path>
                            </svg>
                        </span>
                    </a>
                `;
                cardsContainer.appendChild(card);
            });
        }
    } catch (error) {
        console.error('Error in search:', error);
        cardsContainer.innerHTML = '<p>Error fetching laws. Please try again.</p>';
    } finally {
        loaderOverlay.classList.remove('active');
        if (query) {
            setTimeout(() => {
                fingerprintIcon.classList.remove('scanning');
            }, 1000);
        }
    }
}

window.addEventListener('load', () => {
    performSearch('');
});

searchInput.addEventListener('keypress', async (e) => {
    if (e.key === 'Enter') {
        const query = searchInput.value.trim();
        await performSearch(query);
    }
});

document.querySelector('.search-icon').addEventListener('click', async () => {
    const query = searchInput.value.trim();
    await performSearch(query);
});

document.querySelector('.search-icon').addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault(); 
        const query = searchInput.value.trim();
        performSearch(query);
    }
});

function highlightText(element, query) {
    if (!query) return;
    const regex = new RegExp(`(${query})`, 'gi');
    const text = element.innerHTML;
    element.innerHTML = text.replace(regex, '<span class="highlight">$1</span>');
}

window.addEventListener('resize', () => {
    if (window.innerWidth > 480 && sidebar.classList.contains('active')) {
        sidebar.classList.remove('active');
        const icon = mobileMenuIcon.querySelector('i');
        icon.classList.remove('fa-times');
        icon.classList.add('fa-bars');
    }
});
</script>
</body>
</html>