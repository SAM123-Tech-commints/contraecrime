<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contra E-Crime</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/Dccn8pc.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
            background-color: #f7f7f7;
            transition: background-color 0.3s ease;
        }

        .loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .loader-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #FFF;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .dark-theme .loader {
            border-color: #d7b15c;
            border-bottom-color: transparent;
        }

        .container {
            display: flex;
            min-height: 100vh;
            flex-direction: column;
        }

        .sidebar {
            width: 290px;
            background-image: url('https://i.imgur.com/bNRxAhZ.png');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 20px;
            height: 100vh;
            position: fixed;
            transition: transform 0.3s ease;
        }

        .sidebar h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
        }

        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }

        .sidebar ul li {
            margin: 50px 0;
        }

        .sidebar ul li a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar ul li a:not(.dark-theme-label a) {
            transition: all 0.3s ease;
            position: relative;
        }

        .sidebar ul li a:not(.dark-theme-label a):hover {
            color: #d7b15c;
            transform: translateX(5px);
        }

        .sidebar ul li a:not(.dark-theme-label a)::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -10px;
            left: 0;
            background-color: #d7b15c;
            transition: width 0.3s ease;
        }

        .sidebar ul li a:not(.dark-theme-label a):hover::after {
            width: 95%;
        }

        .dark-theme .sidebar ul li a:not(.dark-theme-label a):hover {
            color: #d7b15c;
        }

        .sidebar ul li a img {
            width: 30px;
            height: 30px;
        }

        .dark-theme-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 20px;
        }

        .dark-theme-label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        .dark-theme-label img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
        }

        .switch-label {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #28292c;
            border-radius: 25px;
            cursor: pointer;
            border: 3px solid #28292c;
        }

        .checkbox {
            position: absolute;
            display: none;
        }

        .slider {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 25px;
            transition: 0.3s;
        }

        .checkbox:checked ~ .slider {
            background-color: #d8dbe0;
        }

        .slider::before {
            content: "";
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            box-shadow: inset 8px - 3px 0px 0px #d8dbe0;
            background-color: #28292c;
            transition: 0.3s;
        }

        .checkbox:checked ~ .slider::before {
            transform: translateX(30px);
            background-color: #28292c;
            box-shadow: none;
        }

        .content {
            flex: 1;
            padding: 20px;
            margin-left: 290px;
            overflow-y: auto;
            transition: background-color 0.3s ease, margin-left 0.3s ease;
        }

        .header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
        }

        .user-info {
            position: absolute;
            top: 0;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 18px;
            color: #333;
            background-color: #fff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
        }

        .user-info:hover {
            background-color: #f0f0f0;
        }

        .user-info .profile-pic {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            color: #fff;
            object-fit: cover;
        }

        .user-info .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-info .user-details .username {
            font-weight: 600;
        }

        .user-info .user-details .email {
            font-size: 14px;
            color: #666;
        }

        .dark-theme .user-info {
            color: #e0e0e0;
            background-color: #3a3b3c;
        }

        .dark-theme .user-info:hover {
            background-color: #4a4b4c;
        }

        .dark-theme .user-info .user-details .email {
            color: #b0b0b0;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            width: 400px;
            max-width: 90%;
            position: relative;
        }

        .dark-theme .modal-content {
            background-color: #3a3b3c;
            color: #e0e0e0;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #333;
        }

        .dark-theme .close-modal {
            color: #e0e0e0;
        }

        .modal-content h2 {
            margin-top: 0;
        }

        .modal-content select, .modal-content input[type="file"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .dark-theme .modal-content select, .dark-theme .modal-content input[type="file"] {
            background-color: #4a4b4c;
            color: #e0e0e0;
            border-color: #666;
        }

        .modal-content button {
            padding: 10px 20px;
            background-color: #d7b15c;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }

        .modal-content button:hover {
            background-color: #b7b90d;
        }

        .saved-configs {
            margin-top: 20px;
        }

        .saved-configs div {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px;
            border-bottom: 1px solid #eee;
        }

        .dark-theme .saved-configs div {
            border-bottom-color: #666;
        }

        .fingerprint-icon {
            width: 150px;
            height: 150px;
            background: url('https://static.thenounproject.com/png/1238269-200.png') no-repeat center center;
            background-size: contain;
            margin-bottom: 20px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .fingerprint-icon::before {
            content: "";
            position: absolute;
            margin-right: 4px;
            margin-top: 4px;
            width: 138px;
            height: 140px;
            border: 3px solid;
            border-radius: 50%;
            z-index: 0;
            color: #000000;
        }

        /* Search Bar */
        .search-container {
            width: 40%;
            position: relative;
            margin-bottom: 20px;
        }

        .search-icon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
        }

        .search-input {
            width: 100%;
            height: 40px;
            padding: 10px;
            transition: .2s linear;
            border: 2.5px solid black;
            font-size: 14px;
            letter-spacing: 1px;
            border-radius: 5px;
        }

        .search-input:focus {
            outline: none;
            border: 0.5px solid black;
            box-shadow: -2px -1px 0px black;
        }

        .search-container:hover > .search-icon {
            animation: anim 1s linear infinite;
        }



        @keyframes anim {
            0%,
            100% {
                transform: translateY(-50%) scale(1);
            }

            50% {
                transform: translateY(-50%) scale(1.1);
            }
        }

        .dark-theme .search-input {
            background-color: #3a3b3c;
            color: #ffffff;
            border-color: #d8dbe0;
        }

        .dark-theme .search-input:focus {
            border-color: #d8dbe0;
            box-shadow: -5px -5px 0px #d8dbe0;
        }

        .dark-theme .search-icon svg path {
            stroke: #ffffff;
        }

        .articles {
            margin-top: 20px;
            color: #000000;
            text-align: center;
        }

        .articles h2 {
            margin-bottom: 30px;
            font-size: 24px;
        }

        .cards-container {
            display: flex;
            gap: 35px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .card {
            --bg-card: #27272a;
            --primary: #d9cd28;
            --primary-800: #d7b15c;
            --primary-shadow: #b7b90d;
            --light: #d9d9d9;
            --zinc-800: #18181b;
            --bg-linear: linear-gradient(0deg, var(--primary) 50%, var(--light) 125%);

            position: relative;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            padding: 1rem;
            width: 350px;
            background-color: var(--bg-card);
            border-radius: 1rem;
            justify-content: space-between;
        }

        .card.hidden {
            display: none;
        }

        .card.highlight {
            box-shadow: 0 0 10px 5px rgba(230, 207, 5, 0.5);
        }

        .image_container {
            overflow: hidden;
            cursor: pointer;
            position: relative;
            z-index: 5;
            width: 100%;
            height: 200px;
            background-color: var(--primary-800);
            border-radius: 0.5rem;
        }

        .image_container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cybercrime-title {
            overflow: clip;
            width: 100%;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--light);
            text-transform: capitalize;
            text-wrap: nowrap;
            text-overflow: ellipsis;
        }

        .cybercrime-description {
            font-size: 0.9rem;
            color: var(--light);
            line-height: 1.4;
            text-align: justify;
        }

        /* Read More */
        .border-button {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 6px 5px;
            border-radius: 10px;
            border: 1px solid rgb(255, 255, 255);
            overflow: hidden;
            background: transparent;
            color: rgb(255, 255, 255);
            cursor: pointer;
            align-self: flex-end;
            margin-top: 1rem;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .border-button .button-text {
            transform: translateX(17px);
            font-size: 0.9em;
            font-weight: 500;
            transition-duration: 0.3s;
            margin: 0;
        }

        .border-button .iconer {
            transform: translateY(35px);
            transition-duration: 0.3s;
            margin: 0;
            display: flex;
            align-items: center;
        }

        .border-button:hover .button-text {
            transform: translateX(5px);
        }

        .border-button:hover .iconer {
            transform: translateY(0px);
        }

        footer {
            background-color: #333;
            color: white;
            padding: 15px 30px;
            text-align: center;
            margin-left: 290px;
            z-index: 1;
            transition: margin-left 0.3s ease;
        }

        footer p {
            margin: 0;
            font-size: 14px;
        }

        .footer-links {
            margin-top: 5px;
        }

        .footer-links a {
            color: #d7b15c;
            text-decoration: none;
            margin: 0 10px;
            font-size: 14px;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        .dark-theme footer {
            background-color: #1a1a1a;
        }

        /* Dark Theme */
        body.dark-theme {
            background-color: #121212;
            color: #e0e0e0;
        }

        .dark-theme .content {
            background-color: #28292c;
        }

        .dark-theme .content::before {
            background-color: rgba(40, 41, 44, 0.9);
        }

        .dark-theme .articles {
            color: #ffffff;
        }

        .dark-theme .articles h2 {
            color: #ffffff;
        }

        .dark-theme .card {
            background-color: #3a3b3c;
            color: #ffffff;
        }

        .dark-theme .cybercrime-title,
        .dark-theme .cybercrime-description {
            color: #ffffff;
        }

        /* Mobile Navigation Styles */
        .mobile-nav {
            display: none;
            background-image: url('https://i.imgur.com/bNRxAhZ.png');
            padding: 15px;
            position: fixed;
            width: 100%;
            z-index: 1000;
        }

        .mobile-nav .logo {
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-decoration: none;
        }

        .mobile-nav .menu-icon {
            color: white;
            font-size: 24px;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 15px;
        }

        @media (max-width: 1024px) {
            .sidebar {
                width: 250px;
            }

            .sidebar h1 {
                font-size: 22px;
            }

            .sidebar ul li a {
                font-size: 16px;
            }

            .dark-theme-label {
                font-size: 16px;
            }

            .content {
                margin-left: 250px;
            }

            footer {
                margin-left: 250px;
            }

            .card {
                width: 300px;
            }

            .user-info {
                right: 10px;
                font-size: 16px;
                padding: 10px;
            }

            .user-info .profile-pic {
                width: 50px;
                height: 50px;
            }

            .user-info .user-details .email {
                font-size: 12px;
            }

            .search-container {
                width: 50%;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
                padding: 10px;
            }

            .sidebar h1 {
                font-size: 20px;
            }

            .sidebar ul li a {
                font-size: 14px;
            }

            .dark-theme-label {
                font-size: 14px;
            }

            .content {
                margin-left: 200px;
                padding: 10px;
            }

            footer {
                margin-left: 200px;
            }

            .card {
                width: 100%;
                max-width: 350px;
            }

            .user-info {
                font-size: 14px;
                padding: 8px;
            }

            .user-info .profile-pic {
                width: 45px;
                height: 45px;
            }

            .fingerprint-icon {
                width: 120px;
                height: 120px;
            }

            .search-container {
                width: 70%;
            }
        }

        @media (max-width: 480px) {
            .container {
                flex-direction: column;
            }

            .mobile-nav {
                display: block;
            }

            .sidebar {
                width: 100%;
                height: auto;
                position: fixed;
                padding: 10px;
                transform: translateX(-100%);
                z-index: 999;
                top: 60px;
                height: calc(100vh - 60px);
                overflow-y: auto;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .sidebar h1 {
                display: none;
            }

            .sidebar ul li {
                margin: 20px 0;
            }

            .sidebar ul li a {
                font-size: 16px;
            }

            .dark-theme-label {
                font-size: 16px;
            }

            .content {
                margin-left: 0;
                padding: 80px 10px 10px;
            }

            footer {
                margin-left: 0;
                padding: 10px 20px;
                text-align: center;
            }

            footer p {
                font-size: 12px;
            }

            .footer-links a {
                font-size: 12px;
                margin: 0 8px;
            }

            .user-info {
                position: static;
                margin: 10px auto;
                justify-content: center;
                width: 90%;
                font-size: 14px;
            }

            .user-info .profile-pic {
                width: 50px;
                height: 50px;
            }

            .fingerprint-icon {
                width: 90px;
                height: 90px;
            }

            .fingerprint-icon::before {
                width: 96px;
                height: 93px;
            }

            .search-container {
                width: 90%;
            }

            .card {
                width: 100%;
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="loader-overlay" id="loaderOverlay">
        <div class="loader"></div>
    </div>
    <!-- Mobile Navigation Bar -->
    <div class="mobile-nav">
        <a href="#" class="logo">Contra E-Crime</a>
        <div class="menu-icon" id="mobileMenuIcon">
            <i class="fas fa-bars"></i>
        </div>
    </div>

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <h1>Contra E-Crime</h1>
            <ul>
                <li>
                    <a href="HomePage.html">
                        <img src="https://i.imgur.com/OAHusQp.png" alt="Home">
                        Home
                    </a>
                </li>
                <li>
                    <a href="News.html">
                        <img src="https://i.imgur.com/FNALwXX.png" alt="News & Insights">
                        News & Insights
                    </a>
                </li>
                <li>
                    <a href="SavedLaws.html">
                        <img src="https://i.imgur.com/VChoqhD.png" alt="Saved Laws">
                        Saved Laws
                    </a>
                </li>
                <li>
                    <a href="History.html">
                        <img src="https://i.imgur.com/cnaDfEq.png" alt="Search History">
                        Search History
                    </a>
                </li>
                <li>
                    <a href="ContactUs.html">
                        <img src="https://i.imgur.com/T7bI4RJ.png" alt="Contact Us">
                        Contact Us
                    </a>
                </li>
                <li>
                    <a href="AboutUs.html">
                        <img src="https://i.imgur.com/lktrzpa.png" alt="About Us">
                        About Us
                    </a>
                </li>
                <li>
                    <a href="index.html">
                        <img src="https://i.imgur.com/2jjsgOq.png" alt="Logout">
                        Logout
                    </a>
                </li>
            </ul>

            <!-- Dark Theme Container -->
            <div class="dark-theme-container">
                <div class="dark-theme-label">
                    <img src="https://i.imgur.com/vEKpOsq.png" alt="Dark Theme">
                    <span>Dark Theme</span>
                </div>
                <div class="toggle-switch">
                    <label class="switch-label">
                        <input type="checkbox" class="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </nav>
        <main class="content">
            <div class="header">
                <div class="user-info" id="userInfo">
                    <img class="profile-pic" id="profilePic" src="" alt="Profile">
                    <div class="user-details">
                        <span class="username" id="username">User</span>
                        <span class="email" id="email">email@example.com</span>
                    </div>
                </div>
                <div class="fingerprint-icon"></div>
                <div class="search-container">
                    <input type="text" class="search-input" id="searchInput" placeholder="Ask anything...">
                    <span class="search-icon"> 
                        <svg width="19px" height="19px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path opacity="1" d="M14 5H20" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path opacity="1" d="M14 8H17" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M21 11.5C21 16.75 16.75 21 11.5 21C6.25 21 2 16.75 2 11.5C2 6.25 6.25 2 11.5 2" stroke="#000" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path> <path opacity="1" d="M22 22L20 20" stroke="#000" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                    </span>
                </div>
                <p>Find the right law for you!</p>
            </div>
            <section class="articles">
                <h2>TOP ARTICLES</h2>
                <div class="cards-container" id="cardsContainer">
                    <!-- Card 1 -->
                    <div class="card" data-title="Hacking">
                        <div class="image_container">
                            <img src="https://static.toiimg.com/thumb/msid-117988403,width-1280,height-720,resizemode-4/117988403.jpg" alt="Cybercrime Image">
                        </div>
                        <div class="cybercrime-title">
                            <span>Hacking</span>
                        </div>
                        <div class="cybercrime-description">
                            <p>Cybercrime</p>
                            <p>Introduced in 1995</p>
                            <p>The crime of unauthorized access to private computers or networks and misuse of it either by shutting it down or tampering with the data stored or other illegal approaches.</p>
                        </div>
                        <a href="News.html" class="border-button">
                            <span class="button-text">Read More</span>
                            <span class="iconer"><svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" fill="currentColor"></path></svg></span>  
                        </a>
                    </div>
            
                    <!-- Card 2 -->
                    <div class="card" data-title="Phishing and Scam">
                        <div class="image_container">
                            <img src="https://safeonline.security.vt.edu/content/safeonline_security_vt_edu/en/phishing/_jcr_content/article-image.transform/m-medium/image.jpeg" alt="Cybercrime Image">
                        </div>
                        <div class="cybercrime-title">
                            <span>Phishing and Scam</span>
                        </div>
                        <div class="cybercrime-description">
                            <p>Cybercrime</p>
                            <p>Introduced in 1990</p>
                            <p>A type of social engineering attack that targets the user and tricks them by sending fake messages and emails to get sensitive information about the user or trying to download malicious software and exploit it on the target system.</p>
                        </div>
                        <a href="News.html" class="border-button">
                            <span class="button-text">Read More</span>
                            <span class="iconer"><svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" fill="currentColor"></path></svg></span>  
                        </a>
                    </div>
            
                    <!-- Card 3 -->
                    <div class="card" data-title="Internet Fraud">
                        <div class="image_container">
                            <img src="https://gdprinformer.com/wp-content/uploads/2017/09/fraud-laptop.jpg" alt="Cybercrime Image">
                        </div>
                        <div class="cybercrime-title">
                            <span>Internet Fraud</span>
                        </div>
                        <div class="cybercrime-description">
                            <p>Cybercrime</p>
                            <p>Introduced in 1994</p>
                            <p>Makes use of the internet and it can be considered a general term that groups all of the crimes that happen over the internet like spam, banking frauds, theft of service, etc.</p>
                        </div>
                        <a href="News.html" class="border-button">
                            <span class="button-text">Read More</span>
                            <span class="iconer"><svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" fill="currentColor"></path></svg></span>  
                        </a>
                    </div>
            
                    <!-- Card 4 -->
                    <div class="card" data-title="Ransomware Attack">
                        <div class="image_container">
                            <img src="https://riskonnect.com/wp-content/uploads/2024/09/Blog-Image-How-to-Lessen-the-Pain-of-Ransomware-Attacks-3.webp" alt="Cybercrime Image">
                        </div>
                        <div class="cybercrime-title">
                            <span>Ransomware Attack</span>
                        </div>
                        <div class="cybercrime-description">
                            <p>Cybercrime</p>
                            <p>Introduced in 1989</p>
                            <p>A type of malware that has the capability to prevent users from accessing all of their personal data on the system by encrypting them and then asking for a ransom in order to give access to the encrypted data.</p>
                        </div>
                        <a href="News.html" class="border-button">
                            <span class="button-text">Read More</span>
                            <span class="iconer"><svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" fill="currentColor"></path></svg></span>  
                        </a>
                    </div>
                </div>
            </section>
        </main>
        <!-- Customization Modal -->
        <div class="modal" id="customizeModal">
            <div class="modal-content">
                <span class="close-modal" id="closeModal">&times;</span>
                <h2>Customize Profile</h2>
                <label for="avatarSelect">Avatar:</label>
                <select id="avatarSelect">
                    <option value="">None</option>
                    <!-- Populated dynamically -->
                </select>
                <input type="file" id="avatarUpload" accept="image/*">
                <label for="bgColorSelect">Background Color:</label>
                <select id="bgColorSelect">
                    <option value="">None</option>
                    <option value="#f0f0f0">Light Gray</option>
                    <option value="#d7b15c">Gold</option>
                    <option value="#3a3b3c">Dark Gray</option>
                    <option value="#e6f3ff">Light Blue</option>
                    <option value="#ffe6e6">Light Red</option>
                </select>
                <button id="saveConfig">Save Configuration</button>
                <button id="applyConfig">Apply</button>
                <div class="saved-configs" id="savedConfigs">
                    <!-- Populated dynamically -->
                </div>
            </div>
        </div>
        <footer>
            <p>© 2025 Contra E-Crime. All rights reserved.</p>
            <div class="footer-links">
                <a href="PrivacyPolicy.html">Privacy Policy</a>
                <a href="TermsOfUse.html">Terms of Use</a>
                <a href="ContactUs.html">Contact Us</a>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            // Replace with your Firebase project configuration
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();

        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const mobileMenuIcon = document.getElementById('mobileMenuIcon');
        const sidebar = document.getElementById('sidebar');
        const loaderOverlay = document.getElementById('loaderOverlay');
        const userInfo = document.getElementById('userInfo');
        const customizeModal = document.getElementById('customizeModal');
        const closeModal = document.getElementById('closeModal');
        const avatarSelect = document.getElementById('avatarSelect');
        const avatarUpload = document.getElementById('avatarUpload');
        const bgColorSelect = document.getElementById('bgColorSelect');
        const saveConfig = document.getElementById('saveConfig');
        const applyConfig = document.getElementById('applyConfig');
        const savedConfigs = document.getElementById('savedConfigs');
        const profilePic = document.getElementById('profilePic');
        const usernameElement = document.getElementById('username');
        const emailElement = document.getElementById('email');

        // Load theme
        if (localStorage.getItem('darkTheme') === 'enabled') {
            body.classList.add('dark-theme');
            themeToggle.checked = true;
        }

        themeToggle.addEventListener('change', function() {
            if (this.checked) {
                body.classList.add('dark-theme');
                localStorage.setItem('darkTheme', 'enabled');
            } else {
                body.classList.remove('dark-theme');
                localStorage.setItem('darkTheme', 'disabled');
            }
        });

        // Mobile menu toggle
        mobileMenuIcon.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            const icon = mobileMenuIcon.querySelector('i');
            if (sidebar.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        });

        // Page transition loader
        document.querySelectorAll('a[href]').forEach(link => {
            if (link.href && !link.href.startsWith('javascript:') && !link.href.startsWith('#')) {
                link.addEventListener('click', function(e) {
                    if (!this.href.includes(window.location.hostname)) return;
                    
                    e.preventDefault();
                    loaderOverlay.classList.add('active');
                    
                    setTimeout(() => {
                        window.location.href = this.href;
                    }, 150);
                });
            }
        });

        // Search functionality
        document.addEventListener('DOMContentLoaded', () => {
            const cards = Array.from(document.querySelectorAll('.card'));

            const list = cards.map(card => ({
                title: card.dataset.title,
                element: card
            }));

            const fuse = new Fuse(list, {
                keys: ['title'],
                threshold: 0.4,
                distance: 100
            });

            const input = document.getElementById('searchInput');
            const container = document.getElementById('cardsContainer');

            input.addEventListener('input', () => {
                const query = input.value.trim();

                if (!query) {
                    cards.forEach(card => {
                        card.classList.remove('hidden', 'highlight');
                        card.style.order = '';
                    });
                    return;
                }

                const results = fuse.search(query);

                cards.forEach(card => {
                    card.classList.add('hidden');
                    card.classList.remove('highlight');
                });

                results.forEach((res, index) => {
                    const card = res.item.element;
                    card.classList.remove('hidden');
                    card.classList.add('highlight');
                    card.style.order = -index;
                });
            });

            // Load user data and configurations
            auth.onAuthStateChanged(user => {
                if (user) {
                    usernameElement.textContent = user.displayName || 'User';
                    emailElement.textContent = user.email;
                    loadUserConfigs(user.uid);
                    loadUserAvatars(user.uid);
                } else {
                    usernameElement.textContent = 'Guest';
                    emailElement.textContent = 'guest@example.com';
                    // Optionally redirect to login
                    // window.location.href = 'index.html';
                }
            });
        });

        // Open customization modal
        userInfo.addEventListener('click', () => {
            customizeModal.style.display = 'flex';
        });

        // Close modal
        closeModal.addEventListener('click', () => {
            customizeModal.style.display = 'none';
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === customizeModal) {
                customizeModal.style.display = 'none';
            }
        });

        // Upload avatar
        avatarUpload.addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const user = auth.currentUser;
            if (!user) {
                alert('Please log in to upload an avatar.');
                return;
            }

            loaderOverlay.classList.add('active');
            try {
                const storageRef = storage.ref(`avatars/${user.uid}/${file.name}`);
                await storageRef.put(file);
                const url = await storageRef.getDownloadURL();
                
                // Add to Firestore
                await db.collection('users').doc(user.uid).collection('avatars').add({
                    url,
                    name: file.name,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                // Refresh avatar list
                loadUserAvatars(user.uid);
            } catch (error) {
                console.error('Error uploading avatar:', error);
                alert('Failed to upload avatar.');
            } finally {
                loaderOverlay.classList.remove('active');
            }
        });

        // Load user avatars
        async function loadUserAvatars(uid) {
            avatarSelect.innerHTML = '<option value="">None</option>';
            try {
                const snapshot = await db.collection('users').doc(uid).collection('avatars').get();
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const option = document.createElement('option');
                    option.value = data.url;
                    option.textContent = data.name;
                    avatarSelect.appendChild(option);
                });
            } catch (error) {
                console.error('Error loading avatars:', error);
            }
        }

        // Save configuration
        saveConfig.addEventListener('click', async () => {
            const user = auth.currentUser;
            if (!user) {
                alert('Please log in to save configuration.');
                return;
            }

            const avatar = avatarSelect.value;
            const bgColor = bgColorSelect.value;

            try {
                // Check number of existing configs
                const snapshot = await db.collection('users').doc(user.uid).collection('configs').get();
                if (snapshot.size >= 5) {
                    alert('Maximum 5 configurations allowed. Delete one to add a new one.');
                    return;
                }

                await db.collection('users').doc(user.uid).collection('configs').add({
                    avatar,
                    bgColor,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                loadUserConfigs(user.uid);
                alert('Configuration saved!');
            } catch (error) {
                console.error('Error saving configuration:', error);
                alert('Failed to save configuration.');
            }
        });

        // Apply configuration
        applyConfig.addEventListener('click', () => {
            const avatar = avatarSelect.value;
            const bgColor = bgColorSelect.value;

            // Apply avatar
            if (avatar) {
                profilePic.src = avatar;
                profilePic.style.display = 'block';
            } else {
                profilePic.src = '';
                profilePic.style.display = 'block';
                profilePic.style.backgroundColor = '#ccc';
            }

            // Apply background color
            userInfo.style.backgroundColor = bgColor || '';

            // Save to localStorage for immediate effect
            localStorage.setItem('userConfig', JSON.stringify({ avatar, bgColor }));
        });

        // Load saved configurations
        async function loadUserConfigs(uid) {
            savedConfigs.innerHTML = '';
            try {
                const snapshot = await db.collection('users').doc(uid).collection('configs').orderBy('createdAt', 'desc').get();
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const configDiv = document.createElement('div');
                    configDiv.innerHTML = `
                        <span>Avatar: ${data.avatar ? 'Custom' : 'None'}, Color: ${data.bgColor || 'None'}</span>
                        <button onclick="applySavedConfig('${data.avatar}', '${data.bgColor}')">Apply</button>
                        <button onclick="deleteConfig('${doc.id}')">Delete</button>
                    `;
                    savedConfigs.appendChild(configDiv);
                });

                // Load last applied config from localStorage
                const savedConfig = JSON.parse(localStorage.getItem('userConfig'));
                if (savedConfig) {
                    profilePic.src = savedConfig.avatar || '';
                    profilePic.style.backgroundColor = savedConfig.avatar ? '' : '#ccc';
                    userInfo.style.backgroundColor = savedConfig.bgColor || '';
                }
            } catch (error) {
                console.error('Error loading configurations:', error);
            }
        }

        // Apply saved configuration
        window.applySavedConfig = (avatar, bgColor) => {
            avatarSelect.value = avatar;
            bgColorSelect.value = bgColor;
            applyConfig.click();
        };

        // Delete configuration
        window.deleteConfig = async (configId) => {
            const user = auth.currentUser;
            if (!user) return;

            try {
                await db.collection('users').doc(user.uid).collection('configs').doc(configId).delete();
                loadUserConfigs(user.uid);
                alert('Configuration deleted!');
            } catch (error) {
                console.error('Error deleting configuration:', error);
                alert('Failed to delete configuration.');
            }
        };
    </script>
</body>
</html>