<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy Policy - Contra E-Crime</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/Dccn8pc.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
        }

        body, html {
            min-height: 100vh;
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
            background-color: #f7f7f7;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .loader-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #FFF;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .dark-theme .loader {
            border-color: #d7b15c;
            border-bottom-color: transparent;
        }

        .container {
            display: flex;
            min-height: 100vh;
            flex-direction: column;
        }

        .sidebar {
            width: 290px;
            background-image: url('https://i.imgur.com/bNRxAhZ.png');
            background-size: cover;
            background-position: center;
            background-color: #1a1a1a;
            color: white;
            padding: 20px;
            height: 100vh;
            position: fixed;
            transition: transform 0.3s ease;
        }

        .sidebar h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
        }

        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }

        .sidebar ul li {
            margin: 50px 0;
        }

        .sidebar ul li a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar ul li a img {
            width: 30px;
            height: 30px;
        }

        .sidebar ul li a:not(.dark-theme-label a) {
            transition: all 0.3s ease;
            position: relative;
        }

        .sidebar ul li a:not(.dark-theme-label a):hover {
            color: #d7b15c;
            transform: translateX(5px);
        }

        .sidebar ul li a:not(.dark-theme-label a)::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -10px;
            left: 0;
            background-color: #d7b15c;
            transition: width 0.3s ease;
        }

        .sidebar ul li a:not(.dark-theme-label a):hover::after {
            width: 95%;
        }

        .dark-theme .sidebar ul li a:not(.dark-theme-label a):hover {
            color: #d7b15c;
        }

        .dark-theme-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 20px;
        }

        .dark-theme-label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        .dark-theme-label img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
        }

        .switch-label {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #28292c;
            border-radius: 25px;
            cursor: pointer;
            border: 3px solid #28292c;
        }

        .checkbox {
            position: absolute;
            display: none;
        }

        .slider {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 25px;
            transition: 0.3s;
        }

        .checkbox:checked ~ .slider {
            background-color: #d8dbe0;
        }

        .slider::before {
            content: "";
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            box-shadow: inset 8px -3px 0px 0px #d8dbe0;
            background-color: #28292c;
            transition: 0.3s;
        }

        .checkbox:checked ~ .slider::before {
            transform: translateX(30px);
            background-color: #28292c;
            box-shadow: none;
        }

        .content {
            flex: 1;
            margin-left: 290px;
            padding: 50px 30px 30px 30px;
            position: relative;
            background: linear-gradient(135deg, #f7f7f7 0%, #e0e0e0 100%);
            transition: background-color 0.3s ease, margin-left 0.3s ease;
        }

        .content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(200, 200, 200, 0.1);
            z-index: 0;
        }

        .header {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .privacy-section {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 40px;
        }

        .privacy-section h1 {
            font-size: 36px;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid #8B0000;
            padding-bottom: 10px;
        }

        .toc {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .toc h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
            padding: 0;
        }

        .toc ul li {
            margin: 10px 0;
        }

        .toc ul li a {
            color: #8B0000;
            text-decoration: none;
            font-size: 16px;
        }

        .toc ul li a:hover {
            text-decoration: underline;
            color: #580100;
        }

        .policy-section {
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .policy-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .policy-section h2 {
            font-size: 28px;
            color: #333;
            margin-bottom: 15px;
            border-left: 4px solid #8B0000;
            padding-left: 10px;
        }

        .policy-section p {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .policy-section ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .policy-section ul li {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .contact-icons {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .contact-icons a {
            color: #666;
            font-size: 16px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s ease;
        }

        .contact-icons a:hover {
            color: #8B0000;
        }

        .contact-icons i {
            font-size: 20px;
        }

        .dark-theme .contact-icons a {
            color: #b0b0b0;
        }

        .dark-theme .contact-icons a:hover {
            color: #d7b15c;
        }

        .change-credentials-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .change-credentials-form label {
            font-size: 16px;
            color: #333;
            font-weight: 500;
        }

        .change-credentials-form input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .change-credentials-form input:focus {
            border-color: #8B0000;
            box-shadow: 0 0 5px rgba(139, 0, 0, 0.3);
            outline: none;
        }

        .input-container {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #8B0000;
            transition: color 0.3s ease;
        }

        .toggle-password:hover {
            color: #580100;
        }

        .change-credentials-form button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #580100, #8B0000);
            color: white;
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.3s ease;
        }

        .change-credentials-form button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }

        .change-credentials-form button.loading {
            pointer-events: none;
            opacity: 0.7;
        }

        .change-credentials-form button.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            border: 3px solid #fff;
            border-top: 3px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
        }

        .error-message, .success-message {
            font-size: 16px;
            line-height: 1.6;
            margin-top: 10px;
            display: none;
        }

        .error-message {
            color: #ff0000;
        }

        .success-message {
            color: #2e7d32;
        }

        .error-message.show, .success-message.show {
            display: block;
        }

        body.dark-theme {
            background-color: #121212;
            color: #e0e0e0;
        }

        .dark-theme .content {
            background: linear-gradient(135deg, #28292c 0%, #1a1a1a 100%);
        }

        .dark-theme .content::before {
            background-color: rgba(40, 41, 44, 0.9);
        }

        .dark-theme .privacy-section {
            background: #333;
        }

        .dark-theme .privacy-section h1 {
            color: #d8dbe0;
        }

        .dark-theme .toc {
            background-color: #444;
        }

        .dark-theme .toc h2 {
            color: #d8dbe0;
        }

        .dark-theme .toc ul li a {
            color: #d7b15c;
        }

        .dark-theme .toc ul li a:hover {
            color: #b08d3e;
        }

        .dark-theme .policy-section h2 {
            color: #d8dbe0;
        }

        .dark-theme .policy-section p,
        .dark-theme .policy-section ul li {
            color: #b0b0b0;
        }

        .dark-theme .change-credentials-form label {
            color: #d8dbe0;
        }

        .dark-theme .change-credentials-form input {
            background-color: #444;
            color: #e0e0e0;
            border-color: #555;
        }

        .dark-theme .change-credentials-form input:focus {
            border-color: #d7b15c;
            box-shadow: 0 0 5px rgba(215, 177, 92, 0.3);
        }

        .dark-theme .toggle-password {
            color: #d7b15c;
        }

        .dark-theme .toggle-password:hover {
            color: #b08d3e;
        }

        .mobile-nav {
            display: none;
            background-image: url('https://i.imgur.com/bNRxAhZ.png');
            padding: 15px;
            position: fixed;
            width: 100%;
            z-index: 1000;
        }

        .mobile-nav .logo {
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-decoration: none;
        }

        .mobile-nav .menu-icon {
            color: white;
            font-size: 24px;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 15px;
        }

        footer {
            background-color: #333;
            color: white;
            padding: 15px 30px;
            text-align: center;
            margin-left: 290px;
            z-index: 1;
            transition: margin-left 0.3s ease;
        }

        footer p {
            margin: 0;
            font-size: 14px;
        }

        .footer-links {
            margin-top: 5px;
        }

        .footer-links a {
            color: #d7b15c;
            text-decoration: none;
            margin: 0 10px;
            font-size: 14px;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        .dark-theme footer {
            background-color: #1a1a1a;
        }

        @media (max-width: 1024px) {
            .sidebar {
                width: 250px;
            }

            .sidebar h1 {
                font-size: 22px;
            }

            .sidebar ul li a {
                font-size: 16px;
            }

            .dark-theme-label {
                font-size: 16px;
            }

            .content {
                margin-left: 250px;
            }

            footer {
                margin-left: 250px;
            }

            .privacy-section h1 {
                font-size: 32px;
            }

            .policy-section h2 {
                font-size: 24px;
            }

            .policy-section p,
            .policy-section ul li {
                font-size: 15px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
                padding: 10px;
            }

            .sidebar h1 {
                font-size: 20px;
            }

            .sidebar ul li a {
                font-size: 14px;
            }

            .dark-theme-label {
                font-size: 14px;
            }

            .content {
                margin-left: 200px;
            }

            footer {
                margin-left: 200px;
            }

            .privacy-section {
                padding: 30px;
            }
        }

        @media (max-width: 480px) {
            .container {
                flex-direction: column;
            }

            .mobile-nav {
                display: block;
            }

            .sidebar {
                width: 100%;
                height: auto;
                position: fixed;
                padding: 15px;
                transform: translateX(-100%);
                z-index: 999;
                top: 60px;
                height: calc(100vh - 60px);
                overflow-y: auto;
                background-size: cover;
                background-position: center;
                background-color: #1a1a1a;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .sidebar h1 {
                display: none;
            }

            .sidebar ul {
                margin: 0;
            }

            .sidebar ul li {
                margin: 20px 0;
            }

            .sidebar ul li a {
                font-size: 16px;
            }

            .dark-theme-container {
                margin-top: 20px;
                margin-bottom: 15px;
            }

            .dark-theme-label {
                font-size: 16px;
            }

            .content {
                margin-left: 0;
            }

            footer {
                margin-left: 0;
                padding: 10px 20px;
                text-align: center;
            }

            footer p {
                font-size: 12px;
            }

            .footer-links a {
                font-size: 12px;
                margin: 0 8px;
            }

            .header {
                justify-content: center;
            }

            .privacy-section {
                padding: 20px;
            }

            .privacy-section h1 {
                font-size: 28px;
            }

            .toc h2 {
                font-size: 20px;
            }

            .toc ul li a {
                font-size: 14px;
            }

            .policy-section h2 {
                font-size: 22px;
            }

            .policy-section p,
            .policy-section ul li {
                font-size: 14px;
            }

            .change-credentials-form input,
            .change-credentials-form button {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="loader-overlay" id="loaderOverlay">
        <div class="loader"></div>
    </div>
    <div class="mobile-nav">
        <a href="HomePage.html" class="logo">Contra E-Crime</a>
        <div class="menu-icon" id="mobileMenuIcon">
            <i class="fas fa-bars"></i>
        </div>
    </div>

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <h1>Contra E-Crime</h1>
            <ul>
                <li>
                    <a href="HomePage.html">
                        <img src="https://i.imgur.com/OAHusQp.png" alt="Home">
                        Home
                    </a>
                </li>
                <li>
                    <a href="News.html">
                        <img src="https://i.imgur.com/FNALwXX.png" alt="News & Insights">
                        News & Insights
                    </a>
                </li>
                <li>
                    <a href="SavedLaws.html">
                        <img src="https://i.imgur.com/VChoqhD.png" alt="Saved Laws">
                        Saved Laws
                    </a>
                </li>
                <li>
                    <a href="History.html">
                        <img src="https://i.imgur.com/cnaDfEq.png" alt="Search History">
                        Search History
                    </a>
                </li>
                <li>
                    <a href="ContactUs.html">
                        <img src="https://i.imgur.com/T7bI4RJ.png" alt="Contact Us">
                        Contact Us
                    </a>
                </li>
                <li>
                    <a href="AboutUs.html">
                        <img src="https://i.imgur.com/lktrzpa.png" alt="About Us">
                        About Us
                    </a>
                </li>
                <li>
                    <a href="index.html">
                        <img src="https://i.imgur.com/2jjsgOq.png" alt="Logout">
                        Logout
                    </a>
                </li>
            </ul>

            <div class="dark-theme-container">
                <div class="dark-theme-label">
                    <img src="https://i.imgur.com/vEKpOsq.png" alt="Dark Theme">
                    <span>Dark Theme</span>
                </div>
                <div class="toggle-switch">
                    <label class="switch-label">
                        <input type="checkbox" class="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </nav>
        <main class="content">
            <div class="header">
            </div>
            <section class="privacy-section">
                <h1>Privacy Policy</h1>
                <div class="toc">
                    <h2>Table of Contents</h2>
                    <ul>
                        <li><a href="#introduction">Introduction</a></li>
                        <li><a href="#info-collect">Information We Collect</a></li>
                        <li><a href="#how-use">How We Use Your Information</a></li>
                        <li><a href="#sharing-info">Sharing Your Information</a></li>
                        <li><a href="#data-security">Data Security</a></li>
                        <li><a href="#your-choices">Your Choices</a></li>
                        <li><a href="#children-privacy">Children’s Privacy</a></li>
                        <li><a href="#changes-policy">Changes to This Policy</a></li>
                        <li><a href="#change-credentials">Change Password and Username</a></li>
                        <li><a href="#contact-us">Contact Us</a></li>
                    </ul>
                </div>

                <div class="policy-section" id="introduction">
                    <h2>Introduction</h2>
                    <p>Welcome to Contra E-Crime. We are committed to protecting your privacy and ensuring that your personal information is handled in a safe and responsible manner. This Privacy Policy explains how we collect, use, share, and protect your information when you use our website and services, including our platform "Weigh the Right."</p>
                    <p>By accessing or using our services, you agree to the terms of this Privacy Policy. If you do not agree with our practices, please do not use our services.</p>
                </div>

                <div class="policy-section" id="info-collect">
                    <h2>Information We Collect</h2>
                    <p>This is a school project, and we collect minimal information to provide and improve our services for educational purposes:</p>
                    <ul>
                        <li><strong>Search Queries:</strong> We collect the search terms you enter to provide relevant cybercrime law information as part of this project.</li>
                        <li><strong>Usage Data:</strong> We may track how you interact with our website, such as the pages you visit, to understand user behavior and improve our platform's design.</li>
                        <li><strong>Preferences:</strong> We store your theme preference (light or dark mode) to enhance your user experience during your session.</li>
                    </ul>
                    <p>We do not collect personal information like your name or email address for this project, as account creation is simulated for demonstration purposes.</p>
                </div>

                <div class="policy-section" id="how-use">
                    <h2>How We Use Your Information</h2>
                    <p>We use the information we collect for the following purposes:</p>
                    <ul>
                        <li><strong>Provide Services:</strong> To deliver personalized content, such as relevant cybercrime law information, based on your search history and preferences.</li>
                        <li><strong>Improve Our Platform:</strong> To analyze usage patterns and improve the functionality and user experience of our website.</li>
                        <li><strong>Communicate with You:</strong> To send you updates, notifications, and responses to your inquiries via email.</li>
                        <li><strong>Ensure Security:</strong> To detect and prevent fraudulent activity and ensure the security of our platform.</li>
                    </ul>
                </div>

                <div class="policy-section" id="sharing-info">
                    <h2>Sharing Your Information</h2>
                    <p>We do not sell or rent your personal information to third parties. However, we may share your information in the following circumstances:</p>
                    <ul>
                        <li><strong>Legal Requirements:</strong> If required by law or to comply with legal processes, such as a court order or subpoena.</li>
                        <li><strong>Service Providers:</strong> With trusted third-party service providers who assist us in operating our platform (e.g., Firebase for data storage), under strict confidentiality agreements.</li>
                        <li><strong>Business Transfers:</strong> In the event of a merger, acquisition, or sale of assets, your information may be transferred as part of the transaction.</li>
                    </ul>
                </div>

                <div class="policy-section" id="data-security">
                    <h2>Data Security</h2>
                    <p>We take the security of your information seriously and implement reasonable measures to protect it, including:</p>
                    <ul>
                        <li>Encryption of sensitive data during transmission using HTTPS.</li>
                        <li>Secure storage of your data in Firebase with access controls.</li>
                        <li>Regular monitoring and audits to detect and address potential vulnerabilities.</li>
                    </ul>
                    <p>However, no method of transmission over the internet or electronic storage is 100% secure, and we cannot guarantee absolute security.</p>
                </div>

                <div class="policy-section" id="your-choices">
                    <h2>Your Choices</h2>
                    <p>You have several options to manage your information:</p>
                    <ul>
                        <li><strong>Account Settings:</strong> You can update or delete your personal information through your account settings.</li>
                        <li><strong>Cookies:</strong> You can disable cookies through your browser settings, though this may affect the functionality of our services.</li>
                        <li><strong>Opt-Out:</strong> You can opt-out of receiving non-essential communications by following the unsubscribe link in our emails.</li>
                    </ul>
                </div>

                <div class="policy-section" id="children-privacy">
                    <h2>Children’s Privacy</h2>
                    <p>Our services are not directed to individuals under the age of 13. We do not knowingly collect personal information from children under 13. If we become aware that a child under 13 has provided us with personal information, we will take steps to delete such information.</p>
                </div>

                <div class="policy-section" id="changes-policy">
                    <h2>Changes to This Policy</h2>
                    <p>We may update this Privacy Policy from time to time to reflect changes in our practices or legal requirements. We will notify you of significant changes by posting the updated policy on our website with a new effective date. We encourage you to review this policy periodically.</p>
                </div>

                <div class="policy-section" id="change-credentials">
                    <h2>Change Password and Username</h2>
                    <p>You can update your username or password securely through the form below. Your current password is required to verify your identity before making changes. Updates will be reflected in our Firebase database and will apply to your account immediately.</p>
                    <form id="changeCredentialsForm" class="change-credentials-form">
                        <label for="current-password">Current Password</label>
                        <div class="input-container">
                            <input type="password" id="current-password" placeholder="Enter your current password" required>
                            <i class="fas fa-eye toggle-password" id="toggleCurrentPassword"></i>
                        </div>

                        <label for="new-username">New Username</label>
                        <input type="text" id="new-username" placeholder="Enter your new username">

                        <label for="new-password">New Password</label>
                        <div class="input-container">
                            <input type="password" id="new-password" placeholder="Enter your new password">
                            <i class="fas fa-eye toggle-password" id="toggleNewPassword"></i>
                        </div>

                        <button type="submit">Update Credentials</button>
                    </form>
                    <div class="error-message" id="credentialsErrorMessage"></div>
                    <div class="success-message" id="credentialsSuccessMessage"></div>
                    <p>If you encounter any issues, please reach out via the <a href="#contact-us">Contact Us</a> section.</p>
                </div>

                <div class="policy-section" id="contact-us">
                    <h2>Contact Us</h2>
                    <p>If you have any questions or concerns about this Privacy Policy or our data practices, please contact us:</p>
                    <div class="contact-icons">
                        <a href="https://www.facebook.com/share/1EMXPAiePS/" target="_blank"><i class="fab fa-facebook"></i> Facebook</a>
                        <a href="https://mail.google.com/mail/?view=cm&fs=1&to=contraecrimecc@gmail.com"><i class="fas fa-envelope"></i> Email</a>
                        <a href="https://x.com/contraecrime" target="_blank"><i class="fab fa-twitter"></i> Twitter</a>
                        <a href="https://github.com/contraecrime" target="_blank"><i class="fab fa-github"></i> GitHub</a>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>© 2025 Contra E-Crime. All rights reserved.</p>
            <div class="footer-links">
                <a href="PrivacyPolicy.html">Privacy Policy</a>
                <a href="TermsOfUse.html">Terms of Use</a>
                <a href="ContactUs.html">Contact Us</a>
            </div>
        </footer>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCDNmxNOV7rr_qfM_mTeYTaUIkkLvRaf80",
            authDomain: "contra-e-crime.firebaseapp.com",
            projectId: "contra-e-crime",
            storageBucket: "contra-e-crime.firebasestorage.app",
            messagingSenderId: "198995444405",
            appId: "1:198995444405:web:5f8c6eed561461b36034fc",
            measurementId: "G-7Y2E24DD42"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const mobileMenuIcon = document.getElementById('mobileMenuIcon');
        const sidebar = document.getElementById('sidebar');
        const loaderOverlay = document.getElementById('loaderOverlay');

        if (localStorage.getItem('darkTheme') === 'enabled') {
            body.classList.add('dark-theme');
            themeToggle.checked = true;
        }

        themeToggle.addEventListener('change', function() {
            if (this.checked) {
                body.classList.add('dark-theme');
                localStorage.setItem('darkTheme', 'enabled');
            } else {
                body.classList.remove('dark-theme');
                localStorage.setItem('darkTheme', 'disabled');
            }
        });

        mobileMenuIcon.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            const icon = mobileMenuIcon.querySelector('i');
            if (sidebar.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        });

        // Handle TOC links for smooth scrolling
        document.querySelectorAll('.toc a[href^="#"]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 70,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Handle external navigation links with loader
        document.querySelectorAll('a[href]:not([href^="#"])').forEach(link => {
            link.addEventListener('click', function(e) {
                if (!this.href.includes(window.location.hostname) && !this.href.startsWith('mailto:')) return;
                
                e.preventDefault();
                loaderOverlay.classList.add('active');
                
                setTimeout(() => {
                    window.location.href = this.href;
                }, 150);
            });
        });

        const sections = document.querySelectorAll('.policy-section');
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        sections.forEach(section => {
            observer.observe(section);
        });

        // Password toggle functionality
        const toggleCurrentPassword = document.getElementById('toggleCurrentPassword');
        const currentPassword = document.getElementById('current-password');
        const toggleNewPassword = document.getElementById('toggleNewPassword');
        const newPassword = document.getElementById('new-password');

        if (toggleCurrentPassword && currentPassword) {
            toggleCurrentPassword.addEventListener('click', function() {
                const type = currentPassword.getAttribute('type') === 'password' ? 'text' : 'password';
                currentPassword.setAttribute('type', type);
                this.classList.toggle('fa-eye-slash');
            });
        }

        if (toggleNewPassword && newPassword) {
            toggleNewPassword.addEventListener('click', function() {
                const type = newPassword.getAttribute('type') === 'password' ? 'text' : 'password';
                newPassword.setAttribute('type', type);
                this.classList.toggle('fa-eye-slash');
            });
        }

        // Handle credential change form submission
        const changeCredentialsForm = document.getElementById('changeCredentialsForm');
        const credentialsErrorMessage = document.getElementById('credentialsErrorMessage');
        const credentialsSuccessMessage = document.getElementById('credentialsSuccessMessage');

        if (changeCredentialsForm) {
            changeCredentialsForm.addEventListener('submit', async (event) => {
                event.preventDefault();

                const submitButton = changeCredentialsForm.querySelector('button');
                submitButton.classList.add('loading');
                submitButton.disabled = true;

                credentialsErrorMessage.classList.remove('show');
                credentialsErrorMessage.style.display = 'none';
                credentialsSuccessMessage.classList.remove('show');
                credentialsSuccessMessage.style.display = 'none';

                try {
                    const currentPassword = document.getElementById('current-password').value.trim();
                    const newUsername = document.getElementById('new-username').value.trim();
                    const newPassword = document.getElementById('new-password').value.trim();

                    if (!currentPassword) {
                        throw new Error('Current password is required.');
                    }

                    if (!newUsername && !newPassword) {
                        throw new Error('Please provide a new username or password.');
                    }

                    const user = auth.currentUser;
                    if (!user) {
                        throw new Error('No user is currently logged in. Please log in again.');
                    }

                    // Reauthenticate the user
                    const credential = firebase.auth.EmailAuthProvider.credential(user.email, currentPassword);
                    await user.reauthenticateWithCredential(credential);

                    // Update Firestore and Firebase Authentication
                    let updates = {};
                    if (newUsername) {
                        updates.username = newUsername;
                        // Update display name in Firebase Authentication
                        await user.updateProfile({ displayName: newUsername });
                    }
                    if (newPassword) {
                        await user.updatePassword(newPassword);
                    }

                    // Update Firestore with the user's UID
                    if (Object.keys(updates).length > 0) {
                        await db.collection('users').doc(user.uid).set(updates, { merge: true });
                    }

                    // Update local storage with the new username
                    if (newUsername) {
                        localStorage.setItem('currentUser', JSON.stringify({ email: user.email, username: newUsername }));
                    }

                    credentialsSuccessMessage.textContent = 'Credentials updated successfully.';
                    credentialsSuccessMessage.style.display = 'block';
                    credentialsSuccessMessage.classList.add('show');

                    // Reset form
                    changeCredentialsForm.reset();
                } catch (error) {
                    let errorMessage = 'An error occurred. Please try again.';
                    if (error.code === 'auth/wrong-password') {
                        errorMessage = 'Current password is incorrect.';
                    } else if (error.code === 'auth/too-many-requests') {
                        errorMessage = 'Too many attempts. Please try again later.';
                    } else if (error.code === 'auth/weak-password') {
                        errorMessage = 'New password is too weak. Please use a stronger password.';
                    } else {
                        console.error('Credential update error:', error);
                    }
                    credentialsErrorMessage.textContent = errorMessage;
                    credentialsErrorMessage.style.display = 'block';
                    credentialsErrorMessage.classList.add('show');
                } finally {
                    submitButton.classList.remove('loading');
                    submitButton.disabled = false;
                }
            });
        }

 
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9355cd1afb2ced7e',t:'MTc0NTQ5OTgxMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>