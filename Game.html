<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberLaw Quiz Master - Contra E-Crime</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/Dccn8pc.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <style>
        * { box-sizing: border-box; }
        body, html {
            min-height: 100vh;
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
            background-color: #f7f7f7;
            transition: background-color 0.3s ease, color 0.3s ease;
            overflow-x: hidden;
            overscroll-behavior: none;
        }
        .loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .loader-overlay.active { opacity: 1; pointer-events: all; }
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #FFF;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        .dark-theme .loader {
            border-color: #d7b15c;
            border-bottom-color: transparent;
        }
        .container {
            display: flex;
            min-height: 100vh;
            flex-direction: column;
        }
        .mobile-nav {
            display: none;
            background-image: url('https://i.imgur.com/bNRxAhZ.png');
            background-size: cover;
            background-position: center;
            padding: 15px;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1002;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .mobile-nav .logo {
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-decoration: none;
        }
        .mobile-nav .menu-icon {
            color: white;
            font-size: 24px;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 15px;
        }
        .sidebar {
            width: 290px;
            background-image: url('https://i.imgur.com/bNRxAhZ.png');
            background-size: cover;
            background-position: center;
            background-color: #1a1a1a;
            color: white;
            padding: 20px;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            transition: transform 0.3s ease;
            z-index: 1001;
            overflow-y: auto;
        }
        .sidebar.active {
            z-index: 1001; /* Ensure sidebar stays in front on mobile */
        }
        .sidebar h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
        }
        .sidebar ul { list-style-type: none; padding: 0; }
        .sidebar ul li { margin: 50px 0; }
        .sidebar ul li a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .sidebar ul li a img {
            width: 30px;
            height: 30px;
        }
        .sidebar ul li a:not(.dark-theme-label a) {
            transition: all 0.3s ease;
            position: relative;
        }
        .sidebar ul li a:not(.dark-theme-label a):hover {
            color: #d7b15c;
            transform: translateX(5px);
        }
        .sidebar ul li a:not(.dark-theme-label a)::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -10px;
            left: 0;
            background-color: #d7b15c;
            transition: width 0.3s ease;
        }
        .sidebar ul li a:not(.dark-theme-label a):hover::after {
            width: 95%;
        }
        .dark-theme .sidebar ul li a:not(.dark-theme-label a):hover { color: #d7b15c; }
        .dark-theme-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 20px;
        }
        .dark-theme-label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }
        .dark-theme-label img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
        }
        .switch-label {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #28292c;
            border-radius: 25px;
            cursor: pointer;
            border: 3px solid #28292c;
        }
        .checkbox {
            position: absolute;
            display: none;
        }
        .slider {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 25px;
            transition: 0.3s;
        }
        .checkbox:checked ~ .slider { background-color: #d8dbe0; }
        .slider::before {
            content: "";
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            box-shadow: inset 8px -3px 0px 0px #d8dbe0;
            background-color: #28292c;
            transition: 0.3s;
        }
        .checkbox:checked ~ .slider::before {
            transform: translateX(30px);
            background-color: #28292c;
            box-shadow: none;
        }
        .content {
            flex: 1;
            margin-left: 290px;
            padding: 80px 30px 30px 30px;
            position: relative;
            background: linear-gradient(135deg, #f7f7f7 0%, #e0e0e0 100%);
            transition: background-color 0.3s ease, margin-left 0.3s ease;
            overflow-y: auto;
            min-height: 100vh;
        }
        .content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(200, 200, 200, 0.1);
            z-index: 0;
        }
        .quiz-section {
            position: relative;
            z-index: 1000;
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            padding: 40px;
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 0.5s ease, transform 0.5s ease;
            touch-action: manipulation;
        }
        .quiz-section.visible {
            opacity: 1;
            transform: scale(1);
        }
        .quiz-section h1 {
            font-size: 36px;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 3px solid #8B0000;
            padding-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        #particles-js {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        .progress-container {
            width: 100%;
            background: #ddd;
            border-radius: 25px;
            margin-bottom: 20px;
            overflow: hidden;
            position: relative;
        }
        .progress-bar {
            height: 20px;
            background: linear-gradient(90deg, #ffcc00, #e6b800);
            width: 0%;
            border-radius: 25px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                45deg,
                rgba(255, 255, 255, 0.2) 25%,
                transparent 25%,
                transparent 50%,
                rgba(255, 255, 255, 0.2) 50%,
                rgba(255, 255, 255, 0.2) 75%,
                transparent 75%,
                transparent
            );
            background-size: 30px 30px;
            animation: moveStripes 2s linear infinite;
        }
        .progress-text {
            font-size: 1.2em;
            margin-bottom: 10px;
            text-align: center;
            color: #333;
            font-weight: 600;
        }
        .timer-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            gap: 20px;
        }
        .timer-svg {
            width: 70px;
            height: 70px;
        }
        .timer-circle {
            fill: none;
            stroke: #ffcc00;
            stroke-width: 5;
            stroke-dasharray: 188;
            stroke-dashoffset: 0;
            transition: stroke-dashoffset 1s linear;
        }
        .timer-text {
            position: absolute;
            font-size: 20px;
            color: #ffcc00;
            font-weight: 600;
            transform: translate(35px, 43px);
        }
        .power-ups {
            display: flex;
            gap: 10px;
        }
        .power-up-btn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .power-up-btn:hover {
            transform: scale(1.1);
        }
        .power-up-btn:disabled {
            background: #666;
            cursor: not-allowed;
            opacity: 0.6;
        }
        .question-box {
            background: #f9f9f9;
            color: #1e3c72;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            animation: slideIn 0.5s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        .question-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            z-index: 0;
        }
        .question-text {
            font-size: 1.5em;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            position: relative;
            z-index: 1;
        }
        .option-btn {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: #fff;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            touch-action: manipulation;
        }
        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.3s ease;
        }
        .option-btn:hover::before {
            left: 0;
        }
        .option-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
        }
        .option-btn.correct {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            animation: pulse 0.5s;
        }
        .option-btn.correct::after {
            content: '\f058';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #fff;
            font-size: 20px;
        }
        .option-btn.wrong {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            animation: shake 0.5s;
        }
        .option-btn.wrong::after {
            content: '\f057';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #fff;
            font-size: 20px;
        }
        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.6;
        }
        .explanation {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background: #e0f7fa;
            border-radius: 8px;
            color: #1e3c72;
            font-size: 1em;
            line-height: 1.6;
        }
        .explanation.visible {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        .next-btn, .exit-game-btn {
            background: linear-gradient(135deg, #ffcc00, #e6b800);
            color: #1e3c72;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin: 20px 10px;
            display: none;
            cursor: pointer;
            position: relative;
            z-index: 1000;
            touch-action: manipulation;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .exit-game-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: #fff;
        }
        .next-btn.visible, .exit-game-btn.visible {
            display: inline-block;
            pointer-events: auto;
        }
        .next-btn:hover, .exit-game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        .score {
            font-size: 1.5em;
            margin: 20px 0;
            text-align: center;
            color: #333;
            font-weight: 600;
        }
        .start-modal, .tutorial-modal, .result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1002;
            overflow-y: auto;
        }
        .start-modal-content, .tutorial-modal-content, .result-modal-content {
            background: #fff;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            width: 90%;
            max-width: 700px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            animation: zoomIn 0.5s ease;
            position: relative;
        }
        .start-modal-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .start-modal-content h2, .tutorial-modal-content h2, .result-modal-content h2 {
            font-size: 32px;
            color: #1e3c72;
            margin-bottom: 25px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        .difficulty-options {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        .difficulty-card {
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            width: 180px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        .difficulty-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #4a90e2, #357abd);
            opacity: 0.1;
            transition: opacity 0.3s ease;
        }
        .difficulty-card:hover::before {
            opacity: 0.3;
        }
        .difficulty-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        .difficulty-card.selected {
            border: 3px solid #ffcc00;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        }
        .difficulty-card .emoji {
            font-size: 40px;
            margin-bottom: 10px;
        }
        .difficulty-card .label {
            font-size: 20px;
            color: #333;
            font-weight: 600;
        }
        .difficulty-card .description {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
        }
        .start-btn, .tutorial-btn, .restart-btn, .back-btn, .start-quiz-btn, .exit-btn, .back-about-btn {
            background: linear-gradient(135deg, #ffcc00, #e6b800);
            color: #1e3c72;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin: 10px;
            touch-action: manipulation;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .back-about-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: #fff;
        }
        .start-btn:hover, .tutorial-btn:hover, .restart-btn:hover, .back-btn:hover, .start-quiz-btn:hover, .exit-btn:hover, .back-about-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        .tutorial-modal-content {
            padding: 0;
            overflow: hidden;
        }
        .tutorial-slide {
            display: none;
            padding: 40px;
            text-align: center;
        }
        .tutorial-slide.active {
            display: block;
        }
        .tutorial-slide h3 {
            font-size: 28px;
            color: #1e3c72;
            margin-bottom: 20px;
        }
        .tutorial-slide p {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .tutorial-slide img {
            width: 300px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .tutorial-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        .tutorial-dot {
            width: 12px;
            height: 12px;
            background: #ddd;
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .tutorial-dot.active {
            background: #ffcc00;
        }
        .tutorial-prev, .tutorial-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: #fff;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 20px;
            border-radius: 50%;
            transition: background 0.3s ease;
        }
        .tutorial-prev:hover, .tutorial-next:hover {
            background: rgba(0, 0, 0, 0.8);
        }
        .tutorial-prev {
            left: 20px;
        }
        .tutorial-next {
            right: 20px;
        }
        .dont-show-again {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        .dont-show-again label {
            font-size: 14px;
            color: #666;
        }
        .dont-show-again input {
            cursor: pointer;
        }
        .result-modal-content {
            max-height: 80vh;
            overflow-y: auto;
        }
        .result-modal-content h3 {
            font-size: 22px;
            color: #1e3c72;
            margin: 20px 0 10px;
        }
        .result-modal-content p {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .result-summary {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .result-summary div {
            margin: 10px 0;
        }
        .result-summary .question {
            font-weight: 600;
            color: #1e3c72;
        }
        .result-summary .user-answer {
            color: #333;
        }
        .result-summary .correct-answer {
            color: #2ecc71;
        }
        .result-summary .time-taken {
            color: #e74c3c;
        }
        .result-stats {
            text-align: left;
            padding: 15px;
            background: #e0f7fa;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .result-stats div {
            margin: 5px 0;
        }
        body.dark-theme { background-color: #121212; color: #e0e0e0; }
        .dark-theme .content { background: linear-gradient(135deg, #28292c 0%, #1a1a1a 100%); }
        .dark-theme .content::before { background-color: rgba(40, 41, 44, 0.9); }
        .dark-theme .quiz-section { background: #333; }
        .dark-theme .quiz-section h1 { color: #d8dbe0; }
        .dark-theme .progress-text { color: #d8dbe0; }
        .dark-theme .question-box { background-color: #444; color: #d8dbe0; }
        .dark-theme .score { color: #d8dbe0; }
        .dark-theme .start-modal-content, .dark-theme .tutorial-modal-content, .dark-theme .result-modal-content { background: #333; color: #d8dbe0; }
        .dark-theme .start-modal-content h2, .dark-theme .tutorial-modal-content h2, .dark-theme .result-modal-content h2 { color: #d8dbe0; }
        .dark-theme .tutorial-slide h3 { color: #d8dbe0; }
        .dark-theme .tutorial-slide p { color: #b0b0b0; }
        .dark-theme .dont-show-again label { color: #b0b0b0; }
        .dark-theme .difficulty-card { background: #444; }
        .dark-theme .difficulty-card .label { color: #d8dbe0; }
        .dark-theme .difficulty-card .description { color: #b0b0b0; }
        .dark-theme .result-modal-content h3 { color: #d8dbe0; }
        .dark-theme .result-modal-content p { color: #b0b0b0; }
        .dark-theme .result-summary { background: #444; }
        .dark-theme .result-summary .question { color: #d8dbe0; }
        .dark-theme .explanation { background: #1a3c3e; color: #d8dbe0; }
        .dark-theme .result-stats { background: #1a3c3e; }
        .dark-theme .result-stats div { color: #d8dbe0; }
        footer {
            background-color: #333;
            color: white;
            padding: 15px 30px;
            text-align: center;
            margin-left: 290px;
            z-index: 1;
            transition: margin-left 0.3s ease;
        }
        footer p { margin: 0; font-size: 14px; }
        .footer-links { margin-top: 5px; }
        .footer-links a {
            color: #d7b15c;
            text-decoration: none;
            margin: 0 10px;
            font-size: 14px;
        }
        .footer-links a:hover { text-decoration: underline; }
        .dark-theme footer { background-color: #1a1a1a; }
        @media (max-width: 1024px) {
            .sidebar { width: 250px; }
            .sidebar h1 { font-size: 22px; }
            .sidebar ul li a { font-size: 16px; }
            .dark-theme-label { font-size: 16px; }
            .content { margin-left: 250px; }
            footer { margin-left: 250px; }
            .quiz-section h1 { font-size: 32px; }
            .difficulty-card { width: 160px; }
        }
        @media (max-width: 768px) {
            .sidebar { width: 200px; padding: 10px; }
            .sidebar h1 { font-size: 20px; }
            .sidebar ul li a { font-size: 14px; }
            .dark-theme-label { font-size: 14px; }
            .content { margin-left: 200px; }
            footer { margin-left: 200px; }
            .quiz-section { padding: 30px; }
            .options { grid-template-columns: 1fr; }
            .difficulty-card { width: 140px; }
        }
        @media (max-width: 480px) {
            .container { flex-direction: column; }
            .mobile-nav { display: block; }
            .sidebar {
                width: 100%;
                height: calc(100vh - 60px);
                position: fixed;
                top: 60px;
                left: 0;
                padding: 15px;
                transform: translateX(-100%);
                z-index: 1001; /* Ensure sidebar stays in front */
                overflow-y: auto;
                background-size: cover;
                background-position: center;
                background-color: #1a1a1a;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }
            .sidebar.active { transform: translateX(0); }
            .sidebar h1 { display: none; }
            .sidebar ul { margin: 0; }
            .sidebar ul li { margin: 20px 0; }
            .sidebar ul li a { font-size: 16px; }
            .dark-theme-container { margin-top: 20px; margin-bottom: 15px; }
            .dark-theme-label { font-size: 16px; }
            .content {
                margin-left: 0;
                padding: 70px 15px 15px 15px;
                overflow-y: auto;
                min-height: 100vh;
            }
            footer { margin-left: 0; padding: 10px 20px; text-align: center; }
            .footer-links a { font-size: 12px; margin: 0 8px; }
            .quiz-section { padding: 20px; }
            .quiz-section h1 { font-size: 24px; }
            .question-text { font-size: 1.2em; }
            .option-btn { font-size: 1em; padding: 12px; }
            .next-btn, .exit-game-btn { font-size: 16px; padding: 12px 25px; }
            .score { font-size: 1.3em; }
            .progress-text { font-size: 1em; }
            .timer-svg { width: 50px; height: 50px; }
            .timer-circle { cx: 25; cy: 25; r: 20; stroke-width: 4; stroke-dasharray: 125.6; }
            .timer-text { font-size: 16px; transform: translate(25px, 31px); }
            .power-up-btn { font-size: 12px; padding: 8px; }
            .difficulty-options { flex-direction: column; align-items: center; }
            .difficulty-card { width: 90%; max-width: 300px; }
            .start-modal-content, .tutorial-modal-content, .result-modal-content { padding: 20px; }
            .start-modal-content h2, .tutorial-modal-content h2, .result-modal-content h2 { font-size: 24px; }
            .tutorial-slide img { width: 100%; max-width: 250px; }
            .tutorial-slide h3 { font-size: 22px; }
            .tutorial-slide p { font-size: 14px; }
            .tutorial-prev, .tutorial-next { font-size: 16px; padding: 8px; }
        }
        /* Moved Effects to Bottom */
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes moveStripes {
            0% { background-position: 0 0; }
            100% { background-position: 30px 0; }
        }
    </style>
</head>
<body>
    <div class="loader-overlay" id="loaderOverlay">
        <div class="loader"></div>
    </div>
    <div class="mobile-nav">
        <a href="HomePage.html" class="logo">Contra E-Crime</a>
        <div class="menu-icon" id="mobileMenuIcon">
            <i class="fas fa-bars"></i>
        </div>
    </div>
    <div class="container">
        <nav class="sidebar" id="sidebar">
            <h1>Contra E-Crime</h1>
            <ul>
                <li><a href="HomePage.html"><img src="https://i.imgur.com/OAHusQp.png" alt="Home">Home</a></li>
                <li><a href="News.html"><img src="https://i.imgur.com/FNALwXX.png" alt="News & Insights">News & Insights</a></li>
                <li><a href="SavedLaws.html"><img src="https://i.imgur.com/VChoqhD.png" alt="Saved Laws">Saved Laws</a></li>
                <li><a href="History.html"><img src="https://i.imgur.com/cnaDfEq.png" alt="Search History">Search History</a></li>
                <li><a href="ContactUs.html"><img src="https://i.imgur.com/T7bI4RJ.png" alt="Contact Us">Contact Us</a></li>
                <li><a href="AboutUs.html"><img src="https://i.imgur.com/lktrzpa.png" alt="About Us">About Us</a></li>
                <li><a href="index.html"><img src="https://i.imgur.com/2jjsgOq.png" alt="Logout">Logout</a></li>
            </ul>
            <div class="dark-theme-container">
                <div class="dark-theme-label">
                    <img src="https://i.imgur.com/vEKpOsq.png" alt="Dark Theme">
                    <span>Dark Theme</span>
                </div>
                <div class="toggle-switch">
                    <label class="switch-label">
                        <input type="checkbox" class="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </nav>
        <main class="content">
            <section class="quiz-section" id="quizSection">
                <div id="particles-js"></div>
                <h1>CyberLaw Quiz Master</h1>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="progress-text" id="progressText"></div>
                <div class="timer-container">
                    <svg class="timer-svg">
                        <circle class="timer-circle" cx="35" cy="35" r="30"></circle>
                    </svg>
                    <span class="timer-text" id="timerText"></span>
                    <div class="power-ups">
                        <button class="power-up-btn" id="extraTime1" title="Add 10 seconds"><i class="fas fa-clock"></i> Extra Time 1</button>
                        <button class="power-up-btn" id="extraTime2" title="Add 10 seconds"><i class="fas fa-clock"></i> Extra Time 2</button>
                        <button class="power-up-btn" id="timeFreeze" title="Freeze Timer"><i class="fas fa-pause"></i> Time Freeze</button>
                    </div>
                </div>
                <div class="question-box" id="questionBox">
                    <div class="question-text" id="questionText"></div>
                    <div class="options" id="options"></div>
                    <div class="explanation" id="explanation"></div>
                </div>
                <button class="next-btn" id="nextBtn"><i class="fas fa-arrow-right"></i> Next Question</button>
                <button class="exit-game-btn" id="exitGameBtn"><i class="fas fa-door-open"></i> Exit Game</button>
                <div class="score" id="score">Score: 0</div>
            </section>
        </main>
        <div class="start-modal" id="startModal">
            <div class="start-modal-content">
                <h2>Welcome to CyberLaw Quiz Master!</h2>
                <p>Select your difficulty level to begin:</p>
                <div class="difficulty-options">
                    <div class="difficulty-card" data-difficulty="easy">
                        <div class="emoji">📜</div>
                        <div class="label">Easy</div>
                        <div class="description">60 seconds per question, basic law questions.</div>
                    </div>
                    <div class="difficulty-card" data-difficulty="medium">
                        <div class="emoji">📜📜</div>
                        <div class="label">Medium</div>
                        <div class="description">45 seconds per question, mixed easy and scenario-based.</div>
                    </div>
                    <div class="difficulty-card" data-difficulty="hard">
                        <div class="emoji">📜📜📜</div>
                        <div class="label">Hard</div>
                        <div class="description">30 seconds per question, advanced details.</div>
                    </div>
                </div>
                <div class="start-modal-actions">
                    <button class="tutorial-btn" id="tutorialBtn" disabled><i class="fas fa-info-circle"></i> Proceed to Tutorial</button>
                    <button class="back-about-btn" id="backAboutBtn"><i class="fas fa-arrow-left"></i> Back to About Us</button>
                </div>
            </div>
        </div>
        <div class="tutorial-modal" id="tutorialModal" style="display: none;">
            <div class="tutorial-modal-content">
                <div class="tutorial-slide" id="slide1">
                    <h3>Welcome to the Quiz!</h3>
                    <img src="https://i.imgur.com/Ho1v1YP.png" alt="Law Book">
                    <p>Test your knowledge of cybercrime laws in the Philippines and worldwide. Answer questions based on legal provisions. Use power-ups like Extra Time or Time Freeze to strategize!</p>
                </div>
                <div class="tutorial-slide" id="slide2">
                    <h3>Gameplay & Power-Ups</h3>
                    <img src="https://i.imgur.com/TCTi8I2.jpeg" alt="Digital Security">
                    <p>Choose Easy (60s), Medium (45s), or Hard (30s). Use two Extra Time power-ups to add 10 seconds each or one Time Freeze to pause the timer and review explanations. Questions are randomized each game. Effects include confetti bursts for correct answers and animations for feedback.</p>
                </div>
                <div class="tutorial-slide" id="slide3">
                    <h3>Scoring & Feedback</h3>
                    <img src="https://i.imgur.com/cvsWr1c.jpeg" alt="Scoreboard">
                    <p>Earn 10 points per correct answer. After using Time Freeze, get an explanation. View detailed results at the end. Exit anytime with the Exit Game button. Effects like button scaling and shaking enhance your experience!</p>
                </div>
                <button class="tutorial-prev" id="tutorialPrev"><i class="fas fa-chevron-left"></i></button>
                <button class="tutorial-next" id="tutorialNext"><i class="fas fa-chevron-right"></i></button>
                <div class="tutorial-nav">
                    <div class="tutorial-dot active" data-slide="1"></div>
                    <div class="tutorial-dot" data-slide="2"></div>
                    <div class="tutorial-dot" data-slide="3"></div>
                </div>
                <div class="tutorial-actions">
                    <button class="back-btn" id="backBtn"><i class="fas fa-arrow-left"></i> Back to Difficulty</button>
                    <button class="start-quiz-btn" id="startQuizBtn"><i class="fas fa-play"></i> Start Quiz Now</button>
                </div>
                <div class="dont-show-again">
                    <input type="checkbox" id="dontShowAgain">
                    <label for="dontShowAgain">Don't show this tutorial again</label>
                </div>
            </div>
        </div>
        <div class="result-modal" id="resultModal" style="display: none;">
            <div class="result-modal-content">
                <h2>Quiz Completed!</h2>
                <p>Your Score: <span id="finalScore"></span></p>
                <div class="result-stats">
                    <div><strong>Accuracy:</strong> <span id="accuracy"></span>%</div>
                    <div><strong>Average Time per Question:</strong> <span id="avgTime"></span>s</div>
                    <div><strong>Difficulty Analysis:</strong> <span id="difficultyAnalysis"></span></div>
                </div>
                <h3>Thinking Level</h3>
                <p id="thinkingLevel"></p>
                <h3>Remarks</h3>
                <p id="remarks"></p>
                <h3>Problem-Solving Skills</h3>
                <p id="problemSolving"></p>
                <h3>Detailed Results</h3>
                <div class="result-summary" id="resultSummary"></div>
                <div class="result-actions">
                    <button class="restart-btn" id="restartBtn"><i class="fas fa-redo"></i> Play Again</button>
                    <button class="exit-btn" id="exitBtn"><i class="fas fa-times"></i> Go Back to Difficulty</button>
                </div>
            </div>
        </div>
        <footer>
            <p>© 2025 Contra E-Crime. All rights reserved.</p>
            <div class="footer-links">
                <a href="PrivacyPolicy.html">Privacy Policy</a>
                <a href="TermsOfUse.html">Terms of Use</a>
                <a href="ContactUs.html">Contact Us</a>
            </div>
        </footer>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCDNmxNOV7rr_qfM_mTeYTaUIkkLvRaf80",
            authDomain: "contra-e-crime.firebaseapp.com",
            projectId: "contra-e-crime",
            storageBucket: "contra-e-crime.firebasestorage.app",
            messagingSenderId: "198995444405",
            appId: "1:198995444405:web:5f8c6eed561461b36034fc",
            measurementId: "G-7Y2E24DD42"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        particlesJS('particles-js', {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: '#ffcc00' },
                shape: { type: 'circle' },
                opacity: { value: 0.5, random: false },
                size: { value: 3, random: true },
                line_linked: { enable: true, distance: 150, color: '#ffcc00', opacity: 0.4, width: 1 },
                move: { enable: true, speed: 2, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false }
            },
            interactivity: {
                detect_on: 'canvas',
                events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' }, resize: true },
                modes: { repulse: { distance: 100, duration: 0.4 }, push: { particles_nb: 4 } }
            },
            retina_detect: true
        });
        const questions = {
            easy: [
                {
                    text: "Which law addresses offenses related to electronic transactions?",
                    answer: "Electronic Commerce Act of 2000 (Republic Act No. 8792)",
                    options: [
                        "Electronic Commerce Act of 2000 (Republic Act No. 8792)",
                        "Anti-Child Pornography Act of 2009 (Republic Act No. 9775)",
                        "Taxation of Electronic Transactions (BIR Revenue Regulation No. 9-2001)",
                        "Data Privacy Act of 2012 (Republic Act No. 10173)"
                    ],
                    explanation: "The Electronic Commerce Act of 2000 (RA 8792) establishes the legal framework for electronic transactions in the Philippines, addressing offenses like hacking and unauthorized access."
                },
                {
                    text: "What does the Anti-Child Pornography Act of 2009 criminalize?",
                    answer: "Production, distribution, and possession of child pornography",
                    options: [
                        "Hacking and cracking electronic systems",
                        "Production, distribution, and possession of child pornography",
                        "Manual filing of tax returns",
                        "Unauthorized access to personal data"
                    ],
                    explanation: "The Anti-Child Pornography Act of 2009 (RA 9775) specifically targets the production, distribution, and possession of child pornography to protect minors from exploitation."
                },
                {
                    text: "Which law regulates the electronic filing of tax returns?",
                    answer: "Taxation of Electronic Transactions (BIR Revenue Regulation No. 9-2001)",
                    options: [
                        "Electronic Commerce Act of 2000 (Republic Act No. 8792)",
                        "Anti-Child Pornography Act of 2009 (Republic Act No. 9775)",
                        "Taxation of Electronic Transactions (BIR Revenue Regulation No. 9-2001)",
                        "Cybercrime Prevention Act of 2012 (Republic Act No. 10175)"
                    ],
                    explanation: "BIR Revenue Regulation No. 9-2001 mandates electronic filing of tax returns for certain taxpayers to streamline tax administration."
                },
                {
                    text: "What is the main focus of the Electronic Commerce Act of 2000?",
                    answer: "Electronic transactions and related offenses",
                    options: [
                        "Electronic transactions and related offenses",
                        "Child pornography prevention",
                        "Taxation of online businesses",
                        "Data privacy protection"
                    ],
                    explanation: "The Electronic Commerce Act of 2000 (RA 8792) focuses on facilitating electronic transactions while penalizing related cybercrimes like online fraud."
                },
                {
                    text: "Which law deals with child-related cybercrimes?",
                    answer: "Anti-Child Pornography Act of 2009 (Republic Act No. 9775)",
                    options: [
                        "Electronic Commerce Act of 2000 (Republic Act No. 8792)",
                        "Anti-Child Pornography Act of 2009 (Republic Act No. 9775)",
                        "Taxation of Electronic Transactions (BIR Revenue Regulation No. 9-2001)",
                        "Anti-Photo and Video Voyeurism Act of 2009 (Republic Act No. 9995)"
                    ],
                    explanation: "The Anti-Child Pornography Act of 2009 (RA 9775) addresses cybercrimes involving child exploitation, such as producing or sharing child pornography."
                },
                {
                    text: "What type of offenses does the Electronic Commerce Act address?",
                    answer: "Hacking, cracking, and unauthorized access",
                    options: [
                        "Hacking, cracking, and unauthorized access",
                        "Child pornography distribution",
                        "Tax evasion through manual filing",
                        "Identity theft and fraud"
                    ],
                    explanation: "The Electronic Commerce Act of 2000 (RA 8792) penalizes offenses like hacking and unauthorized access to electronic systems."
                },
                {
                    text: "Which law was promulgated in 2009 to protect children?",
                    answer: "Anti-Child Pornography Act of 2009 (Republic Act No. 9775)",
                    options: [
                        "Electronic Commerce Act of 2000 (Republic Act No. 8792)",
                        "Anti-Child Pornography Act of 2009 (Republic Act No. 9775)",
                        "Taxation of Electronic Transactions (BIR Revenue Regulation No. 9-2001)",
                        "Data Privacy Act of 2012 (Republic Act No. 10173)"
                    ],
                    explanation: "Promulgated in 2009, the Anti-Child Pornography Act (RA 9775) aims to protect children by criminalizing child pornography activities."
                },
                {
                    text: "What is the purpose of BIR Revenue Regulation No. 9-2001?",
                    answer: "Regulate electronic filing of tax returns",
                    options: [
                        "Prevent child pornography",
                        "Regulate electronic filing of tax returns",
                        "Address hacking and cracking",
                        "Protect personal data privacy"
                    ],
                    explanation: "BIR Revenue Regulation No. 9-2001 regulates the electronic filing of tax returns to enhance efficiency in tax compliance."
                },
                {
                    text: "Which law imposes penalties for online fraud and scams?",
                    answer: "Electronic Commerce Act of 2000 (Republic Act No. 8792)",
                    options: [
                        "Electronic Commerce Act of 2000 (Republic Act No. 8792)",
                        "Anti-Child Pornography Act of 2009 (Republic Act No. 9775)",
                        "Taxation of Electronic Transactions (BIR Revenue Regulation No. 9-2001)",
                        "Anti-Bullying Act of 2013 (Republic Act No. 10627)"
                    ],
                    explanation: "The Electronic Commerce Act of 2000 (RA 8792) imposes penalties for online fraud and scams to ensure trust in electronic transactions."
                },
                {
                    text: "What does the Anti-Child Pornography Act aim to prevent?",
                    answer: "Production and distribution of child pornography",
                    options: [
                        "Production and distribution of child pornography",
                        "Unauthorized access to electronic systems",
                        "Manual tax filing violations",
                        "Online scams and fraud"
                    ],
                    explanation: "The Anti-Child Pornography Act of 2009 (RA 9775) aims to prevent the production and distribution of child pornography to safeguard minors."
                }
            ],
            medium: [
                {
                    text: "What scenario might violate the Electronic Commerce Act of 2000?",
                    answer: "An account on an e-commerce app is hacked, leading to unauthorized orders",
                    options: [
                        "Installing a secret camera in a child's bedroom",
                        "An account on an e-commerce app is hacked, leading to unauthorized orders",
                        "Filing taxes manually despite eFPS mandate",
                        "Sharing personal data without consent"
                    ],
                    explanation: "Hacking an e-commerce account to place unauthorized orders violates the Electronic Commerce Act of 2000 (RA 8792), which addresses unauthorized access and fraud."
                },
                {
                    text: "Which scenario describes a violation of the Anti-Child Pornography Act?",
                    answer: "Installing a secret camera in a child's bedroom to observe them",
                    options: [
                        "Hacking an e-commerce account to place orders",
                        "Installing a secret camera in a child's bedroom to observe them",
                        "Filing taxes manually instead of using eFPS",
                        "Selling counterfeit goods online"
                    ],
                    explanation: "Installing a secret camera to observe a child violates the Anti-Child Pornography Act of 2009 (RA 9775) if used to produce or distribute child pornography."
                },
                {
                    text: "What might happen under BIR Revenue Regulation No. 9-2001?",
                    answer: "An online seller is punished for filing taxes manually",
                    options: [
                        "A hacker is fined for unauthorized access",
                        "A person is imprisoned for child pornography",
                        "An online seller is punished for filing taxes manually",
                        "A company is sued for data breach"
                    ],
                    explanation: "BIR Revenue Regulation No. 9-2001 penalizes taxpayers, like online sellers, for failing to file taxes electronically when required."
                },
                {
                    text: "Which scenario involves the Electronic Commerce Act?",
                    answer: "Expensive products are ordered automatically due to a hacked account",
                    options: [
                        "Expensive products are ordered automatically due to a hacked account",
                        "A secret camera records a child in their bedroom",
                        "An online seller ignores eFPS requirements",
                        "A website leaks user data"
                    ],
                    explanation: "Unauthorized orders due to a hacked account fall under the Electronic Commerce Act of 2000 (RA 8792), which covers cybercrimes like hacking."
                },
                {
                    text: "What action violates the Anti-Child Pornography Act of 2009?",
                    answer: "Observing a child via a secret camera in their bedroom",
                    options: [
                        "Hacking an online shopping account",
                        "Observing a child via a secret camera in their bedroom",
                        "Filing taxes manually despite notices",
                        "Distributing fake news online"
                    ],
                    explanation: "Using a secret camera to observe a child for exploitative purposes violates the Anti-Child Pornography Act of 2009 (RA 9775)."
                },
                {
                    text: "Under which law might an online seller face penalties for manual tax filing?",
                    answer: "Taxation of Electronic Transactions (BIR Revenue Regulation No. 9-2001)",
                    options: [
                        "Electronic Commerce Act of 2000 (Republic Act No. 8792)",
                        "Anti-Child Pornography Act of 2009 (Republic Act No. 9775)",
                        "Taxation of Electronic Transactions (BIR Revenue Regulation No. 9-2001)",
                        "Cybercrime Prevention Act of 2012 (Republic Act No. 10175)"
                    ],
                    explanation: "BIR Revenue Regulation No. 9-2001 imposes penalties for non-compliance with electronic tax filing requirements."
                },
                {
                    text: "What scenario might lead to penalties under the Electronic Commerce Act?",
                    answer: "Unauthorized orders placed due to a hacked e-commerce account",
                    options: [
                        "Unauthorized orders placed due to a hacked e-commerce account",
                        "Recording a child with a hidden camera",
                        "Ignoring eFPS tax filing requirements",
                        "Posting defamatory content online"
                    ],
                    explanation: "The Electronic Commerce Act of 2000 (RA 8792) penalizes unauthorized transactions caused by hacking, such as placing orders without consent."
                },
                {
                    text: "Which scenario is related to the Anti-Child Pornography Act?",
                    answer: "A suspect installs a camera to watch a child in their bedroom",
                    options: [
                        "A suspect installs a camera to watch a child in their bedroom",
                        "An online seller files taxes manually",
                        "A hacker places unauthorized orders",
                        "A company fails to secure user data"
                    ],
                    explanation: "Installing a camera to watch a child for exploitative purposes violates the Anti-Child Pornography Act of 2009 (RA 9775)."
                },
                {
                    text: "What might violate BIR Revenue Regulation No. 9-2001?",
                    answer: "An online seller continuously files taxes manually",
                    options: [
                        "Hacking into an e-commerce platform",
                        "Distributing child pornography",
                        "An online seller continuously files taxes manually",
                        "Sharing personal information without consent"
                    ],
                    explanation: "Continuous manual tax filing by an online seller violates BIR Revenue Regulation No. 9-2001, which mandates electronic filing."
                },
                {
                    text: "Which scenario involves a potential violation of the Electronic Commerce Act?",
                    answer: "A victim's account is hacked, leading to unauthorized purchases",
                    options: [
                        "A victim's account is hacked, leading to unauthorized purchases",
                        "A child is recorded without consent",
                        "An online seller avoids eFPS filing",
                        "A website suffers a data breach"
                    ],
                    explanation: "Hacking leading to unauthorized purchases is a violation of the Electronic Commerce Act of 2000 (RA 8792)."
                }
            ],
            hard: [
                {
                    text: "What is the maximum penalty under the Electronic Commerce Act for violations?",
                    answer: "PHP 1,000,000 or six years imprisonment",
                    options: [
                        "PHP 100,000 and six months imprisonment",
                        "PHP 1,000,000 or six years imprisonment",
                        "Reclusion perpetua and PHP 5,000,000 fine",
                        "Fine up to ₱1,000 and six months imprisonment"
                    ],
                    explanation: "The Electronic Commerce Act of 2000 (RA 8792) specifies a maximum penalty of PHP 1,000,000 or up to six years imprisonment for violations."
                },
                {
                    text: "What penalty does the Anti-Child Pornography Act impose?",
                    answer: "Reclusion perpetua and a fine of PHP 2,000,000 to PHP 5,000,000",
                    options: [
                        "PHP 100,000 and six months to three years imprisonment",
                        "Reclusion perpetua and a fine of PHP 2,000,000 to PHP 5,000,000",
                        "Fine up to ₱1,000 and six months imprisonment",
                        "PHP 1,000,000 or six years imprisonment"
                    ],
                    explanation: "The Anti-Child Pornography Act of 2009 (RA 9775) imposes reclusion perpetua and fines ranging from PHP 2,000,000 to PHP 5,000,000."
                },
                {
                    text: "What are the penalties for third and subsequent offenses under BIR Revenue Regulation No. 9-2001?",
                    answer: "Fine up to ₱1,000 and imprisonment up to 6 months",
                    options: [
                        "PHP 100,000 and six months imprisonment",
                        "Reclusion perpetua and PHP 5,000,000 fine",
                        "Fine up to ₱1,000 and imprisonment up to 6 months",
                        "PHP 1,000,000 or six years imprisonment"
                    ],
                    explanation: "BIR Revenue Regulation No. 9-2001 specifies a fine up to ₱1,000 and up to 6 months imprisonment for third and subsequent offenses."
                },
                {
                    text: "What is the minimum penalty for online fraud under the Electronic Commerce Act?",
                    answer: "PHP 100,000 and six months to three years imprisonment",
                    options: [
                        "PHP 100,000 and six months to three years imprisonment",
                        "Reclusion perpetua and PHP 2,000,000 fine",
                        "Fine up to ₱1,000 and six months imprisonment",
                        "PHP 1,000,000 or six years imprisonment"
                    ],
                    explanation: "The minimum penalty for online fraud under the Electronic Commerce Act of 2000 (RA 8792) is PHP 100,000 and 6 months to 3 years imprisonment."
                },
                {
                    text: "What fine range does the Anti-Child Pornography Act specify?",
                    answer: "PHP 2,000,000 to PHP 5,000,000",
                    options: [
                        "PHP 100,000 to PHP 1,000,000",
                        "PHP 2,000,000 to PHP 5,000,000",
                        "Up to ₱1,000",
                        "PHP 500,000 to PHP 1,000,000"
                    ],
                    explanation: "The Anti-Child Pornography Act of 2009 (RA 9775) specifies fines between PHP 2,000,000 and PHP 5,000,000."
                },
                {
                    text: "Under BIR Revenue Regulation No. 9-2001, what happens to first and second offenses?",
                    answer: "They may be settled through compromise penalties",
                    options: [
                        "They may be settled through compromise penalties",
                        "They result in reclusion perpetua",
                        "They lead to a fine of PHP 1,000,000",
                        "They are punished with six years imprisonment"
                    ],
                    explanation: "First and second offenses under BIR Revenue Regulation No. 9-2001 can be settled through compromise penalties."
                },
                {
                    text: "What is the imprisonment range for online fraud under the Electronic Commerce Act?",
                    answer: "Six months to three years",
                    options: [
                        "Six months to three years",
                        "Up to six months",
                        "Three to six years",
                        "Reclusion perpetua"
                    ],
                    explanation: "The imprisonment range for online fraud under the Electronic Commerce Act of 2000 (RA 8792) is 6 months to 3 years."
                },
                {
                    text: "What penalty does the Anti-Child Pornography Act include alongside a fine?",
                    answer: "Reclusion perpetua",
                    options: [
                        "Six months imprisonment",
                        "Reclusion perpetua",
                        "Three years imprisonment",
                        "Fine only, no imprisonment"
                    ],
                    explanation: "The Anti-Child Pornography Act of 2009 (RA 9775) includes reclusion perpetua alongside its fine penalties."
                },
                {
                    text: "What is the maximum fine for third offenses under BIR Revenue Regulation No. 9-2001?",
                    answer: "₱1,000",
                    options: [
                        "PHP 100,000",
                        "PHP 1,000,000",
                        "₱1,000",
                        "PHP 5,000,000"
                    ],
                    explanation: "The maximum fine for third offenses under BIR Revenue Regulation No. 9-2001 is ₱1,000."
                },
                {
                    text: "What is the maximum imprisonment for violations under the Electronic Commerce Act?",
                    answer: "Six years",
                    options: [
                        "Six months",
                        "Three years",
                        "Six years",
                        "Reclusion perpetua"
                    ],
                    explanation: "The maximum imprisonment for violations under the Electronic Commerce Act of 2000 (RA 8792) is six years."
                }
            ]
        };
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const mobileMenuIcon = document.getElementById('mobileMenuIcon');
        const sidebar = document.getElementById('sidebar');
        const loaderOverlay = document.getElementById('loaderOverlay');
        const quizSection = document.getElementById('quizSection');
        const startModal = document.getElementById('startModal');
        const tutorialModal = document.getElementById('tutorialModal');
        const tutorialBtn = document.getElementById('tutorialBtn');
        const backBtn = document.getElementById('backBtn');
        const startQuizBtn = document.getElementById('startQuizBtn');
        const dontShowAgain = document.getElementById('dontShowAgain');
        const difficultyCards = document.querySelectorAll('.difficulty-card');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const timerText = document.getElementById('timerText');
        const timerCircle = document.querySelector('.timer-circle');
        const questionText = document.getElementById('questionText');
        const options = document.getElementById('options');
        const explanation = document.getElementById('explanation');
        const nextBtn = document.getElementById('nextBtn');
        const exitGameBtn = document.getElementById('exitGameBtn');
        const scoreDisplay = document.getElementById('score');
        const resultModal = document.getElementById('resultModal');
        const finalScore = document.getElementById('finalScore');
        const accuracyDisplay = document.getElementById('accuracy');
        const avgTimeDisplay = document.getElementById('avgTime');
        const difficultyAnalysis = document.getElementById('difficultyAnalysis');
        const thinkingLevel = document.getElementById('thinkingLevel');
        const remarks = document.getElementById('remarks');
        const problemSolving = document.getElementById('problemSolving');
        const resultSummary = document.getElementById('resultSummary');
        const restartBtn = document.getElementById('restartBtn');
        const exitBtn = document.getElementById('exitBtn');
        const backAboutBtn = document.getElementById('backAboutBtn');
        const tutorialSlides = document.querySelectorAll('.tutorial-slide');
        const tutorialDots = document.querySelectorAll('.tutorial-dot');
        const tutorialPrev = document.getElementById('tutorialPrev');
        const tutorialNext = document.getElementById('tutorialNext');
        const extraTime1 = document.getElementById('extraTime1');
        const extraTime2 = document.getElementById('extraTime2');
        const timeFreeze = document.getElementById('timeFreeze');
        let currentQuestion = 0;
        let score = 0;
        let timeLeft = 45;
        let timerInterval;
        let selectedDifficulty = null;
        const totalQuestions = 10;
        let userAnswers = [];
        let timeTakenPerQuestion = [];
        let currentQuestionSet = [];
        let currentSlide = 1;
        let powerUps = { extraTime1: true, extraTime2: true, timeFreeze: true };
        let isTimeStopped = false;
        const sounds = {
            start: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_2e5d6c2f8e.mp3'], volume: 0.5 }),
            correct: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_2e5d6c2f8e.mp3'], volume: 0.5 }),
            wrong: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_4d7d1c55f9.mp3'], volume: 0.5 }),
            complete: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_8d1f7f1e9e.mp3'], volume: 0.5 }),
            powerUp: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_2e5d6c2f8e.mp3'], volume: 0.5 })
        };
        if (localStorage.getItem('darkTheme') === 'enabled') {
            body.classList.add('dark-theme');
            themeToggle.checked = true;
        }
        themeToggle.addEventListener('change', function() {
            body.classList.toggle('dark-theme');
            localStorage.setItem('darkTheme', this.checked ? 'enabled' : 'disabled');
        });
        mobileMenuIcon.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            const icon = mobileMenuIcon.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
        });
        document.querySelectorAll('a[href]:not([href^="#"])').forEach(link => {
            link.addEventListener('click', function(e) {
                if (!this.href.includes(window.location.hostname) && !this.href.startsWith('mailto:')) return;
                e.preventDefault();
                loaderOverlay.classList.add('active');
                setTimeout(() => { window.location.href = this.href; }, 150);
            });
        });
        backAboutBtn.addEventListener('click', () => {
            loaderOverlay.classList.add('active');
            setTimeout(() => { window.location.href = 'AboutUs.html'; }, 150);
        });
        difficultyCards.forEach(card => {
            card.addEventListener('click', function() {
                selectedDifficulty = this.dataset.difficulty;
                difficultyCards.forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                tutorialBtn.disabled = false;
                timeLeft = selectedDifficulty === 'easy' ? 60 : selectedDifficulty === 'medium' ? 45 : 30;
            });
        });
        function showSlide(slideNumber) {
            tutorialSlides.forEach(slide => slide.classList.remove('active'));
            tutorialDots.forEach(dot => dot.classList.remove('active'));
            document.getElementById(`slide${slideNumber}`).classList.add('active');
            document.querySelector(`.tutorial-dot[data-slide="${slideNumber}"]`).classList.add('active');
            currentSlide = slideNumber;
            tutorialPrev.style.display = currentSlide === 1 ? 'none' : 'block';
            tutorialNext.style.display = currentSlide === 3 ? 'none' : 'block';
        }
        tutorialDots.forEach(dot => {
            dot.addEventListener('click', function() {
                showSlide(parseInt(this.dataset.slide));
            });
        });
        tutorialPrev.addEventListener('click', () => {
            if (currentSlide > 1) showSlide(currentSlide - 1);
        });
        tutorialNext.addEventListener('click', () => {
            if (currentSlide < 3) showSlide(currentSlide + 1);
        });
        tutorialBtn.addEventListener('click', () => {
            startModal.style.display = 'none';
            if (localStorage.getItem('dontShowTutorial') === 'true' && dontShowAgain.checked) {
                startQuiz();
            } else {
                tutorialModal.style.display = 'flex';
                showSlide(1);
            }
        });
        backBtn.addEventListener('click', () => {
            tutorialModal.style.display = 'none';
            startModal.style.display = 'flex';
        });
        startQuizBtn.addEventListener('click', () => {
            if (!selectedDifficulty) {
                alert('Please select a difficulty level first!');
                tutorialModal.style.display = 'none';
                startModal.style.display = 'flex';
                return;
            }
            if (dontShowAgain.checked) {
                localStorage.setItem('dontShowTutorial', 'true');
            }
            tutorialModal.style.display = 'none';
            try {
                startQuiz();
            } catch (error) {
                console.error('Error starting quiz:', error);
                alert('Failed to start the quiz. Please try again or check the console for errors.');
                startModal.style.display = 'flex';
            }
        });
function shuffleArray(array) {
    // Input validation
    if (!Array.isArray(array) || array.length === 0) {
        return array;
    }
    // Fisher-Yates shuffle algorithm
    for (let i = array.length - 1; i >= 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        // Swap elements using a temporary variable (for broader compatibility)
        const temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
    return array;
}
        function startQuiz() {
            if (!sounds.start) {
                console.warn('Sound not loaded, proceeding without sound.');
            } else {
                sounds.start.play();
            }
            powerUps = { extraTime1: true, extraTime2: true, timeFreeze: true };
            extraTime1.disabled = false;
            extraTime2.disabled = false;
            timeFreeze.disabled = false;

            if (!questions[selectedDifficulty]) {
                throw new Error(`No questions available for difficulty: ${selectedDifficulty}`);
            }

            if (selectedDifficulty === 'medium') {
                const easyQuestions = shuffleArray([...questions.easy]).slice(0, 5);
                const mediumQuestions = shuffleArray([...questions.medium]).slice(0, 5);
                currentQuestionSet = [...easyQuestions, ...mediumQuestions];
            } else {
                currentQuestionSet = shuffleArray([...questions[selectedDifficulty]]).slice(0, totalQuestions);
            }

            if (currentQuestionSet.length < totalQuestions) {
                throw new Error(`Not enough questions for difficulty: ${selectedDifficulty}`);
            }

            currentQuestion = 0;
            score = 0;
            userAnswers = [];
            timeTakenPerQuestion = [];
            scoreDisplay.textContent = `Score: ${score}`;
            quizSection.classList.add('visible');
            loadQuestion();
            startTimer();
        }

        function startTimer() {
            timerText.textContent = timeLeft;
            timerCircle.style.strokeDashoffset = 0;
            clearInterval(timerInterval);
            if (!isTimeStopped) {
                timerInterval = setInterval(() => {
                    if (isTimeStopped) return;
                    timeLeft--;
                    timerText.textContent = timeLeft;
                    const offset = (188 * (timeLeft / (selectedDifficulty === 'easy' ? 60 : selectedDifficulty === 'medium' ? 45 : 30)));
                    timerCircle.style.strokeDashoffset = 188 - offset;
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        handleTimeout();
                    }
                }, 1000);
            }
        }

        extraTime1.addEventListener('click', () => {
            if (powerUps.extraTime1) {
                sounds.powerUp.play();
                timeLeft += 10;
                timerText.textContent = timeLeft;
                powerUps.extraTime1 = false;
                extraTime1.disabled = true;
                startTimer();
            }
        });

        extraTime2.addEventListener('click', () => {
            if (powerUps.extraTime2) {
                sounds.powerUp.play();
                timeLeft += 10;
                timerText.textContent = timeLeft;
                powerUps.extraTime2 = false;
                extraTime2.disabled = true;
                startTimer();
            }
        });

        timeFreeze.addEventListener('click', () => {
            if (powerUps.timeFreeze) {
                sounds.powerUp.play();
                isTimeStopped = true;
                clearInterval(timerInterval);
                powerUps.timeFreeze = false;
                timeFreeze.disabled = true;
                options.querySelectorAll('.option-btn').forEach(btn => btn.classList.add('disabled'));
                explanation.classList.add('visible');
            }
        });

        function handleTimeout() {
            userAnswers.push({ question: currentQuestionSet[currentQuestion].text, answer: 'No answer', correct: false });
            timeTakenPerQuestion.push(selectedDifficulty === 'easy' ? 60 : selectedDifficulty === 'medium' ? 45 : 30);
            explanation.textContent = currentQuestionSet[currentQuestion].explanation;
            explanation.classList.add('visible');
            options.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.add('disabled');
                if (btn.textContent === currentQuestionSet[currentQuestion].answer) {
                    btn.classList.add('correct');
                }
            });
            nextBtn.classList.add('visible');
            exitGameBtn.classList.add('visible');
        }

        function loadQuestion() {
            const question = currentQuestionSet[currentQuestion];
            questionText.textContent = question.text;
            options.innerHTML = '';
            explanation.classList.remove('visible');
            nextBtn.classList.remove('visible');
            exitGameBtn.classList.remove('visible');
            isTimeStopped = false;
            timeLeft = selectedDifficulty === 'easy' ? 60 : selectedDifficulty === 'medium' ? 45 : 30;
            startTimer();

            const startTime = Date.now();
            progressBar.style.width = `${((currentQuestion + 1) / totalQuestions) * 100}%`;
            progressText.textContent = `Question ${currentQuestion + 1} of ${totalQuestions}`;

            shuffleArray(question.options).forEach(option => {
                const button = document.createElement('button');
                button.classList.add('option-btn');
                button.textContent = option;
                button.addEventListener('click', () => {
                    const timeTaken = (Date.now() - startTime) / 1000;
                    timeTakenPerQuestion.push(timeTaken);
                    clearInterval(timerInterval);
                    options.querySelectorAll('.option-btn').forEach(btn => btn.classList.add('disabled'));
                    const isCorrect = option === question.answer;
                    userAnswers.push({ question: question.text, answer: option, correct: isCorrect });
                    if (isCorrect) {
                        score += 10;
                        scoreDisplay.textContent = `Score: ${score}`;
                        button.classList.add('correct');
                        sounds.correct.play();
                        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                    } else {
                        button.classList.add('wrong');
                        sounds.wrong.play();
                        options.querySelectorAll('.option-btn').forEach(btn => {
                            if (btn.textContent === question.answer) {
                                btn.classList.add('correct');
                            }
                        });
                    }
                    explanation.textContent = question.explanation;
                    explanation.classList.add('visible');
                    nextBtn.classList.add('visible');
                    exitGameBtn.classList.add('visible');
                });
                options.appendChild(button);
            });
        }

        nextBtn.addEventListener('click', () => {
            currentQuestion++;
            if (currentQuestion < totalQuestions) {
                loadQuestion();
            } else {
                showResults();
            }
        });

        exitGameBtn.addEventListener('click', () => {
            clearInterval(timerInterval);
            quizSection.classList.remove('visible');
            startModal.style.display = 'flex';
            currentQuestion = 0;
            score = 0;
            scoreDisplay.textContent = `Score: ${score}`;
            progressBar.style.width = '0%';
            progressText.textContent = '';
        });

        restartBtn.addEventListener('click', () => {
            resultModal.style.display = 'none';
            startQuiz();
        });

        exitBtn.addEventListener('click', () => {
            resultModal.style.display = 'none';
            startModal.style.display = 'flex';
            currentQuestion = 0;
            score = 0;
            scoreDisplay.textContent = `Score: ${score}`;
            progressBar.style.width = '0%';
            progressText.textContent = '';
        });

        function showResults() {
            sounds.complete.play();
            quizSection.classList.remove('visible');
            resultModal.style.display = 'flex';
            finalScore.textContent = score;
            const correctAnswers = userAnswers.filter(answer => answer.correct).length;
            const accuracy = (correctAnswers / totalQuestions) * 100;
            accuracyDisplay.textContent = accuracy.toFixed(2);
            const avgTime = timeTakenPerQuestion.reduce((a, b) => a + b, 0) / timeTakenPerQuestion.length;
            avgTimeDisplay.textContent = avgTime.toFixed(2);

            let difficultyMessage = '';
            if (selectedDifficulty === 'easy') {
                difficultyMessage = 'You handled basic cybercrime law questions well.';
            } else if (selectedDifficulty === 'medium') {
                difficultyMessage = 'You managed a mix of basic and scenario-based questions effectively.';
            } else {
                difficultyMessage = 'You tackled advanced cybercrime law questions with confidence.';
            }
            difficultyAnalysis.textContent = difficultyMessage;

            let thinkingMessage = '';
            if (accuracy >= 80) {
                thinkingMessage = 'You demonstrate strong analytical thinking, with a deep understanding of cybercrime laws.';
            } else if (accuracy >= 50) {
                thinkingMessage = 'You show moderate analytical skills, with room to deepen your legal knowledge.';
            } else {
                thinkingMessage = 'Your analytical thinking needs improvement; consider reviewing cybercrime laws in detail.';
            }
            thinkingLevel.textContent = thinkingMessage;

            let remarksMessage = '';
            if (score >= 80) {
                remarksMessage = 'Excellent performance! You have a solid grasp of cybercrime laws.';
            } else if (score >= 50) {
                remarksMessage = 'Good effort! You understand the basics but can improve on details.';
            } else {
                remarksMessage = 'Needs improvement. Focus on studying cybercrime laws more thoroughly.';
            }
            remarks.textContent = remarksMessage;

            let problemSolvingMessage = '';
            if (avgTime <= 15) {
                problemSolvingMessage = 'You solve problems quickly, showing excellent decision-making skills.';
            } else if (avgTime <= 30) {
                problemSolvingMessage = 'You have decent problem-solving skills, with a balanced approach to decision-making.';
            } else {
                problemSolvingMessage = 'Your problem-solving speed could improve; try practicing under timed conditions.';
            }
            problemSolving.textContent = problemSolvingMessage;

            resultSummary.innerHTML = '';
            userAnswers.forEach((answer, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('result-summary');
                questionDiv.innerHTML = `
                    <div class="question">Question ${index + 1}: ${answer.question}</div>
                    <div class="user-answer">Your Answer: ${answer.answer}</div>
                    <div class="correct-answer">Correct Answer: ${currentQuestionSet[index].answer}</div>
                    <div class="time-taken">Time Taken: ${timeTakenPerQuestion[index].toFixed(2)}s</div>
                `;
                resultSummary.appendChild(questionDiv);
            });
        }

        window.addEventListener('load', () => {
            loaderOverlay.classList.remove('active');
        });
    </script>
</body>
</html>