<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberLaw Quiz Master - Contra E-Crime</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/Dccn8pc.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body, html {
            min-height: 100vh; margin: 0; padding: 0;
            font-family: 'Montserrat', sans-serif; background-color: #f7f7f7;
            transition: background-color 0.3s ease, color 0.3s ease;
            overflow-x: hidden;
        }
        .loader-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.7); display: flex;
            justify-content: center; align-items: center; z-index: 9999;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .loader-overlay.active { opacity: 1; pointer-events: all; }
        .loader {
            width: 48px; height: 48px; border: 5px solid #FFF;
            border-bottom-color: transparent; border-radius: 50%;
            display: inline-block; box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .dark-theme .loader {
            border-color: #d7b15c; border-bottom-color: transparent;
        }
        .container {
            display: flex; min-height: 100vh; flex-direction: column;
            position: relative; overflow: hidden;
        }
        .parallax-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #f7f7f7 0%, #e0e0e0 100%);
            z-index: -1; transition: background 0.3s ease;
        }
        .parallax-layer {
            position: absolute; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            opacity: 0.2; transition: transform 0.1s ease;
        }
        .parallax-layer-1 { background-image: url('https://i.imgur.com/bNRxAhZ.png'); transform: translateZ(-1px) scale(1.1); }
        .dark-theme .parallax-bg { background: linear-gradient(135deg, #28292c 0%, #1a1a1a 100%); }
        .dark-theme .parallax-layer-1 { opacity: 0.1; }
        .sidebar {
            width: 290px; background-image: url('https://i.imgur.com/bNRxAhZ.png');
            background-size: cover; background-position: center;
            background-color: #1a1a1a; color: white; padding: 20px;
            height: 100vh; position: fixed; transition: transform 0.3s ease;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
        }
        .sidebar h1 {
            text-align: center; margin-bottom: 30px; font-size: 24px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }
        .sidebar ul { list-style-type: none; padding: 0; }
        .sidebar ul li { margin: 50px 0; position: relative; }
        .sidebar ul li a {
            color: white; text-decoration: none; font-size: 18px;
            display: flex; align-items: center; gap: 10px; padding: 5px 0;
        }
        .sidebar ul li a img {
            width: 30px; height: 30px; transition: transform 0.3s ease;
        }
        .sidebar ul li a:not(.dark-theme-label a) {
            transition: all 0.3s ease; position: relative;
        }
        .sidebar ul li a:not(.dark-theme-label a):hover {
            color: #d7b15c; transform: translateX(5px);
        }
        .sidebar ul li a:not(.dark-theme-label a)::after {
            content: ''; position: absolute; width: 0; height: 2px;
            bottom: -10px; left: 0; background-color: #d7b15c;
            transition: width 0.3s ease;
        }
        .sidebar ul li a:not(.dark-theme-label a):hover::after {
            width: 95%;
        }
        .dark-theme .sidebar ul li a:not(.dark-theme-label a):hover { color: #d7b15c; }
        .dark-theme-container {
            display: flex; align-items: center; justify-content: space-between;
            margin-top: 20px; padding: 10px; background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        .dark-theme-label {
            display: flex; align-items: center; gap: 10px; font-size: 18px;
        }
        .dark-theme-label img {
            width: 30px; height: 30px; border-radius: 50%;
            transition: transform 0.3s ease;
        }
        .dark-theme-label:hover img { transform: rotate(360deg); }
        .toggle-switch {
            position: relative; width: 60px; height: 30px;
        }
        .switch-label {
            position: absolute; width: 100%; height: 100%;
            background-color: #28292c; border-radius: 25px;
            cursor: pointer; border: 3px solid #28292c;
        }
        .checkbox { position: absolute; display: none; }
        .slider {
            position: absolute; width: 100%; height: 100%;
            border-radius: 25px; transition: 0.3s;
        }
        .checkbox:checked ~ .slider { background-color: #d8dbe0; }
        .slider::before {
            content: ""; position: absolute; top: 3px; left: 3px;
            width: 20px; height: 20px; border-radius: 50%;
            box-shadow: inset 8px -3px 0px 0px #d8dbe0;
            background-color: #28292c; transition: 0.3s;
        }
        .checkbox:checked ~ .slider::before {
            transform: translateX(30px); background-color: #28292c;
            box-shadow: none;
        }
        .content {
            flex: 1; margin-left: 290px; padding: 50px 30px 30px 30px;
            position: relative; background: linear-gradient(135deg, #f7f7f7 0%, #e0e0e0 100%);
            transition: background-color 0.3s ease, margin-left 0.3s ease;
            overflow-y: auto;
        }
        .content::before {
            content: ''; position: absolute; top: 0; left: 0;
            width: 100%; height: 100%; background-color: rgba(200, 200, 200, 0.1);
            z-index: 0;
        }
        .header {
            display: flex; justify-content: flex-end; margin-bottom: 20px;
            position: relative; z-index: 1;
        }
        .quiz-section {
            position: relative; z-index: 1; max-width: 900px;
            margin: 0 auto; background: #fff; border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); padding: 40px;
            opacity: 0; transform: scale(0.95); transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .quiz-section.visible {
            opacity: 1; transform: scale(1);
        }
        .quiz-section h1 {
            font-size: 36px; color: #333; margin-bottom: 20px;
            text-align: center; border-bottom: 3px solid #8B0000;
            padding-bottom: 10px; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        .start-modal, .result-modal, .tutorial-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7); display: flex;
            align-items: center; justify-content: center; z-index: 1000;
        }
        .start-modal-content, .result-modal-content, .tutorial-modal-content {
            background: #fff; padding: 30px; border-radius: 15px;
            text-align: center; width: 90%; max-width: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: zoomIn 0.5s ease; overflow-y: auto; max-height: 80vh;
        }
        .start-modal-content h2, .result-modal-content h2, .tutorial-modal-content h2 {
            font-size: 28px; color: #1e3c72; margin-bottom: 20px;
        }
        .difficulty-options {
            display: flex; justify-content: center; gap: 20px;
            margin-bottom: 30px; flex-wrap: wrap;
        }
        .difficulty-btn {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: #fff; border: none; padding: 15px 25px;
            border-radius: 10px; font-size: 18px; cursor: pointer;
            transition: all 0.3s ease; display: flex; align-items: center;
            gap: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .difficulty-btn:hover {
            transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        .start-btn, .restart-btn, .close-btn, .hint-btn {
            background: linear-gradient(135deg, #ffcc00, #e6b800);
            color: #1e3c72; border: none; padding: 15px 30px;
            border-radius: 10px; font-size: 18px; font-weight: 600;
            cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); margin: 10px;
        }
        .start-btn:hover, .restart-btn:hover, .close-btn:hover, .hint-btn:hover {
            transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        .progress-text {
            font-size: 1.2em; margin-bottom: 10px; text-align: center;
            color: #333; font-weight: 600; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        .progress-circle {
            width: 100px; height: 100px; margin: 20px auto;
            background: conic-gradient(#4a90e2 0% 100%, #ddd 100% 0%);
            border-radius: 50%; display: flex; align-items: center;
            justify-content: center; position: relative;
        }
        .progress-circle::before {
            content: ''; position: absolute; width: 90px; height: 90px;
            background: #fff; border-radius: 50%; z-index: 1;
        }
        .progress-text-inside {
            position: absolute; font-size: 1.1em; color: #1e3c72;
            z-index: 2; font-weight: 600;
        }
        .timer-container {
            display: flex; justify-content: center; margin-bottom: 20px;
            position: relative;
        }
        .timer-svg {
            width: 80px; height: 80px; transform: rotate(-90deg);
        }
        .timer-circle {
            fill: none; stroke: #ffcc00; stroke-width: 6;
            stroke-dasharray: 188; stroke-dashoffset: 0;
            transition: stroke-dashoffset 1s linear;
        }
        .timer-text {
            position: absolute; font-size: 20px; color: #ffcc00;
            font-weight: 600; transform: translate(40px, 50px);
        }
        .question-box {
            background: linear-gradient(135deg, #f9f9f9, #e0e0e0);
            color: #1e3c72; padding: 25px; border-radius: 10px;
            margin-bottom: 20px; animation: slideIn 0.5s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); position: relative;
            overflow: hidden;
        }
        .question-box::before {
            content: ''; position: absolute; top: -50%; left: -50%;
            width: 200%; height: 200%; background: rgba(255, 255, 255, 0.2);
            animation: rotateBackground 10s linear infinite;
            z-index: 0;
        }
        @keyframes rotateBackground {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .question-text {
            font-size: 1.4em; margin-bottom: 20px; text-align: center;
            font-weight: 500; position: relative; z-index: 1;
        }
        .options {
            display: grid; grid-template-columns: repeat(2, 1fr);
            gap: 15px; position: relative; z-index: 1;
        }
        .option-btn {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: #fff; border: none; padding: 15px; border-radius: 8px;
            font-size: 1em; cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1); position: relative;
            overflow: hidden;
        }
        .option-btn::before {
            content: ''; position: absolute; top: 0; left: -100%;
            width: 100%; height: 100%; background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .option-btn:hover::before {
            left: 0;
        }
        .option-btn:hover {
            transform: scale(1.05); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .option-btn.correct {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            animation: pulse 0.5s;
        }
        .option-btn.wrong {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            animation: shake 0.5s;
        }
        .option-btn.disabled {
            pointer-events: none; opacity: 0.6;
        }
        .score {
            font-size: 1.5em; margin: 20px 0; text-align: center;
            color: #333; font-weight: 600; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        .stats-dashboard {
            display: flex; justify-content: space-around; margin: 20px 0;
            background: #f9f9f9; padding: 15px; border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .stats-item {
            text-align: center;
        }
        .stats-item h4 { font-size: 1em; color: #666; margin-bottom: 5px; }
        .stats-item p { font-size: 1.2em; color: #1e3c72; font-weight: 600; }
        .result-modal-content {
            max-height: 80vh; overflow-y: auto;
        }
        .result-modal-content h3 {
            font-size: 22px; color: #1e3c72; margin: 20px 0 10px;
        }
        .result-modal-content p {
            font-size: 16px; color: #666; line-height: 1.6;
            margin-bottom: 15px;
        }
        .correct-answers {
            background: #f9f9f9; padding: 15px; border-radius: 8px;
            margin-bottom: 20px;
        }
        .correct-answers div {
            margin: 10px 0; padding: 10px; background: #fff;
            border-radius: 5px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .correct-answers .question {
            font-weight: 600; color: #1e3c72;
        }
        .correct-answers .answer {
            color: #2ecc71; margin-top: 5px;
        }
        .hint-box {
            background: #fff; padding: 10px; border-radius: 5px;
            margin-top: 10px; display: none; color: #666;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        body.dark-theme { background-color: #121212; color: #e0e0e0; }
        .dark-theme .content { background: linear-gradient(135deg, #28292c 0%, #1a1a1a 100%); }
        .dark-theme .content::before { background-color: rgba(40, 41, 44, 0.9); }
        .dark-theme .quiz-section { background: #333; }
        .dark-theme .quiz-section h1 { color: #d8dbe0; }
        .dark-theme .progress-text { color: #d8dbe0; }
        .dark-theme .question-box { background: linear-gradient(135deg, #444, #333); color: #d8dbe0; }
        .dark-theme .score { color: #d8dbe0; }
        .dark-theme .start-modal-content, .dark-theme .result-modal-content, .dark-theme .tutorial-modal-content { background: #333; color: #d8dbe0; }
        .dark-theme .start-modal-content h2, .dark-theme .result-modal-content h2, .dark-theme .tutorial-modal-content h2 { color: #d8dbe0; }
        .dark-theme .result-modal-content h3 { color: #d8dbe0; }
        .dark-theme .result-modal-content p { color: #b0b0b0; }
        .dark-theme .correct-answers { background: #444; }
        .dark-theme .correct-answers .question { color: #d8dbe0; }
        .dark-theme .correct-answers .answer { color: #2ecc71; }
        .dark-theme .hint-box { background: #444; color: #b0b0b0; }
        .dark-theme .stats-dashboard { background: #444; }
        .dark-theme .stats-item h4 { color: #b0b0b0; }
        .dark-theme .stats-item p { color: #d8dbe0; }
        .mobile-nav {
            display: none; background-image: url('https://i.imgur.com/bNRxAhZ.png');
            padding: 15px; position: fixed; width: 100%; z-index: 1000;
        }
        .mobile-nav .logo {
            color: white; font-size: 20px; font-weight: bold;
            text-decoration: none;
        }
        .mobile-nav .menu-icon {
            color: white; font-size: 24px; cursor: pointer;
            position: absolute; right: 15px; top: 15px;
        }
        footer {
            background-color: #333; color: white; padding: 15px 30px;
            text-align: center; margin-left: 290px; z-index: 1;
            transition: margin-left 0.3s ease; box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
        }
        footer p { margin: 0; font-size: 14px; }
        .footer-links { margin-top: 5px; }
        .footer-links a {
            color: #d7b15c; text-decoration: none; margin: 0 10px;
            font-size: 14px; transition: color 0.3s ease;
        }
        .footer-links a:hover { color: #ffd700; text-decoration: underline; }
        .dark-theme footer { background-color: #1a1a1a; }
        @media (max-width: 1024px) {
            .sidebar { width: 250px; }
            .sidebar h1 { font-size: 22px; }
            .sidebar ul li a { font-size: 16px; }
            .dark-theme-label { font-size: 16px; }
            .content { margin-left: 250px; }
            footer { margin-left: 250px; }
            .quiz-section h1 { font-size: 32px; }
        }
        @media (max-width: 768px) {
            .sidebar { width: 200px; padding: 10px; }
            .sidebar h1 { font-size: 20px; }
            .sidebar ul li a { font-size: 14px; }
            .dark-theme-label { font-size: 14px; }
            .content { margin-left: 200px; }
            footer { margin-left: 200px; }
            .quiz-section { padding: 30px; }
            .options { grid-template-columns: 1fr; }
        }
        @media (max-width: 480px) {
            .container { flex-direction: column; }
            .mobile-nav { display: block; }
            .sidebar {
                width: 100%; height: auto; position: fixed;
                padding: 15px; transform: translateX(-100%);
                z-index: 999; top: 60px; height: calc(100vh - 60px);
                overflow-y: auto; background-size: cover;
                background-position: center; background-color: #1a1a1a;
                display: flex; flex-direction: column; justify-content: space-between;
            }
            .sidebar.active { transform: translateX(0); }
            .sidebar h1 { display: none; }
            .sidebar ul { margin: 0; }
            .sidebar ul li { margin: 20px 0; }
            .sidebar ul li a { font-size: 16px; }
            .dark-theme-container { margin-top: 20px; margin-bottom: 15px; }
            .dark-theme-label { font-size: 16px; }
            .content { margin-left: 0; }
            footer { margin-left: 0; padding: 10px 20px; text-align: center; }
            footer p { font-size: 12px; }
            .footer-links a { font-size: 12px; margin: 0 8px; }
            .quiz-section { padding: 20px; }
            .quiz-section h1 { font-size: 28px; }
        }
    </style>
</head>
<body>
    <div class="loader-overlay" id="loaderOverlay">
        <div class="loader"></div>
    </div>
    <div class="mobile-nav">
        <a href="HomePage.html" class="logo">Contra E-Crime</a>
        <div class="menu-icon" id="mobileMenuIcon">
            <i class="fas fa-bars"></i>
        </div>
    </div>
    <div class="parallax-bg">
        <div class="parallax-layer parallax-layer-1"></div>
    </div>

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <h1>Contra E-Crime</h1>
            <ul>
                <li><a href="HomePage.html"><img src="https://i.imgur.com/OAHusQp.png" alt="Home">Home</a></li>
                <li><a href="News.html" target="_self" onclick="return true;"><img src="https://i.imgur.com/FNALwXX.png" alt="News & Insights">News & Insights</a></li>
                <li><a href="SavedLaws.html"><img src="https://i.imgur.com/VChoqhD.png" alt="Saved Laws">Saved Laws</a></li>
                <li><a href="History.html"><img src="https://i.imgur.com/cnaDfEq.png" alt="Search History">Search History</a></li>
                <li><a href="ContactUs.html"><img src="https://i.imgur.com/T7bI4RJ.png" alt="Contact Us">Contact Us</a></li>
                <li><a href="AboutUs.html"><img src="https://i.imgur.com/lktrzpa.png" alt="About Us">About Us</a></li>
                <li><a href="index.html"><img src="https://i.imgur.com/2jjsgOq.png" alt="Logout">Logout</a></li>
            </ul>
            <div class="dark-theme-container">
                <div class="dark-theme-label">
                    <img src="https://i.imgur.com/vEKpOsq.png" alt="Dark Theme">
                    <span>Dark Theme</span>
                </div>
                <div class="toggle-switch">
                    <label class="switch-label">
                        <input type="checkbox" class="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </nav>
        <main class="content">
            <div class="header"></div>
            <section class="quiz-section" id="quizSection">
                <h1>CyberLaw Quiz Master</h1>
                <div class="progress-circle" id="progressCircle">
                    <span class="progress-text-inside" id="progressTextInside"></span>
                </div>
                <div class="timer-container">
                    <svg class="timer-svg">
                        <circle class="timer-circle" cx="40" cy="40" r="30"></circle>
                    </svg>
                    <span class="timer-text" id="timerText"></span>
                </div>
                <div class="question-box" id="questionBox">
                    <div class="question-text" id="questionText"></div>
                    <div class="options" id="options"></div>
                    <div class="hint-box" id="hintBox"></div>
                </div>
                <div class="score" id="score">Score: 0</div>
                <div class="stats-dashboard" id="statsDashboard">
                    <div class="stats-item"><h4>Accuracy</h4><p id="accuracyStat">0%</p></div>
                    <div class="stats-item"><h4>Avg Time</h4><p id="avgTimeStat">0s</p></div>
                    <div class="stats-item"><h4>Streak</h4><p id="streakStat">0</p></div>
                </div>
                <button class="hint-btn" id="hintBtn">Get Hint</button>
            </section>
        </main>
        <div class="start-modal" id="startModal">
            <div class="start-modal-content">
                <h2>Welcome to CyberLaw Quiz Master!</h2>
                <p>Select your difficulty level to begin:</p>
                <div class="difficulty-options">
                    <button class="difficulty-btn" data-difficulty="easy">Easy 😊</button>
                    <button class="difficulty-btn" data-difficulty="medium">Medium 😐</button>
                    <button class="difficulty-btn" data-difficulty="hard">Hard 😓</button>
                </div>
                <button class="start-btn" id="startBtn" style="display: none;">Start Quiz</button>
                <button class="close-btn" id="closeTutorialBtn" style="display: none;">Close Tutorial</button>
            </div>
        </div>
        <div class="result-modal" id="resultModal" style="display: none;">
            <div class="result-modal-content">
                <h2>Quiz Completed!</h2>
                <p>Your Score: <span id="finalScore"></span></p>
                <h3>Thinking Level</h3>
                <p id="thinkingLevel"></p>
                <h3>Remarks</h3>
                <p id="remarks"></p>
                <h3>Problem-Solving Skills</h3>
                <p id="problemSolving"></p>
                <h3>Correct Answers</h3>
                <div class="correct-answers" id="correctAnswers"></div>
                <button class="restart-btn" id="restartBtn">Play Again</button>
            </div>
        </div>
        <div class="tutorial-modal" id="tutorialModal" style="display: none;">
            <div class="tutorial-modal-content">
                <h2>Tutorial: How to Play</h2>
                <p>1. Choose your difficulty level (Easy 😊, Medium 😐, Hard 😓).</p>
                <p>2. Answer each question within the time limit.</p>
                <p>3. Use the 'Hint' button for assistance (limited to 2 per quiz).</p>
                <p>4. Earn points for correct answers and track your progress.</p>
                <p>5. Review your results at the end, including thinking level and problem-solving skills.</p>
                <button class="close-btn" id="closeTutorialBtn">Start Quiz</button>
            </div>
        </div>
        <footer>
            <p>© 2025 Contra E-Crime. All rights reserved.</p>
            <div class="footer-links">
                <a href="PrivacyPolicy.html">Privacy Policy</a>
                <a href="TermsOfUse.html">Terms of Use</a>
                <a href="ContactUs.html">Contact Us</a>
            </div>
        </footer>
    </div>
    <canvas id="particleCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none;"></canvas>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCDNmxNOV7rr_qfM_mTeYTaUIkkLvRaf80",
            authDomain: "contra-e-crime.firebaseapp.com",
            projectId: "contra-e-crime",
            storageBucket: "contra-e-crime.firebasestorage.app",
            messagingSenderId: "198995444405",
            appId: "1:198995444405:web:5f8c6eed561461b36034fc",
            measurementId: "G-7Y2E24DD42"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        const questions = {
            easy: [
                { text: "What year was the Electronic Commerce Act enacted?", answer: "2000", options: ["1995", "2000", "2005", "2010"], hint: "Think about the early days of e-commerce regulation." },
                { text: "Which law protects against unauthorized access to computer systems?", answer: "Electronic Commerce Act of 2000", options: ["Anti-Child Pornography Act", "Electronic Commerce Act of 2000", "Taxation of Electronic Transactions", "None of these"], hint: "Focus on laws about electronic transactions." },
                { text: "What is the minimum fine for online fraud under RA 8792?", answer: "PHP 100,000", options: ["PHP 50,000", "PHP 100,000", "PHP 200,000", "PHP 500,000"], hint: "Consider the lower penalty range." },
                { text: "Which act was designed to regulate electronic tax filings?", answer: "Taxation of Electronic Transactions", options: ["Anti-Child Pornography Act", "Electronic Commerce Act", "Taxation of Electronic Transactions", "None"], hint: "Look for tax-related regulations." },
                { text: "What is the primary focus of RA 9775?", answer: "Child pornography", options: ["Hacking", "Child pornography", "Tax evasion", "Data privacy"], hint: "Think about child protection laws." },
                { text: "Which law imposes a fine of up to PHP 5,000,000?", answer: "Anti-Child Pornography Act", options: ["Electronic Commerce Act", "Anti-Child Pornography Act", "Taxation Regulation", "None"], hint: "Highest fine relates to serious crimes." },
                { text: "What is the maximum imprisonment for first offenses under BIR Regulation?", answer: "6 months", options: ["3 months", "6 months", "1 year", "2 years"], hint: "Check the initial penalty duration." },
                { text: "Which law addresses secret camera installations?", answer: "Anti-Child Pornography Act", options: ["Electronic Commerce Act", "Anti-Child Pornography Act", "Taxation Regulation", "None"], hint: "Relates to privacy violations." },
                { text: "What type of transactions does RA 8792 cover?", answer: "Electronic", options: ["Paper", "Electronic", "Oral", "Physical"], hint: "Focus on digital transactions." },
                { text: "Which act allows compromise penalties for initial offenses?", answer: "Taxation of Electronic Transactions", options: ["Electronic Commerce Act", "Anti-Child Pornography Act", "Taxation of Electronic Transactions", "None"], hint: "Look for flexible penalty options." }
            ],
            medium: [
                { text: "What scenario involves unauthorized online orders?", answer: "Hacked account placing orders", options: ["Tax filing errors", "Hacked account placing orders", "Secret camera use", "Manual tax submissions"], hint: "Relates to e-commerce security." },
                { text: "Which law penalizes up to three years for scams?", answer: "Electronic Commerce Act of 2000", options: ["Anti-Child Pornography Act", "Electronic Commerce Act of 2000", "Taxation Regulation", "None"], hint: "Focus on fraud penalties." },
                { text: "What is the maximum fine for child pornography offenses?", answer: "PHP 5,000,000", options: ["PHP 1,000,000", "PHP 2,000,000", "PHP 5,000,000", "PHP 10,000,000"], hint: "Highest penalty for serious crimes." },
                { text: "Which act requires eFPS usage for online sellers?", answer: "Taxation of Electronic Transactions", options: ["Electronic Commerce Act", "Anti-Child Pornography Act", "Taxation of Electronic Transactions", "None"], hint: "Tax filing system requirement." },
                { text: "What punishment includes reclusion perpetua?", answer: "Anti-Child Pornography Act", options: ["Electronic Commerce Act", "Anti-Child Pornography Act", "Taxation Regulation", "None"], hint: "Severe penalty for child-related crimes." },
                { text: "Which scenario involves a child’s bedroom camera?", answer: "Secret camera observation", options: ["Hacked account", "Secret camera observation", "Manual tax filing", "Online fraud"], hint: "Privacy invasion case." },
                { text: "What is the minimum imprisonment for RA 8792 violations?", answer: "6 months", options: ["3 months", "6 months", "1 year", "2 years"], hint: "Lowest jail term for offenses." },
                { text: "Which law addresses electronic transaction security?", answer: "Electronic Commerce Act of 2000", options: ["Anti-Child Pornography Act", "Electronic Commerce Act of 2000", "Taxation Regulation", "None"], hint: "Security in digital dealings." },
                { text: "What is the penalty for repeated tax filing violations?", answer: "Non-compromisable", options: ["Compromisable", "Non-compromisable", "Fine only", "Imprisonment only"], hint: "Strict enforcement after repeats." },
                { text: "Which act protects against data breaches?", answer: "Electronic Commerce Act of 2000", options: ["Anti-Child Pornography Act", "Electronic Commerce Act of 2000", "Taxation Regulation", "None"], hint: "Data security focus." }
            ],
            hard: [
                { text: "What specific act covers cracking computer systems?", answer: "Electronic Commerce Act of 2000", options: ["Anti-Child Pornography Act", "Electronic Commerce Act of 2000", "Taxation Regulation", "None"], hint: "Technical breach law." },
                { text: "What is the maximum imprisonment for RA 8792’s severe violations?", answer: "6 years", options: ["3 years", "4 years", "5 years", "6 years"], hint: "Highest term for serious breaches." },
                { text: "Which law’s scenario involves eFPS non-compliance?", answer: "Taxation of Electronic Transactions", options: ["Electronic Commerce Act", "Anti-Child Pornography Act", "Taxation of Electronic Transactions", "None"], hint: "Tax system enforcement." },
                { text: "What fine range applies to child pornography production?", answer: "PHP 2M to 5M", options: ["PHP 1M to 2M", "PHP 2M to 5M", "PHP 5M to 10M", "PHP 10M to 15M"], hint: "High fines for production." },
                { text: "Which act’s punishment includes lifelong imprisonment?", answer: "Anti-Child Pornography Act", options: ["Electronic Commerce Act", "Anti-Child Pornography Act", "Taxation Regulation", "None"], hint: "Life sentence for severe crimes." },
                { text: "What scenario details a bedroom privacy breach?", answer: "Secret camera in child’s room", options: ["Hacked account", "Secret camera in child’s room", "Manual tax filing", "Online fraud"], hint: "Child protection violation." },
                { text: "What is the NIRC section for tax penalties?", answer: "Section 275", options: ["Section 200", "Section 250", "Section 275", "Section 300"], hint: "Tax law reference." },
                { text: "Which law prevents unauthorized e-commerce access?", answer: "Electronic Commerce Act of 2000", options: ["Anti-Child Pornography Act", "Electronic Commerce Act of 2000", "Taxation Regulation", "None"], hint: "E-commerce security." },
                { text: "What is the compromise limit for tax offenses?", answer: "Second offense", options: ["First offense", "Second offense", "Third offense", "None"], hint: "Penalty flexibility limit." },
                { text: "Which act addresses digital transaction legality?", answer: "Electronic Commerce Act of 2000", options: ["Anti-Child Pornography Act", "Electronic Commerce Act of 2000", "Taxation Regulation", "None"], hint: "Legal framework for digital deals." }
            ]
        };

        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const mobileMenuIcon = document.getElementById('mobileMenuIcon');
        const sidebar = document.getElementById('sidebar');
        const loaderOverlay = document.getElementById('loaderOverlay');
        const quizSection = document.getElementById('quizSection');
        const startModal = document.getElementById('startModal');
        const startBtn = document.getElementById('startBtn');
        const closeTutorialBtn = document.getElementById('closeTutorialBtn');
        const difficultyButtons = document.querySelectorAll('.difficulty-btn');
        const progressTextInside = document.getElementById('progressTextInside');
        const timerText = document.getElementById('timerText');
        const timerCircle = document.querySelector('.timer-circle');
        const questionText = document.getElementById('questionText');
        const options = document.getElementById('options');
        const scoreDisplay = document.getElementById('score');
        const resultModal = document.getElementById('resultModal');
        const finalScore = document.getElementById('finalScore');
        const thinkingLevel = document.getElementById('thinkingLevel');
        const remarks = document.getElementById('remarks');
        const problemSolving = document.getElementById('problemSolving');
        const correctAnswersDiv = document.getElementById('correctAnswers');
        const restartBtn = document.getElementById('restartBtn');
        const hintBtn = document.getElementById('hintBtn');
        const hintBox = document.getElementById('hintBox');
        const statsDashboard = document.getElementById('statsDashboard');
        const accuracyStat = document.getElementById('accuracyStat');
        const avgTimeStat = document.getElementById('avgTimeStat');
        const streakStat = document.getElementById('streakStat');
        const particleCanvas = document.getElementById('particleCanvas');
        const ctx = particleCanvas.getContext('2d');

        let currentQuestion = 0, score = 0, timeLeft = 15, timerInterval, selectedDifficulty = 'medium';
        const totalQuestions = 10;
        let userAnswers = [], timeTakenPerQuestion = [], currentStreak = 0, hintCount = 0;
        let particles = [];

        const sounds = {
            start: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_2e5d6c2f8e.mp3'], volume: 0.5 }),
            correct: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_2e5d6c2f8e.mp3'], volume: 0.5 }),
            wrong: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_4d7d1c55f9.mp3'], volume: 0.5 }),
            complete: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_8d1f7f1e9e.mp3'], volume: 0.5 }),
            transition: new Howl({ src: ['https://cdn.pixabay.com/audio/2023/07/31/audio_5e8f9c3d7e.mp3'], volume: 0.3 })
        };

        if (localStorage.getItem('darkTheme') === 'enabled') {
            body.classList.add('dark-theme');
            themeToggle.checked = true;
        }

        themeToggle.addEventListener('change', function() {
            if (this.checked) {
                body.classList.add('dark-theme');
                localStorage.setItem('darkTheme', 'enabled');
            } else {
                body.classList.remove('dark-theme');
                localStorage.setItem('darkTheme', 'disabled');
            }
        });

        mobileMenuIcon.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            const icon = mobileMenuIcon.querySelector('i');
            if (sidebar.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        });

        document.querySelectorAll('a[href]:not([href^="#"])').forEach(link => {
            link.addEventListener('click', function(e) {
                if (!this.href.includes(window.location.hostname) && !this.href.startsWith('mailto:')) return;
                e.preventDefault();
                loaderOverlay.classList.add('active');
                setTimeout(() => { window.location.href = this.href; }, 150);
            });
        });

        difficultyButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                selectedDifficulty = this.dataset.difficulty;
                difficultyButtons.forEach(b => b.style.opacity = '0.6');
                this.style.opacity = '1';
                startBtn.style.display = 'block';
                timeLeft = selectedDifficulty === 'easy' ? 20 : selectedDifficulty === 'medium' ? 15 : 10;
            });
        });

        startBtn.addEventListener('click', () => {
            sounds.start.play();
            startModal.style.display = 'none';
            quizSection.classList.add('visible');
            startQuiz();
        });

        closeTutorialBtn.addEventListener('click', () => {
            tutorialModal.style.display = 'none';
            startBtn.style.display = 'block';
        });

        restartBtn.addEventListener('click', () => {
            currentQuestion = 0;
            score = 0;
            userAnswers = [];
            timeTakenPerQuestion = [];
            currentStreak = 0;
            hintCount = 0;
            resultModal.style.display = 'none';
            scoreDisplay.textContent = `Score: ${score}`;
            startModal.style.display = 'flex';
            difficultyButtons.forEach(b => b.style.opacity = '1');
            startBtn.style.display = 'none';
            hintBtn.style.display = 'inline-block';
            hintBox.style.display = 'none';
        });

        hintBtn.addEventListener('click', () => {
            if (hintCount < 2 && userAnswers[currentQuestion]) {
                hintBox.style.display = 'block';
                hintBox.textContent = userAnswers[currentQuestion].hint || 'No hint available.';
                hintCount++;
                if (hintCount === 2) hintBtn.disabled = true;
            }
        });

        function startQuiz() {
            tutorialModal.style.display = 'flex';
            loadQuestion();
            startTimer();
            initParticles();
            animateParticles();
        }

        function loadQuestion() {
            if (currentQuestion >= totalQuestions) {
                endQuiz();
                return;
            }
            progressTextInside.textContent = `${currentQuestion + 1} / ${totalQuestions}`;
            const progress = (currentQuestion / totalQuestions) * 100;
            const progressCircle = document.getElementById('progressCircle');
            progressCircle.style.background = `conic-gradient(#4a90e2 ${progress}%, #ddd ${progress}% 100%)`;
            const q = questions[selectedDifficulty][Math.floor(Math.random() * 10)];
            userAnswers.push({ question: q.text, correctAnswer: q.answer, userAnswer: null, hint: q.hint });
            timeTakenPerQuestion.push(0);
            questionText.textContent = q.text;
            options.innerHTML = '';
            q.options.sort(() => Math.random() - 0.5).forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt;
                btn.onclick = () => checkAnswer(opt === q.answer, btn, opt);
                btn.setAttribute('aria-label', `Option: ${opt}`);
                options.appendChild(btn);
            });
            hintBox.style.display = 'none';
            hintBtn.disabled = false;
            gsap.from('#questionBox', { opacity: 0, y: 50, duration: 0.5 });
        }

        function startTimer() {
            clearInterval(timerInterval);
            let initialTime = selectedDifficulty === 'easy' ? 20 : selectedDifficulty === 'medium' ? 15 : 10;
            timeLeft = initialTime;
            timerText.textContent = `${timeLeft}s`;
            timerCircle.style.strokeDashoffset = 0;
            const startTime = Date.now();
            timerInterval = setInterval(() => {
                timeLeft = initialTime - Math.floor((Date.now() - startTime) / 1000);
                timeTakenPerQuestion[currentQuestion] = initialTime - timeLeft;
                timerText.textContent = `${timeLeft}s`;
                const offset = 188 * (1 - timeLeft / initialTime);
                timerCircle.style.strokeDashoffset = offset;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    userAnswers[currentQuestion].userAnswer = null;
                    transitionToNextQuestion();
                }
            }, 1000);
        }

        function checkAnswer(isCorrect, btn, userAnswer) {
            clearInterval(timerInterval);
            sounds.transition.play();
            userAnswers[currentQuestion].userAnswer = userAnswer;
            options.querySelectorAll('.option-btn').forEach(b => b.classList.add('disabled'));
            if (isCorrect) {
                score += 10;
                currentStreak++;
                btn.classList.add('correct');
                sounds.correct.play();
                confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                createFirework();
            } else {
                currentStreak = 0;
                btn.classList.add('wrong');
                sounds.wrong.play();
                options.querySelectorAll('.option-btn').forEach(b => {
                    if (b.textContent === userAnswers[currentQuestion].correctAnswer) b.classList.add('correct');
                });
                createRain();
            }
            updateStats();
            scoreDisplay.textContent = `Score: ${score}`;
            setTimeout(transitionToNextQuestion, 1500);
        }

        function transitionToNextQuestion() {
            gsap.to('#questionBox', {
                opacity: 0, x: 50, duration: 0.5,
                onComplete: () => {
                    currentQuestion++;
                    if (currentQuestion < totalQuestions) {
                        loadQuestion();
                        startTimer();
                    }
                }
            });
        }

        function endQuiz() {
            sounds.complete.play();
            confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
            createFireworkBurst();
            finalScore.textContent = `${score} / ${totalQuestions * 10}`;
            const accuracy = (score / (totalQuestions * 10)) * 100;
            const avgTime = timeTakenPerQuestion.reduce((a, b) => a + b, 0) / totalQuestions || 0;
            const thinking = accuracy >= 80 ? 'Advanced' : accuracy >= 50 ? 'Intermediate' : 'Beginner';
            thinkingLevel.textContent = thinking;
            remarks.textContent = accuracy >= 80 ? 'Excellent! You’re a cyberlaw expert.' :
                                 accuracy >= 50 ? 'Good effort! Keep learning cyberlaw.' :
                                 'Practice more to improve your cyberlaw knowledge.';
            const problemSolvingScore = (accuracy * 0.6) + ((1 - avgTime / (selectedDifficulty === 'easy' ? 20 : selectedDifficulty === 'medium' ? 15 : 10)) * 40);
            problemSolving.textContent = problemSolvingScore >= 80 ? 'Outstanding problem-solving skills!' :
                                        problemSolvingScore >= 50 ? 'Solid skills, improve speed.' :
                                        'Develop your problem-solving with practice.';
            correctAnswersDiv.innerHTML = '';
            userAnswers.forEach((qa, i) => {
                const div = document.createElement('div');
                div.innerHTML = `<div class="question">Q${i + 1}: ${qa.question}</div><div class="answer">Correct Answer: ${qa.correctAnswer}</div>`;
                correctAnswersDiv.appendChild(div);
            });
            resultModal.style.display = 'flex';
        }

        function updateStats() {
            const accuracy = (score / ((currentQuestion + 1) * 10)) * 100 || 0;
            const avgTime = timeTakenPerQuestion.slice(0, currentQuestion + 1).reduce((a, b) => a + b, 0) / (currentQuestion + 1) || 0;
            accuracyStat.textContent = `${accuracy.toFixed(1)}%`;
            avgTimeStat.textContent = `${avgTime.toFixed(1)}s`;
            streakStat.textContent = currentStreak;
        }

        function initParticles() {
            particles = [];
            for (let i = 0; i < 50; i++) {
                particles.push({
                    x: Math.random() * particleCanvas.width,
                    y: Math.random() * particleCanvas.height,
                    size: Math.random() * 5 + 2,
                    speedX: (Math.random() - 0.5) * 2,
                    speedY: (Math.random() - 0.5) * 2,
                    color: `hsl(${Math.random() * 360}, 70%, 50%)`
                });
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
            particles.forEach((p, i) => {
                p.x += p.speedX;
                p.y += p.speedY;
                if (p.x < 0 || p.x > particleCanvas.width) p.speedX *= -1;
                if (p.y < 0 || p.y > particleCanvas.height) p.speedY *= -1;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = p.color;
                ctx.fill();
                ctx.closePath();
            });
            requestAnimationFrame(animateParticles);
        }

        function createFirework() {
            for (let i = 0; i < 20; i++) {
                particles.push({
                    x: Math.random() * particleCanvas.width,
                    y: Math.random() * particleCanvas.height / 2,
                    size: Math.random() * 3 + 1,
                    speedX: (Math.random() - 0.5) * 10,
                    speedY: (Math.random() - 0.5) * 10,
                    color: `hsl(${Math.random() * 360}, 70%, 50%)`,
                    life: 50
                });
            }
        }

        function createFireworkBurst() {
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: particleCanvas.width / 2,
                    y: particleCanvas.height / 2,
                    size: Math.random() * 5 + 2,
                    speedX: (Math.random() - 0.5) * 15,
                    speedY: (Math.random() - 0.5) * 15,
                    color: `hsl(${Math.random() * 360}, 70%, 50%)`,
                    life: 100
                });
            }
        }

        function createRain() {
            for (let i = 0; i < 50; i++) {
                particles.push({
                    x: Math.random() * particleCanvas.width,
                    y: 0,
                    size: Math.random() * 2 + 1,
                    speedX: 0,
                    speedY: Math.random() * 5 + 2,
                    color: '#b0c4de',
                    life: 100
                });
            }
        }

        window.addEventListener('resize', () => {
            particleCanvas.width = window.innerWidth;
            particleCanvas.height = window.innerHeight;
            initParticles();
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowUp' && options.children.length) {
                options.children[0].focus();
            } else if (e.key === 'ArrowDown' && options.children.length > 1) {
                options.children[1].focus();
            } else if (e.key === 'Enter' && document.activeElement.classList.contains('option-btn')) {
                document.activeElement.click();
            }
        });
    </script>