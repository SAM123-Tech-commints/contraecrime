<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contra E-Crime</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/Dccn8pc.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
        }

        body, html {
            min-height: 100vh;
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
            background-color: #f7f7f7;
            transition: background-color 0.3s ease, color 0.3s ease;
            overflow-x: hidden;
        }

        .loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .loader-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #FFF;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .dark-theme .loader {
            border-color: #d7b15c;
            border-bottom-color: transparent;
        }

        .avatar-loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 50px;
            height: 50px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 101;
        }

        .avatar-loading.active {
            display: flex;
        }

        .avatar-loading .loader {
            width: 24px;
            height: 24px;
            border-width: 3px;
        }

        .container {
            display: flex;
            min-height: 100vh;
            flex-direction: column;
        }

        .sidebar {
            width: 290px;
            background-image: url('https://i.imgur.com/bNRxAhZ.png');
            background-size: cover;
            background-position: center;
            background-color: #1a1a1a;
            color: white;
            padding: 20px;
            height: 100vh;
            position: fixed;
            transition: transform 0.3s ease;
        }

        .sidebar h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
        }

        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }

        .sidebar ul li {
            margin: 50px 0;
        }

        .sidebar ul li a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar ul li a img {
            width: 30px;
            height: 30px;
        }

        .sidebar ul li a:not(.dark-theme-label a) {
            transition: all 0.3s ease;
            position: relative;
        }

        .sidebar ul li a:not(.dark-theme-label a):hover {
            color: #d7b15c;
            transform: translateX(5px);
        }

        .sidebar ul li a:not(.dark-theme-label a)::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -10px;
            left: 0;
            background-color: #d7b15c;
            transition: width 0.3s ease;
        }

        .sidebar ul li a:not(.dark-theme-label a):hover::after {
            width: 95%;
        }

        .dark-theme .sidebar ul li a:not(.dark-theme-label a):hover {
            color: #d7b15c;
        }

        .dark-theme-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 20px;
        }

        .dark-theme-label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        .dark-theme-label img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
        }

        .switch-label {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #28292c;
            border-radius: 25px;
            cursor: pointer;
            border: 3px solid #28292c;
        }

        .checkbox {
            position: absolute;
            display: none;
        }

        .slider {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 25px;
            transition: 0.3s;
        }

        .checkbox:checked ~ .slider {
            background-color: #d8dbe0;
        }

        .slider::before {
            content: "";
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            box-shadow: inset 8px -3px 0px 0px #d8dbe0;
            background-color: #28292c;
            transition: 0.3s;
        }

        .checkbox:checked ~ .slider::before {
            transform: translateX(30px);
            background-color: #28292c;
            box-shadow: none;
        }

        .content {
            flex: 1;
            margin-left: 290px;
            padding: 60px 40px 40px;
            position: relative;
            background: linear-gradient(135deg, #f7f7f7 0%, #e5e5e5 100%);
            transition: background-color 0.3s ease, margin-left 0.3s ease;
            overflow-y: auto;
        }

        .content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.6);
            z-index: 0;
        }

        .header {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 40px;
            position: relative;
            z-index: 3000;
        }

        .account-customization {
            position: fixed;
            top: 10px;
            right: 20px;
            z-index: 998;
        }

        .user-details {
            display: none;
        }

        .avatar-container {
            position: relative;
            display: inline-block;
        }

        .avatar-container .profile-pic {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            object-fit: cover;
            border: 2px solid #000;
            cursor: pointer;
            color: transparent;
            font-size: 0;
        }

        .customization-options {
            position: absolute;
            top: 50px;
            right: 0;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none;
            flex-direction: column;
            padding: 8px;
            z-index: 3002;
            align-items: flex-start;
            width: 300px;
        }

        .customization-options.active {
            display: flex;
        }

        .customization-options .user-info {
            margin-bottom: 10px;
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #d32f2f 100%);
            border-radius: 5px;
            position: relative;
            overflow: hidden;
        }

        .customization-options .user-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://www.transparenttextures.com/patterns/circuit.png');
            opacity: 0.1;
            z-index: 0;
        }

        .customization-options .user-info p {
            margin: 5px 0;
            font-size: 12px;
            color: #ffffff;
            position: relative;
            z-index: 1;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            font-weight: 500;
            overflow-wrap: break-word;
        }

        .customization-options .user-info p::before {
            content: attr(data-label);
            font-weight: 700;
            color: #ff3333; 
            margin-right: 5px;
        }

        .customization-options label {
            font-size: 12px;
            color: #333;
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px 8px;
            transition: background-color 0.3s ease;
            width: 100%;
            text-align: left;
        }

        .customization-options label:hover {
            background-color: #f0f0f0;
            border-radius: 5px;
        }

        .customization-options input[type="color"] {
            width: 100%;
            height: 25px;
            padding: 0;
            border: none;
            cursor: pointer;
            background: none;
        }

        .customization-options select {
            font-size: 12px;
            padding: 4px;
            border-radius: 5px;
            border: 1px solid #ccc;
            cursor: pointer;
            width: 100%;
        }

        .customization-options input[type="file"] {
            display: none;
        }

        .customization-options .file-input-label {
            font-size: 12px;
            color: #333;
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px 8px;
            transition: background-color 0.3s ease;
            width: 100%;
            text-align: left;
        }

        .customization-options .file-input-label:hover {
            background-color: #f0f0f0;
            border-radius: 5px;
        }

        .dark-theme .customization-options {
            background-color: #3a3b3c;
            border-color: #555;
        }

        .dark-theme .customization-options .user-info {
            background: linear-gradient(135deg, #5a6268 0%, #454b50 50%, #2f3539 100%);
            color: #e0e0e0; 
        }

        .dark-theme .customization-options .user-info p {
            color: #e0e0e0;
        }

        .dark-theme .customization-options .user-info p::before {
            color: #ffeb3b;
        }

        .dark-theme .customization-options label,
        .dark-theme .customization-options .file-input-label {
            color: #e0e0e0;
        }

        .dark-theme .customization-options label:hover,
        .dark-theme .customization-options .file-input-label:hover {
            background-color: #4a4b4c;
        }

        .dark-theme .customization-options select {
            background-color: #3a3b3c;
            color: #e0e0e0;
            border-color: #555;
        }

        @media (max-width: 1024px) {
            .account-customization {
                right: 10px;
            }

            .avatar-container .profile-pic {
                width: 35px;
                height: 35px;
            }

            .avatar-loading {
                width: 35px;
                height: 35px;
            }

            .avatar-loading .loader {
                width: 18px;
                height: 18px;
                border-width: 2px;
            }

            .customization-options {
                top: 45px;
                width: 220px;
            }
        }

        @media (max-width: 768px) {
            .avatar-container .profile-pic {
                width: 30px;
                height: 30px;
            }

            .avatar-loading {
                width: 30px;
                height: 30px;
            }

            .avatar-loading .loader {
                width: 15px;
                height: 15px;
                border-width: 2px;
            }

            .customization-options {
                top: 40px;
                width: 200px;
            }
        }

        @media (max-width: 480px) {
            .account-customization {
                top: 70px;
                right: 10px;
                z-index: 998;
            }

            .avatar-container .profile-pic {
                width: 30px;
                height: 30px;
                border-width: 1px;
            }

            .avatar-loading {
                width: 30px;
                height: 30px;
            }

            .avatar-loading .loader {
                width: 15px;
                height: 15px;
                border-width: 2px;
            }

            .customization-options {
                top: 40px;
                width: 180px;
                z-index: 999;
            }

            .customization-options .user-info p {
                font-size: 10px;
            }

            .customization-options label,
            .customization-options .file-input-label {
                font-size: 10px;
                padding: 3px 6px;
            }

            .customization-options select {
                font-size: 10px;
                padding: 3px;
            }

            .sidebar.active ~ .content .account-customization {
                display: none;
            }
        }

        .hero-section,
        .timeline-section,
        .growth-section,
        .careers-section,
        .leaders-section {
            position: relative;
            z-index: 1;
            margin-bottom: 60px;
        }

        .hero-section {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.7));
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }

        .hero-section h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 52px;
            font-weight: 700;
            color: #222;
            margin-bottom: 20px;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards;
        }

        .hero-section h1 span {
            position: relative;
            background: linear-gradient(90deg, #8B0000, #b30000);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }

        .hero-section h1 span::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, #8B0000, #d7b15c);
        }

        .hero-section p {
            font-family: 'Poppins', sans-serif;
            font-size: 18px;
            font-weight: 300;
            color: #555;
            max-width: 800px;
            margin: 0 auto 40px;
            line-height: 1.6;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards 0.3s;
        }

        .hero-image {
            width: 60%;
            height: 400px;
            background: url('https://i.imgur.com/Rj26r1i.png') no-repeat center center;
            background-size: cover;
            margin: auto;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards 0.6s;
        }

        .timeline-section {
            padding: 80px 20px;
            text-align: center;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.6));
            border-radius: 15px;
        }

        .timeline-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 36px;
            font-weight: 700;
            color: #8B0000;
            margin-bottom: 50px;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards;
        }

        .timeline {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 3px;
            background: linear-gradient(to bottom, #8B0000, #d7b15c);
        }

        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 50px;
            position: relative;
            opacity: 0;
            transform: translateX(-50px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .timeline-item.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .timeline-item.right {
            flex-direction: row-reverse;
            transform: translateX(50px);
        }

        .timeline-item.right.visible {
            transform: translateX(0);
        }

        .timeline-content {
            width: 45%;
            padding: 25px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: left;
            position: relative;
            transition: transform 0.3s ease;
            overflow-wrap: break-word;
        }

        .timeline-content:hover {
            transform: translateY(-5px);
        }

        .timeline-content h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 22px;
            font-weight: 700;
            color: #222;
            margin-bottom: 10px;
        }

        .timeline-content p {
            font-family: 'Poppins', sans-serif;
            font-size: 15px;
            font-weight: 300;
            color: #666;
            line-height: 1.6;
        }

        .timeline-image {
            width: 100%;
            height: 150px;
            margin-top: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            background-size: cover;
            background-position: center;
        }

        .timeline-marker {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #8B0000, #b30000);
            border: 3px solid #fff;
            border-radius: 50%;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .growth-section {
            padding: 80px 20px;
            text-align: center;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.6));
            border-radius: 15px;
        }

        .growth-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 36px;
            font-weight: 700;
            color: #8B0000;
            margin-bottom: 50px;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards;
        }

        .growth-grid {
            display: flex;
            justify-content: center;
            gap: 50px;
            flex-wrap: wrap;
        }

        .growth-item {
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            opacity: 0;
            transform: translateY(30px);
        }

        .growth-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .growth-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .growth-item i {
            font-size: 36px;
            color: #8B0000;
            margin-bottom: 15px;
            transition: color 0.3s ease;
        }

        .growth-item:hover i {
            color: #b30000;
        }

        .growth-item h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 26px;
            font-weight: 700;
            color: #222;
            margin-bottom: 8px;
        }

        .growth-item p {
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            font-weight: 300;
            color: #666;
        }

        .growth-section button {
            margin-top: 40px;
            padding: 12px 30px;
            background: linear-gradient(90deg, #8B0000, #b30000);
            color: #fff;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            font-weight: 500;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .growth-section button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 0, 0, 0.3);
        }

        .careers-section {
            padding: 80px 20px;
            text-align: center;
        }

        .careers-card {
            max-width: 900px;
            margin: 0 auto;
            padding: 50px;
            background: linear-gradient(135deg, #8B0000, #b30000);
            border-radius: 15px;
            color: #fff;
            text-align: left;
            position: relative;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .careers-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .careers-card h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .careers-card p {
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            font-weight: 300;
            margin-bottom: 30px;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .careers-card a {
            display: inline-block;
            padding: 12px 30px;
            background: #fff;
            color: #8B0000;
            text-decoration: none;
            border-radius: 25px;
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            font-weight: 500;
            position: relative;
            z-index: 1;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .careers-card a:hover {
            background: #d7b15c;
            color: #222;
        }

        .leaders-section {
            padding: 80px 20px;
            text-align: center;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.6));
            border-radius: 15px;
        }

        .leaders-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 36px;
            font-weight: 700;
            color: #8B0000;
            margin-bottom: 50px;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards;
        }

        .leaders-grid {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .leader-item {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            opacity: 0;
            transform: translateY(30px);
        }

        .leader-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .leader-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .leader-item img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin-bottom: 15px;
            border: 3px solid #8B0000;
            transition: border-color 0.3s ease;
        }

        .leader-item:hover img {
            border-color: #d7b15c;
        }

        .leader-item h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 18px;
            font-weight: 700;
            color: #222;
            margin-bottom: 5px;
        }

        .leader-item p {
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            font-weight: 300;
            color: #666;
        }

        footer {
            background-color: #333;
            color: white;
            padding: 15px 30px;
            text-align: center;
            margin-left: 290px;
            z-index: 1;
            transition: margin-left 0.3s ease;
        }

        footer p {
            margin: 0;
            font-size: 14px;
        }

        .footer-links {
            margin-top: 5px;
        }

        .footer-links a {
            color: #d7b15c;
            text-decoration: none;
            margin: 0 10px;
            font-size: 14px;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        .dark-theme footer {
            background-color: #1a1a1a;
        }

        body.dark-theme {
            background-color: #121212;
            color: #e0e0e0;
        }

        .dark-theme .content {
            background: linear-gradient(135deg, #121212, #2c2c2c);
        }

        .dark-theme .content::before {
            background: rgba(40, 41, 44, 0.6);
        }

        .dark-theme .hero-section {
            background: linear-gradient(180deg, rgba(40, 41, 44, 0.95), rgba(40, 41, 44, 0.7));
        }

        .dark-theme .hero-section h1 {
            color: #e0e0e0;
        }

        .dark-theme .hero-section h1 span {
            background: linear-gradient(90deg, #d7b15c, #b89a47);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }

        .dark-theme .hero-section h1 span::after {
            background: linear-gradient(to right, #d7b15c, #8B0000);
        }

        .dark-theme .hero-section p {
            color: #b0b0b0;
        }

        .dark-theme .timeline-section {
            background: linear-gradient(180deg, rgba(40, 41, 44, 0.9), rgba(40, 41, 44, 0.6));
        }

        .dark-theme .timeline-section h2 {
            color: #d7b15c;
        }

        .dark-theme .timeline-content {
            background: #333;
        }

        .dark-theme .timeline-content h3 {
            color: #e0e0e0;
        }

        .dark-theme .timeline-content p {
            color: #b0b0b0;
        }

        .dark-theme .timeline-image {
            box-shadow: 0 3px 10px rgba(255, 255, 255, 0.1);
        }

        .dark-theme .timeline-marker {
            background: linear-gradient(135deg, #d7b15c, #b89a47);
        }

        .dark-theme .growth-section {
            background: linear-gradient(180deg, rgba(40, 41, 44, 0.9), rgba(40, 41, 44, 0.6));
        }

        .dark-theme .growth-section h2 {
            color: #d7b15c;
        }

        .dark-theme .growth-item {
            background: #333;
        }

        .dark-theme .growth-item i {
            color: #d7b15c;
        }

        .dark-theme .growth-item:hover i {
            color: #b89a47;
        }

        .dark-theme .growth-item h3 {
            color: #e0e0e0;
        }

        .dark-theme .growth-item p {
            color: #b0b0b0;
        }

        .dark-theme .growth-section button {
            background: linear-gradient(90deg, #d7b15c, #b89a47);
            color: #222;
        }

        .dark-theme .careers-card a {
            color: #222;
        }

        .dark-theme .leaders-section {
            background: linear-gradient(180deg, rgba(40, 41, 44, 0.9), rgba(40, 41, 44, 0.6));
        }

        .dark-theme .leaders-section h2 {
            color: #d7b15c;
        }

        .dark-theme .leader-item {
            background: #333;
        }

        .dark-theme .leader-item h3 {
            color: #e0e0e0;
        }

        .dark-theme .leader-item p {
            color: #b0b0b0;
        }

        .dark-theme .leader-item img {
            border-color: #d7b15c;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mobile-nav {
            display: none;
            background-image: url('https://i.imgur.com/bNRxAhZ.png');
            padding: 15px;
            position: fixed;
            width: 100%;
            z-index: 1000;
        }

        .mobile-nav .logo {
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-decoration: none;
        }

        .mobile-nav .menu-icon {
            color: white;
            font-size: 24px;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 15px;
        }

        @media (max-width: 1024px) {
            .sidebar {
                width: 250px;
            }

            .sidebar h1 {
                font-size: 22px;
            }

            .sidebar ul li a {
                font-size: 16px;
            }

            .dark-theme-label {
                font-size: 16px;
            }

            .content {
                margin-left: 250px;
                padding: 50px 30px 30px;
            }

            footer {
                margin-left: 250px;
            }

            .hero-section h1 {
                font-size: 42px;
            }

            .hero-section p {
                font-size: 16px;
            }

            .hero-image {
                height: 300px;
            }

            .timeline-section h2,
            .growth-section h2,
            .leaders-section h2 {
                font-size: 32px;
            }

            .careers-card h2 {
                font-size: 28px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
                padding: 10px;
            }

            .sidebar h1 {
                font-size: 20px;
            }

            .sidebar ul li a {
                font-size: 14px;
            }

            .dark-theme-label {
                font-size: 14px;
            }

            .content {
                margin-left: 200px;
                padding: 40px 20px 20px;
            }

            footer {
                margin-left: 200px;
            }

            .timeline::before {
                left: 20px;
            }

            .timeline-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .timeline-item.right {
                flex-direction: column;
                align-items: flex-start;
            }

            .timeline-content {
                width: 100%;
                margin-left: 40px;
            }

            .timeline-marker {
                left: 20px;
                transform: none;
            }

            .timeline-image {
                height: 120px;
            }

            .growth-grid,
            .leaders-grid {
                gap: 30px;
            }
        }

        @media (max-width: 480px) {
            .container {
                flex-direction: column;
            }

            .mobile-nav {
                display: block;
            }

            .sidebar {
                width: 100%;
                height: auto;
                position: fixed;
                padding: 15px;
                transform: translateX(-100%);
                z-index: 999;
                top: 60px;
                height: calc(100vh - 60px);
                overflow-y: auto;
                background-size: cover;
                background-position: center;
                background-color: #1a1a1a;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .sidebar h1 {
                display: none;
            }

            .sidebar ul {
                margin: 0;
            }

            .sidebar ul li {
                margin: 20px 0;
            }

            .sidebar ul li a {
                font-size: 16px;
            }

            .dark-theme-container {
                margin-top: 20px;
                margin-bottom: 15px;
            }

            .dark-theme-label {
                font-size: 16px;
            }

            .content {
                margin-left: 0;
                padding: 80px 15px 15px;
                overflow-x: hidden;
            }

            footer {
                margin-left: 0;
                padding: 10px 20px;
                text-align: center;
            }

            footer p {
                font-size: 12px;
            }

            .footer-links a {
                font-size: 12px;
                margin: 0 8px;
            }

            .header {
                justify-content: center;
            }

            .hero-section {
                padding: 20px 10px;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
            }

            .hero-section h1 {
                font-size: 28px;
                margin-bottom: 15px;
            }

            .hero-section p {
                font-size: 12px;
                margin-bottom: 20px;
            }

            .hero-image {
                width: 100%;
                height: 150px;
            }

            .timeline-section,
            .growth-section,
            .careers-section,
            .leaders-section {
                padding: 50px 10px;
            }

            .timeline-section h2,
            .growth-section h2,
            .leaders-section h2 {
                font-size: 28px;
            }

            .timeline::before {
                left: 20px;
            }

            .timeline-item {
                flex-direction: column;
                align-items: flex-start;
                margin-bottom: 60px;
            }

            .timeline-item.right {
                flex-direction: column;
                align-items: flex-start;
            }

            .timeline-content {
                width: 100%;
                margin-left: 40px;
                padding: 15px;
                overflow: visible;
            }

            .timeline-content h3 {
                font-size: 18px;
                line-height: 1.4;
                margin-bottom: 8px;
            }

            .timeline-content p {
                font-size: 12px;
                line-height: 1.5;
            }

            .timeline-content::before {
                content: '';
                position: absolute;
                left: -30px;
                top: 50%;
                transform: translateY(-50%);
                width: 30px;
                height: 2px;
                background-color: #8B0000;
            }

            .timeline-image {
                height: 100px;
            }

            .timeline-marker {
                left: 20px;
                transform: none;
            }

            .growth-grid,
            .leaders-grid {
                gap: 20px;
            }

            .growth-item {
                padding: 20px;
            }

            .careers-card {
                padding: 30px;
            }

            .careers-card h2 {
                font-size: 24px;
            }

            .careers-card p {
                font-size: 14px;
            }

            .leader-item img {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="loader-overlay" id="loaderOverlay">
        <div class="loader"></div>
    </div>
    <div class="mobile-nav">
        <a href="#" class="logo">Contra E-Crime</a>
        <div class="menu-icon" id="mobileMenuIcon">
            <i class="fas fa-bars"></i>
        </div>
    </div>

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <h1>Contra E-Crime</h1>
            <ul>
                <li>
                    <a href="HomePage.html">
                        <img src="https://i.imgur.com/OAHusQp.png" alt="Home">
                        Home
                    </a>
                </li>
                <li>
                    <a href="News.html">
                        <img src="https://i.imgur.com/FNALwXX.png" alt="News & Insights">
                        News & Insights
                    </a>
                </li>
                <li>
                    <a href="SavedLaws.html">
                        <img src="https://i.imgur.com/VChoqhD.png" alt="Saved Laws">
                        Saved Laws
                    </a>
                </li>
                <li>
                    <a href="History.html">
                        <img src="https://i.imgur.com/cnaDfEq.png" alt="Search History">
                        Search History
                    </a>
                </li>
                <li>
                    <a href="ContactUs.html">
                        <img src="https://i.imgur.com/T7bI4RJ.png" alt="Contact Us">
                        Contact Us
                    </a>
                </li>
                <li>
                    <a href="AboutUs.html">
                        <img src="https://i.imgur.com/lktrzpa.png" alt="About Us">
                        About Us
                    </a>
                </li>
                <li>
                    <a href="index.html">
                        <img src="https://i.imgur.com/2jjsgOq.png" alt="Logout">
                        Logout
                    </a>
                </li>
            </ul>

            <div class="dark-theme-container">
                <div class="dark-theme-label">
                    <img src="https://i.imgur.com/vEKpOsq.png" alt="Dark Theme">
                    <span>Dark Theme</span>
                </div>
                <div class="toggle-switch">
                    <label class="switch-label">
                        <input type="checkbox" class="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </nav>
        <main class="content">
            <header class="header">
                <div class="account-customization">
                    <div class="user-details">
                    </div>
                    <div class="avatar-container">
                        <img class="profile-pic" id="profilePic" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/4L1mGQAAAAASUVORK5CYII=" alt="User Avatar">
                        <div class="avatar-loading" id="avatarLoading">
                            <div class="loader"></div>
                        </div>
                        <div class="customization-options" id="customizationMenu">
                            <div class="user-info" id="userInfo">
                                <p id="usernameDisplay" data-label="Username:">Loading...</p>
                                <p id="emailDisplay" data-label="Email:">Loading...</p>
                                <p id="createdAtDisplay" data-label="Account Created:">Loading...</p>
                            </div>
                            <label class="file-input-label" for="avatarInput">Change Avatar</label>
                            <input type="file" id="avatarInput" accept="image/jpeg,image/png,image/jpg">
                            <label for="avatarBgColorPicker">Avatar Background Color</label>
                            <input type="color" id="avatarBgColorPicker" value="#cccccc">
                            <label for="borderColorPicker">Border Color</label>
                            <input type="color" id="borderColorPicker" value="#000000">
                            <label for="borderTypeSelect">Border Type</label>
                            <select id="borderTypeSelect">
                                <option value="solid">Solid</option>
                                <option value="dashed">Dashed</option>
                                <option value="dotted">Dotted</option>
                                <option value="double">Double</option>
                            </select>
                        </div>
                    </div>
                </div>
            </header>
            <section class="hero-section">
                <h1>A world where anyone can navigate <span>cybercrime laws with ease</span></h1>
                <p>In 2025, a group of Grade 12 students from STI College Fairview created Cybercrime e-Laws to simplify access to cybercrime laws for students and non-experts. Our platform, Weigh the Right, helps users in the Philippines understand their digital rights.</p>
                <div class="hero-image"></div>
            </section>

            <section class="timeline-section">
                <h2>Our Story</h2>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>January 2025 – A School Project Begins</h3>
                            <p>Founded by Grade 12 ICT students at STI College Fairview, we kicked off the project under the banner of our school. The STI College Fairview logo became our symbol of academic excellence and teamwork.</p>
                            <div class="timeline-image" style="background-image: url('https://i.imgur.com/lgF2ndM.jpeg');"></div>
                        </div>
                        <div class="timeline-marker"></div>
                    </div>
                    <div class="timeline-item right">
                        <div class="timeline-content">
                            <h3>March 2025 – Building The Website</h3>
                            <p>We designed our company logo for Contra E-Crime and launched Weigh the Right, a platform built with HTML, CSS, and JavaScript, integrated with Firebase for real-time user data management and authentication.</p>
                            <div class="timeline-image" style="background-image: url('https://i.imgur.com/MShJ1TO.png');"></div>
                        </div>
                        <div class="timeline-marker"></div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>May 2025 – Ready for the SHS Expo</h3>
                            <p>Showcased our programming skills at the SHS Expo, highlighting Firebase for secure user authentication and Firestore for efficient data storage and AI integration, making Weigh the Right a reliable tool for cyber law access.</p>
                            <div class="timeline-image" style="background-image: url('https://storage.googleapis.com/gweb-cloudblog-publish/images/Firebase_CloudNext_Hero_02.max-2500x2500.jpg');"></div>
                        </div>
                        <div class="timeline-marker"></div>
                    </div>
                </div>
            </section>

            <section class="growth-section">
                <h2>We’ve Grown To</h2>
                <div class="growth-grid">
                    <div class="growth-item">
                        <i class="fas fa-sign-in-alt fa-2x"></i>
                        <h3 id="dailyLoginUsers">000</h3>
                        <p>Total Login Users</p>
                    </div>
                    <div class="growth-item">
                        <i class="fas fa-users fa-2x"></i>
                        <h3 id="activeUsers">000</h3>
                        <p>Active Users</p>
                    </div>
                    <div class="growth-item">
                        <i class="fas fa-user-group fa-2x"></i>
                        <h3>8</h3>
                        <p>Team Members</p>
                    </div>
                    <div class="growth-item">
                        <i class="fas fa-handshake fa-2x"></i>
                        <h3>1</h3>
                        <p>Educational Partner</p>
                    </div>
                </div>
                <button onclick="updateUserCounts()">Refresh Counts</button>
            </section>

            <section class="careers-section">
                <div class="careers-card">
                    <h2>Product</h2>
                    <p>Contra E-Crime is a student project passionate about making cyber laws easy to understand having Weigh the Right as our main tool for giving you the best search experience. Want to explore more of the website? Let’s connect at the SHS expo!</p>
                    <a href="HomePage.html">Learn More</a>
                </div>
            </section>

            <section class="leaders-section">
                <h2>Our Members</h2>
                <div class="leaders-grid">
                    <div class="leader-item">
                        <img src="https://i.imgur.com/Cic9hdv.jpeg" alt="Sam Othaniel P. Pascual">
                        <h3>Sam Othaniel P. Pascual</h3>
                        <p>Head Executive (CEO)</p>
                    </div>
                    <div class="leader-item">
                        <img src="https://i.imgur.com/40aK6A8.jpeg" alt="Hanna Daniella S. Ventura">
                        <h3>Hanna Daniella S. Ventura</h3>
                        <p>Operations Manager</p>
                    </div>
                    <div class="leader-item">
                        <img src="https://i.imgur.com/1sDizQF.jpeg" alt="Jorilyne P. Lanuzo">
                        <h3>Jorilyne P. Lanuzo</h3>
                        <p>Human Resources Manager</p>
                    </div>
                    <div class="leader-item">
                        <img src="https://i.imgur.com/Qsd0OKl.jpeg" alt="Zachary Benedict E. Candelario">
                        <h3>Zachary Benedict E. Candelario</h3>
                        <p>Product Manager</p>
                    </div>
                    <div class="leader-item">
                        <img src="https://i.imgur.com/wP2dOJ6.jpeg" alt="Benz Daniel A. Buhay">
                        <h3>Benz Daniel A. Buhay</h3>
                        <p>Figurehead</p>
                    </div>
                    <div class="leader-item">
                        <img src="https://i.imgur.com/O6y6Bj9.jpeg" alt="Matthew M. Valencia">
                        <h3>Matthew M. Valencia</h3>
                        <p>Monitor</p>
                    </div>
                    <div class="leader-item">
                        <img src="https://i.imgur.com/qnDT5rx.jpeg" alt="Elijia R. Ramirez">
                        <h3>Elijia R. Ramirez</h3>
                        <p>Disturbance Handler</p>
                    </div>
                    <div class="leader-item">
                        <img src="https://i.imgur.com/CYZ9DqQ.jpeg" alt="Jeremy D. Montalban">
                        <h3>Jeremy D. Montalban</h3>
                        <p>Entrepreneur</p>
                    </div>
                </div>
            </section>
        </main>
        <footer>
            <p>© 2025 Contra E-Crime. All rights reserved.</p>
            <div class="footer-links">
                <a href="PrivacyPolicy.html">Privacy Policy</a>
                <a href="TermsOfUse.html">Terms of Use</a>
                <a href="ContactUs.html">Contact Us</a>
            </div>
        </footer>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCDNmxNOV7rr_qfM_mTeYTaUIkkLvRaf80",
            authDomain: "contra-e-crime.firebaseapp.com",
            projectId: "contra-e-crime",
            storageBucket: "contra-e-crime.firebasestorage.app",
            messagingSenderId: "198995444405",
            appId: "1:198995444405:web:5f8c6eed561461b36034fc",
            measurementId: "G-7Y2E24DD42",
            databaseURL: "https://contra-e-crime-default-rtdb.firebaseio.com"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        const db = firebase.firestore();

        async function calculateDailyLoginUsers() {
            try {
                const querySnapshot = await db.collection('loginEvents').get();
                console.log('Total Login Events:', querySnapshot.size);
                return querySnapshot.size;
            } catch (error) {
                console.error('Error calculating total login events:', error);
                return 0;
            }
        }

        async function calculateActiveUsers() {
            try {
                const querySnapshot = await db.collection('loginEvents').get();
                const uniqueUsers = new Set();
                querySnapshot.forEach(doc => {
                    const data = doc.data();
                    if (data.userEmail) {
                        uniqueUsers.add(data.userEmail);
                    }
                });
                console.log('Active Users (Unique Users):', uniqueUsers.size);
                return uniqueUsers.size;
            } catch (error) {
                console.error('Error calculating active users:', error);
                return 0;
            }
        }

        async function updateUserCounts() {
            try {
                const dailyLoginUsers = await calculateDailyLoginUsers();
                const activeUsers = await calculateActiveUsers();

                console.log('Updating UI - Total Login Events:', dailyLoginUsers, 'Active Users:', activeUsers);

                document.getElementById('dailyLoginUsers').textContent = dailyLoginUsers.toString().padStart(3, '0');
                document.getElementById('activeUsers').textContent = activeUsers.toString().padStart(3, '0');
            } catch (error) {
                console.error('Error updating user counts:', error);
            }
        }

        const CLOUDINARY_CLOUD_NAME = 'dkxtbukta';
        const CLOUDINARY_UPLOAD_PRESET = 'contraecrime';

        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const mobileMenuIcon = document.getElementById('mobileMenuIcon');
        const sidebar = document.getElementById('sidebar');
        const loaderOverlay = document.getElementById('loaderOverlay');
        const profilePic = document.getElementById('profilePic');
        const customizationMenu = document.getElementById('customizationMenu');
        const avatarInput = document.getElementById('avatarInput');
        const avatarLoading = document.getElementById('avatarLoading');
        const avatarBgColorPicker = document.getElementById('avatarBgColorPicker');
        const borderColorPicker = document.getElementById('borderColorPicker');
        const borderTypeSelect = document.getElementById('borderTypeSelect');
        const usernameDisplay = document.getElementById('usernameDisplay');
        const emailDisplay = document.getElementById('emailDisplay');
        const createdAtDisplay = document.getElementById('createdAtDisplay');

        auth.onAuthStateChanged((user) => {
            if (user) {
                const currentUser = {
                    username: user.displayName || 'User',
                    email: user.email,
                    createdAt: user.metadata.creationTime
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));

                usernameDisplay.textContent = `${currentUser.username}`;
                emailDisplay.textContent = `${currentUser.email}`;
                createdAtDisplay.textContent = `${new Date(currentUser.createdAt).toLocaleString()}`;

                const sanitizedEmail = currentUser.email.replace(/\./g, ',');

                const userRef = database.ref(`users/${sanitizedEmail}`);
                userRef.once('value', (snapshot) => {
                    const userData = snapshot.val();
                    if (userData) {
                        if (userData.avatarUrl) {
                            profilePic.src = userData.avatarUrl;
                        } else {
                            profilePic.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/4L1mGQAAAAASUVORK5CYII=';
                        }
                        if (userData.avatarBgColor) {
                            profilePic.style.backgroundColor = userData.avatarBgColor;
                            avatarBgColorPicker.value = userData.avatarBgColor;
                        }
                        if (userData.borderColor) {
                            profilePic.style.borderColor = userData.borderColor;
                            borderColorPicker.value = userData.borderColor;
                        }
                        if (userData.borderType) {
                            profilePic.style.borderStyle = userData.borderType;
                            borderTypeSelect.value = userData.borderType;
                        }
                    }
                }, (error) => {
                    console.error('Error loading user customization:', error);
                    alert('Failed to load user customization: ' + error.message);
                });
            } else {
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            }
        });

        profilePic.addEventListener('click', () => {
            customizationMenu.classList.toggle('active');
        });

        document.addEventListener('click', (e) => {
            if (!customizationMenu.contains(e.target) && e.target !== profilePic) {
                customizationMenu.classList.remove('active');
            }
        });

        avatarInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (!file) return;

            const validTypes = ['image/jpeg', 'image/png', 'image/jpg'];
            const maxSize = 2 * 1024 * 1024;
            if (!validTypes.includes(file.type)) {
                alert('Please upload a valid image (JPG, JPEG, PNG).');
                return;
            }
            if (file.size > maxSize) {
                alert('Image size must be less than 2MB.');
                return;
            }

            const user = auth.currentUser;
            if (!user) {
                alert('You must be logged in to upload an avatar.');
                avatarLoading.classList.remove('active');
                return;
            }

            avatarLoading.classList.add('active');

            const img = new Image();
            const reader = new FileReader();
            reader.onload = (e) => {
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);

            img.onload = () => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const maxDimension = 300;
                let width = img.width;
                let height = img.height;

                if (width > height) {
                    if (width > maxDimension) {
                        height = Math.round((height * maxDimension) / width);
                        width = maxDimension;
                    }
                } else {
                    if (height > maxDimension) {
                        width = Math.round((width * maxDimension) / height);
                        height = maxDimension;
                    }
                }

                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);

                canvas.toBlob((blob) => {
                    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                    if (!currentUser || !currentUser.email) {
                        alert('User not logged in.');
                        avatarLoading.classList.remove('active');
                        return;
                    }

                    const formData = new FormData();
                    formData.append('file', blob);
                    formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
                    formData.append('folder', `avatars/${currentUser.email}`);

                    fetch(`https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`, {
                        method: 'POST',
                        body: formData
                    })
                    .then(response => {
                        if (!response.ok) {
                            return response.text().then(text => {
                                let errorMessage = `Cloudinary upload failed with status ${response.status}`;
                                try {
                                    const parsed = JSON.parse(text);
                                    errorMessage = parsed.error?.message || text;
                                } catch (e) {
                                    errorMessage = text.includes('Invalid cloud name')
                                        ? 'Invalid Cloudinary cloud name. Please check the CLOUDINARY_CLOUD_NAME.'
                                        : text.includes('Invalid upload preset')
                                        ? 'Invalid upload preset. Please check the preset name in Cloudinary.'
                                        : text.includes('Unsigned uploads are not allowed')
                                        ? 'Unsigned uploads are not allowed. Please set the upload preset to Unsigned in Cloudinary.'
                                        : text || 'Unknown error occurred';
                                }
                                throw new Error(errorMessage);
                            });
                        }
                        return response.json();
                    })
                    .then(data => {
                        if (data.error) {
                            throw new Error(data.error.message || 'Failed to upload image to Cloudinary');
                        }

                        const avatarUrl = data.secure_url;
                        const sanitizedEmail = currentUser.email.replace(/\./g, ',');

                        database.ref(`users/${sanitizedEmail}`).update({
                            avatarUrl: avatarUrl,
                            updatedAt: firebase.database.ServerValue.TIMESTAMP
                        })
                        .then(() => {
                            profilePic.src = avatarUrl;
                            avatarLoading.classList.remove('active');
                        })
                        .catch(error => {
                            console.error('Error saving avatar URL to Firebase:', error);
                            alert('Failed to save avatar URL to Firebase: ' + error.message);
                            avatarLoading.classList.remove('active');
                        });
                    })
                    .catch(error => {
                        console.error('Error uploading avatar to Cloudinary:', error);
                        alert(`Failed to upload avatar to Cloudinary: ${error.message}`);
                        avatarLoading.classList.remove('active');
                    });
                }, file.type, 0.6);
            };
            img.onerror = () => {
                alert('Failed to process the image. Please try a different file.');
                avatarLoading.classList.remove('active');
            };
        });

        avatarBgColorPicker.addEventListener('change', () => {
            const color = avatarBgColorPicker.value;
            profilePic.style.backgroundColor = color;

            const user = auth.currentUser;
            if (user) {
                const sanitizedEmail = user.email.replace(/\./g, ',');
                database.ref(`users/${sanitizedEmail}`).update({
                    avatarBgColor: color,
                    updatedAt: firebase.database.ServerValue.TIMESTAMP
                })
                .catch(error => {
                    console.error('Error saving avatar background color:', error);
                    alert('Failed to save avatar background color: ' + error.message);
                });
            } else {
                alert('You must be logged in to change the avatar background color.');
            }
        });

        borderColorPicker.addEventListener('change', () => {
            const color = borderColorPicker.value;
            profilePic.style.borderColor = color;

            const user = auth.currentUser;
            if (user) {
                const sanitizedEmail = user.email.replace(/\./g, ',');
                database.ref(`users/${sanitizedEmail}`).update({
                    borderColor: color,
                    updatedAt: firebase.database.ServerValue.TIMESTAMP
                })
                .catch(error => {
                    console.error('Error saving border color:', error);
                    alert('Failed to save border color: ' + error.message);
                });
            } else {
                alert('You must be logged in to change the border color.');
            }
        });

        borderTypeSelect.addEventListener('change', () => {
            const borderType = borderTypeSelect.value;
            profilePic.style.borderStyle = borderType;

            const user = auth.currentUser;
            if (user) {
                const sanitizedEmail = user.email.replace(/\./g, ',');
                database.ref(`users/${sanitizedEmail}`).update({
                    borderType: borderType,
                    updatedAt: firebase.database.ServerValue.TIMESTAMP
                })
                .catch(error => {
                    console.error('Error saving border type:', error);
                    alert('Failed to save border type: ' + error.message);
                });
            } else {
                alert('You must be logged in to change the border type.');
            }
        });

        if (localStorage.getItem('darkTheme') === 'enabled') {
            body.classList.add('dark-theme');
            themeToggle.checked = true;
        }

        themeToggle.addEventListener('change', function() {
            if (this.checked) {
                body.classList.add('dark-theme');
                localStorage.setItem('darkTheme', 'enabled');
            } else {
                body.classList.remove('dark-theme');
                localStorage.setItem('darkTheme', 'disabled');
            }
        });

        mobileMenuIcon.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            const icon = mobileMenuIcon.querySelector('i');
            if (sidebar.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        });

        document.querySelectorAll('a[href]').forEach(link => {
            if (link.href && !link.href.startsWith('javascript:') && !link.href.startsWith('#')) {
                link.addEventListener('click', function(e) {
                    if (!this.href.includes(window.location.hostname)) return;
                    
                    e.preventDefault();
                    loaderOverlay.classList.add('active');
                    
                    setTimeout(() => {
                        window.location.href = this.href;
                    }, 150);
                });
            }
        });

        const items = document.querySelectorAll('.timeline-item, .growth-item, .careers-card, .leader-item');
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        items.forEach(item => {
            observer.observe(item);
        });

        document.addEventListener('DOMContentLoaded', async () => {
            console.log('Page loaded, updating user counts');
            await updateUserCounts();
        });
    </script>
</body>
</html>